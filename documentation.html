<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="Erick Gallesio" />
    <meta name="generator" content="stklos-pp (v0.3) Erick Gallesio" />

    <!-- W3css  stuff (See "https://www.w3schools.com/lib/w3.css") -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS -->
    <link rel='stylesheet' href='css/w3.min.css'>
<link rel='stylesheet' href='css/theme.min.css'>
<link rel='stylesheet' href='css/hl-zenburn.min.css'>
<link rel='stylesheet' href='css/local.min.css'>


    <title>STklos Home page</title>
  </head>
  <body class="w3-theme-l5">
    <header>
      <!-- Title -->
      <div class="w3-container w3-bar w3-theme">
        <img class="w3-bar-item" src="img/stklos-logo.png" alt="Logo">
        <span class="w3-bar-item w3-right" style="font-size: 240%; margin-top: 24px">
          STklos Home Page
         </span>
      </div>

      <!-- Navigation bar -->
      <nav class="w3-bar w3-theme-d4 w3-container">
        <a href='index.html' class='w3-bar-item w3-button w3-mobile w3-hover-indigo '>Home</a><a href='allnews.html' class='w3-bar-item w3-button w3-mobile w3-hover-indigo '>Changelog</a><a href='srfi.html' class='w3-bar-item w3-button w3-mobile w3-hover-indigo '>SRFIs</a><a href='documentation.html' class='w3-bar-item w3-button w3-mobile w3-hover-indigo w3-theme'>Documentation</a><a href='download.html' class='w3-bar-item w3-button w3-mobile w3-hover-indigo '>Download</a>
      </nav>
    </header>
  <article class="main-content print">


<!-- Local Variables: mode: "html" End: -->
<h2 id="documentation-files">Documentation Files</h2>
<p><strong><em>STklos</em></strong> documentation is provided with the
source distribution as well as online:</p>
<ul>
<li>The <strong>reference manual</strong> is the main document which
describes the <strong>STklos</strong> language. It is available in the
following formats:
<ul>
<li><a href="Doc/HTML/stklos-ref.html">One web page document</a></li>
<li><a href="Doc/HTML/stklos-ref-multi.html">One web page by
chapter</a></li>
<li><a href="Doc/PDF/stklos-ref.pdf">PDF file</a></li>
</ul></li>
<li>The <strong>STklos Virtual Machine</strong> describes the
organization of the VM used by <strong>STklos</strong>. It is available
in the following formats:
<ul>
<li><a href="Doc/HTML/vm.html">One web page document</a></li>
<li><a href="Doc/PDF/vm.pdf">PDF file</a></li>
</ul></li>
<li>The document <strong>Hacking STklos</strong> describes the
architecture of <strong>STklos</strong> and how to extend it (adding new
SRFI or new C primitives). It is available in the following formats:
<ul>
<li><a href="Doc/HTML/hacking.html">One web page document</a></li>
<li><a href="Doc/PDF/hacking.pdf">PDF file</a></li>
</ul></li>
<li><strong>stklos-pp: a STklos preprocessor</strong> describes the tool
used for building the <strong>STklos</strong> documentation, or this web
site. This is a simple general purpose text preprocessor which can be
customized in Scheme.
<ul>
<li><a href="Doc/HTML/pp.html">One web page document</a></li>
<li><a href="Doc/PDF/pp.pdf">PDF file</a></li>
</ul></li>
</ul>
<h2 id="installing-stklos">Installing STklos</h2>
<p><strong>STklos</strong> can be fully installed from <a
href="./download">sources</a> or it can also run it from a <a
href="https://hub.docker.com/r/stklos/stklos">Docker image</a>. Both
methods are described below</p>
<h3 id="running-a-docker-image">Running a Docker image</h3>
<h4 id="running-a-pre-built-image">Running a pre-built image</h4>
<p>To run a <a href="https://www.docker.com">Docker</a> image of
<strong>STklos</strong>, you can choose the version you want to use from
<a href="https://hub.docker.com/r/stklos/stklos"
class="uri">https://hub.docker.com/r/stklos/stklos</a>. Version with the
tag <code>latest</code> is built from the Git repository and can be
unstable. Versions with a numbered tag correspond to the versions built
from a stable release. Both images weight approximately 15Mb.</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>$ docker pull stklos/stklos:2.00          # grab the 2.00 version of STklos</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>$ docker run -ti stklos/stklos:2.00       # and run it</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>stklos&gt; (version)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>&quot;2.00&quot;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>stklos&gt; (exit)</span></code></pre></div>
<p>If you want to run a script file against such an image, you can bind
the directory containing your script to the <code>/home</code> directory
(the current directory of the docker image). For instance if you have a
script called <code>hello.stk</code> in your current directory, you can
easily run it with a particular version of STklos:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat hello.stk</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">display</span> <span class="st">&quot;Hello, world!n&quot;</span><span class="kw">)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">-v</span><span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span><span class="at">:</span>/home <span class="at">-ti</span> stklos/stklos:1.40 </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="ex">stklos</span> <span class="at">-f</span> hello.stk</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Hello,</span> world!</span></code></pre></div>
<h4 id="build-your-own-docker-image">Build your own Docker image</h4>
<p>If you want to build your own Docker image, two docker files are
provided in the <code>./etc/Docker</code> directory of the source
release. They contain the instructions to build each image.</p>
<h4 id="the-scheme-containers-project">The Scheme containers
project</h4>
<p>The <a href="https://github.com/scheme-containers">Scheme containers
project</a> provides a large list of Docker images for various Scheme
implementations. The project offers nearly 50 implementations which are
all based on the same GNU/Linux distribution and an uniform interface.
It is a great way to test different implementations and compare them on
the same code. To run the <strong>STklos</strong> image built by this
project:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>$ docker pull schemers/stklos              # grab the latest version of STklos</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>$ docker run -ti schemers/stklos           # and run it</span></code></pre></div>
<h3 id="installing-from-sources">Installing from sources</h3>
<p><strong>STklos</strong> is configured/built thanks to the <em>GNU
autotools</em>. Installing STklos is three (or four) step process:</p>
<ol type="1">
<li><p>You first need to run the <code>configure</code> script. By
default, this script will try to use the libraries installed on your
system. When a library is absent, a version of the library embedded with
the source distribution will be used.</p>
<p>The main options of the <code>configure</code> script are</p>
<ul>
<li><code>--prefix=PATH</code>: place where the files will be installed
(default to <code>/usr/local</code>)</li>
<li><code>--with-provided-gc</code>: use the provided Boehm GC
library</li>
<li><code>--with-provided-bignum</code>: use the provided Bignum
(GMPlite) library</li>
<li><code>--with-provided-regexp</code>: use the provided Regexp (PCRE)
library</li>
<li><code>--with-provided-ffi:</code> use the provided FFI library</li>
<li><code>--enable-case-insensitive</code>: be case insensitive by
default as in R5RS</li>
<li><code>--enable-threads=TYPE</code>: choose threading package (value
can be ‘none’ or ‘pthreads’, the default)</li>
</ul>
<p>You can also choose the compiler and the compiler options to use for
building <strong>STklos</strong> with the <code>CC</code> and
<code>CFLAGS</code> parameters:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./configure <span class="at">--prefix</span><span class="op">=</span>/opt <span class="at">--with-provided-gc</span> CC=clang CFLAGS=<span class="st">&quot;-O3 -Wall&quot;</span></span></code></pre></div>
<p>A summary will be printed at the end of the execution of the script
as shown below:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a> SUMMARY</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>*******</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>               System:  Linux-6.1.44-1-MANJARO</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>              OS nick:  LINUX_6_1</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>              OS type:  unix</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>       Install prefix:  /opt</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>           C compiler:  clang</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    Compilation flags:  -O3 -Wall</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>               Loader:  ld</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>       Thread support:  pthreads</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>     Case sensitivity:  true (by default)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>Control fx parameters:  yes</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>System libraries used:  libffi libpcre2 libgmp</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>   Compiled libraries:  libgc</span></code></pre></div></li>
<li><p>If everything is correct, you can just type <code>make</code> now
at your shell prompt. Note that STklos supports <a
href="https://www.gnu.org/software/make/manual/html_node/Parallel.html">parallel
execution</a> for faster builds. For instance, you can enter
<code>make -j 8</code> to build 8 recipes simultaneously.</p></li>
<li><p><strong>Optionally</strong>, you can type <code>make tests</code>
to run some internal tests</p></li>
<li><p>To install the version just compiled in the place you have chosen
previously, type <code>make install</code> for a full install. The size
of a full installation is approximately 6.5Mb (on a x86 64 bits
architecture). On machines with a more limited space, you can use the
following Makefile installation targets:</p>
<ul>
<li><code>install-base</code> to install only the VM and all the
compiled Scheme files (size is ~2.0Mb). The installation is fully
functional (except the <code>help</code> function which will yield an
error).</li>
<li><code>install-base-no-strip</code> is identical to
<code>install-base</code>, except that the <code>stklos</code> binary is
not stripped (this could be useful when cross compiling
<strong>STklos</strong> or when generating packages with debug
symbols).</li>
<li><code>install-sources</code> to install the Scheme source files used
whence building the system (adds ~1.5Mb to the installation)</li>
<li><code>install-doc</code> to install the documentation (for the help
command, manual pages, and reference manual in HTML and PDF formats).
This adds ~3.0Mb) to the installation).</li>
</ul></li>
</ol>
<p><strong>Note</strong>: <code>make install</code> is equivalent to
<code>make install-base install-sources install-docs</code></p>
<h2 id="running-stklos">Running STklos</h2>
<p>You can run STklos in a terminal from the command line. If you have
the GNU library <a
href="https://tiswww.case.edu/php/chet/readline/rltop.html"><strong>readline</strong></a>
(or the <a href="https://thrysoee.dk/editline/"><strong>Editline Library
(aka libedit)</strong></a>) installed, you will be able to do line
editing as in usual shells.</p>
<h3 id="using-gnu-emacs-as-your-ide">Using GNU Emacs as your IDE</h3>
<p>GNU Emacs offers a wide range of functionality beyond text editing.
In particular, it can be used as an IDE to build <strong>STklos</strong>
programs.</p>
<p>There are two recommended tools for that purpose:</p>
<ul>
<li><p><a
href="https://www.neilvandyke.org/quack/"><strong>Quack</strong></a> by
Neil van Dyke, which is not being updated anymore, but still works fine,
or</p></li>
<li><p><a
href="http://www.nongnu.org/geiser/"><strong>Geiser</strong></a> a
powerful Scheme environment built upon GNU EMacs. The STklos support
package is available here: <a
href="https://gitlab.com/emacs-geiser/stklos"
class="uri">https://gitlab.com/emacs-geiser/stklos</a>.<br />
Note that <code>geiser</code> and <code>geiser-stklos</code> are also
available on <a href="https://melpa.org">MELPA repository</a>.</p></li>
</ul>
<p>Enjoy.</p>
     </article>
    <footer class="foot w3-container w3-tab w3-small w3-light-grey">
      <span class="w3-bar-item"><b>STklos</b></span>
      <span class="w3-bar-item w3-right"><i>Updated:</i> 29-Aug-2023 21:34&nbsp;&nbsp;</span>
    </footer>
  </body>
</html>

<!-- Local Variables: -->
<!-- mode: html -->
<!-- End: -->
