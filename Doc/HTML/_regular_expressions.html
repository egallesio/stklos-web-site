<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Erick Gallesio">
<title>STklos Reference Manual : (version 2.00)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cm {
  color: #75715e;
  font-style: italic;
}
pre.rouge .c1 {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cp {
  color: #75715e;
  font-weight: bold;
}
pre.rouge .cs {
  color: #75715e;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .err {
  color: #960050;
  background-color: #1e0010;
}
pre.rouge .gi {
  color: #ffffff;
  background-color: #324932;
}
pre.rouge .gd {
  color: #ffffff;
  background-color: #493131;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .k, pre.rouge .kv {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kc {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kd {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kp {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kr {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kt {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kn {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .ow {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .o {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .mf {
  color: #ae81ff;
}
pre.rouge .mh {
  color: #ae81ff;
}
pre.rouge .il {
  color: #ae81ff;
}
pre.rouge .mi {
  color: #ae81ff;
}
pre.rouge .mo {
  color: #ae81ff;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #ae81ff;
}
pre.rouge .se {
  color: #ae81ff;
}
pre.rouge .sa {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .sb {
  color: #e6db74;
}
pre.rouge .sc {
  color: #e6db74;
}
pre.rouge .sd {
  color: #e6db74;
}
pre.rouge .s2 {
  color: #e6db74;
}
pre.rouge .sh {
  color: #e6db74;
}
pre.rouge .si {
  color: #e6db74;
}
pre.rouge .sx {
  color: #e6db74;
}
pre.rouge .sr {
  color: #e6db74;
}
pre.rouge .s1 {
  color: #e6db74;
}
pre.rouge .ss {
  color: #e6db74;
}
pre.rouge .s, pre.rouge .dl {
  color: #e6db74;
}
pre.rouge .na {
  color: #a6e22e;
}
pre.rouge .nc {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nd {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .ne {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .no {
  color: #66d9ef;
}
pre.rouge .bp {
  color: #f8f8f2;
}
pre.rouge .nb {
  color: #f8f8f2;
}
pre.rouge .ni {
  color: #f8f8f2;
}
pre.rouge .nn {
  color: #f8f8f2;
}
pre.rouge .vc {
  color: #f8f8f2;
}
pre.rouge .vg {
  color: #f8f8f2;
}
pre.rouge .vi {
  color: #f8f8f2;
}
pre.rouge .nv, pre.rouge .vm {
  color: #f8f8f2;
}
pre.rouge .w {
  color: #f8f8f2;
}
pre.rouge .nl {
  color: #f8f8f2;
  font-weight: bold;
}
pre.rouge .nt {
  color: #f92672;
}
pre.rouge {
  color: #f8f8f2;
  background-color: #49483e;
}
</style>
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
    font-size: 90%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_regular_expressions" class="book toc2 toc-left">
<div id="header">
<h1>STklos Reference Manual : (version 2.00)</h1>
<div class="details">
<span id="author" class="author">Erick Gallesio</span><br>
<span id="email" class="email"><a href="mailto:eg@stklos.net">eg@stklos.net</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.00)</a></span></p><ul class="sectlevel1">
<li><a href="_preface.html">Preface</a>
</li>
<li><a href="_introduction.html">1. Introduction</a>
</li>
<li><a href="_expressions.html">2. Expressions</a>
</li>
<li><a href="_program_structure.html">3. Program structure</a>
</li>
<li><a href="_standard_procedures.html">4. Standard Procedures</a>
</li>
<li><a href="_regular_expressions.html"><span class="toc-current">5. Regular Expressions</span></a>
<ul class="sectlevel2">
<li><a href="_regular_expressions.html#_backslash">5.1. Backslash</a>
</li>
<li><a href="_regular_expressions.html#_circumflex_and_dollar">5.2. Circumflex and Dollar</a>
</li>
<li><a href="_regular_expressions.html#_full_stop_period_dot">5.3. Full Stop (period, dot)</a>
</li>
<li><a href="_regular_expressions.html#_square_brackets">5.4. Square Brackets</a>
</li>
<li><a href="_regular_expressions.html#_posix_character_classes">5.5. POSIX character classes</a>
</li>
<li><a href="_regular_expressions.html#_vertical_bar">5.6. Vertical Bar</a>
</li>
<li><a href="_regular_expressions.html#_internal_option_setting">5.7. Internal Option Setting</a>
</li>
<li><a href="_regular_expressions.html#_subpatterns">5.8. Subpatterns</a>
</li>
<li><a href="_regular_expressions.html#_named_subpatterns">5.9. Named Subpatterns</a>
</li>
<li><a href="_regular_expressions.html#_repetition">5.10. Repetition</a>
</li>
<li><a href="_regular_expressions.html#_atomic_grouping_and_possessive_quantifiers">5.11. Atomic Grouping And Possessive Quantifiers</a>
</li>
<li><a href="_regular_expressions.html#_back_references">5.12. Back References</a>
</li>
<li><a href="_regular_expressions.html#_assertions">5.13. Assertions</a>
</li>
<li><a href="_regular_expressions.html#_conditional_subpatterns">5.14. Conditional Subpatterns</a>
</li>
<li><a href="_regular_expressions.html#_comments_2">5.15. Comments</a>
</li>
<li><a href="_regular_expressions.html#_subpatterns_as_subroutines">5.16. Subpatterns As Subroutines</a>
</li>
<li><a href="_regular_expressions.html#_regexp_procedures">5.17. Regexp Procedures</a>
</li>
</ul>
</li>
<li><a href="_pattern_matching.html">6. Pattern Matching</a>
</li>
<li><a href="_exceptions_and_conditions.html">7. Exceptions and Conditions</a>
</li>
<li><a href="_stklos_object_system.html">8. STklos Object System</a>
</li>
<li><a href="_threads_mutexes_and_condition_variables.html">9. Threads, Mutexes and Condition Variables</a>
</li>
<li><a href="_stklos_customization.html">10. STklos Customization</a>
</li>
<li><a href="_foreign_function_interface.html">11. Foreign Function Interface</a>
</li>
<li><a href="_using_the_slib_package.html">12. Using the SLIB package</a>
</li>
<li><a href="_srfis.html">13. SRFIs</a>
</li>
<li><a href="_bibliography.html">Bibliography</a>
</li>
<li><a href="_idiosync.html">Appendix C: STklos Idiosyncrasies</a>
</li>
<li><a href="FDL.html">Appendix D: GNU Free Documentation License</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_regular_expressions">5. Regular Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>

<strong><em>STklos</em></strong> uses the Philip Hazel&#8217;s Perl-compatible Regular Expression (PCRE)
library for implementing regexps <a href="_bibliography.html#PCRE">[PCRE]</a>.  Consequently, the <strong><em>STklos</em></strong> regular
expression syntax is the same as PCRE, and Perl by the way.</p>
</div>
<div class="paragraph">
<p>The following text is extracted from the PCRE package. However, to make things
shorter, some of the original documentation as not been reported here. In
particular some possibilities of PCRE have been completely occulted (those
whose description was too long and which seems (at least to me), not too
important). Read the documentation provided with PCRE for a complete
description footnote{The latest release of PCRE is available from
<a href="http://www.pcre.org/" class="bare">http://www.pcre.org/</a>.</p>
</div>
<div class="paragraph">
<p>A regular expression is a pattern that is matched against a subject string
from left to right. Most characters stand for themselves in a pattern, and
match the corresponding characters in the subject. As a trivial example, the
pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>The quick brown fox</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches a portion of a subject string that is identical to itself.  The power
of regular expressions comes from the ability to include alternatives and
repetitions in the pattern. These are encoded in the pattern by the use of
<em>meta-characters</em>, which do not stand for themselves but instead are
interpreted in some special way.</p>
</div>
<div class="paragraph">
<p>There are two different sets of meta-characters: those that are recognized
anywhere in the pattern except within square brackets, and those that are
recognized in square brackets. Outside square brackets, the meta-characters
are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch small">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">general escape character with several uses</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assert start of subject (or line, in multiline mode)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assert end of subject (or line, in multiline mode)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">match any character except newline (by default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">start character class definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">start of alternative branch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">start subpattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">end subpattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends the meaning of '('<br>
also 0 or 1 quantifier<br>
also quantifier minimizer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 or more quantifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 or more quantifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">{</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Part of a pattern that is in square brackets is called a "character
class". In a character class the only meta-characters are:</p>
</div>
<table class="tableblock frame-all grid-all stretch small">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">general escape character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">^</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">negate the class, but only if the first character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indicates character range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POSIX character class (only if followed by POSIX syntax)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">terminates the character class</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following sections describe the use of each of the meta-characters.</p>
</div>
<div class="sect2">
<h3 id="_backslash">5.1. Backslash</h3>
<div class="paragraph">
<p>The backslash character has several uses. Firstly, if it is followed by a
non-alphameric character, it takes away any special meaning that character may
have. This use of backslash as an escape character applies both inside and
outside character classes.</p>
</div>
<div class="paragraph">
<p>For example, if you want to match a <code><strong></code> character, you write
<code></strong></code> in the pattern.  This escaping action applies whether or not
the following character would otherwise be interpreted as a
meta-character, so it is always safe to precede a non-alphameric
with backslash to specify that it stands for itself. In
particular, if you want to match a backslash, you write <code>\</code>.</p>
</div>
<div class="paragraph">
<p>If you want to remove the special meaning from a sequence of characters, you
can do so by putting them between <code>Q</code> and <code>E</code>. This is different from Perl
in that <code>$</code> and <code>@</code> are handled as literals in <code>Q</code>&#8230;&#8203;<code>E</code> sequences in PCRE,
whereas in Perl, <code>`$</code> and <code>@</code> cause variable interpolation. Note the following
examples:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Pattern</th>
<th class="tableblock halign-left valign-top">PCRE matches</th>
<th class="tableblock halign-left valign-top">Perl matches</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qabc$xyzE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abc$xyz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abc followed by the contents of $xyz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Qabc$xyzE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abc$xyz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abc$xyz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QabcE$QxyzE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abc$xyz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abc$xyz</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>Q&#8230;&#8203;E</code> sequence is recognized both inside and outside character
classes.</p>
</div>
<div class="paragraph">
<p>A second use of backslash provides a way of encoding non-printing
characters in patterns in a visible manner. There is no restriction on
the appearance of non-printing characters, apart from the binary zero
that terminates a pattern, but when a pattern is being prepared by
text editing, it is usually easier to use one of the following escape
sequences than the binary character it represents:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm, that is, the BEL character (hex 07)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>control-x</em>, where x is any character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">escape (hex 1B)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">formfeed (hex 0C)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">newline (hex 0A)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">r</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">carriage return (hex 0D)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">t</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tab (hex 09)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ddd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">character with octal code ddd, or backreference</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xhh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">character with hex code hh</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The precise effect of <code>x</code> is as follows: if <code>x</code> is a lower case
letter, it is converted to upper case. Then bit 6 of the character
(hex 40) is inverted.  Thus <code>cz</code> becomes hex 1A, but <code>c{</code> becomes
hex 3B, while <code>c;</code> becomes hex 7B.</p>
</div>
<div class="paragraph">
<p>The handling of a backslash followed by a digit other than 0 is
complicated.  Outside a character class, PCRE reads it and any
following digits as a decimal number. If the number is less than 10,
or if there have been at least that many previous capturing left
parentheses in the expression, the entire sequence is taken as a <em>back
reference</em>. A description of how this works is given later, following
the discussion of parenthesized subpatterns.</p>
</div>
<div class="paragraph">
<p>The third use of backslash is for specifying generic character types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any decimal digit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any character that is not a decimal digit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any whitespace character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any character that is not a whitespace character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any <em>word</em> character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any <em>non-word</em> character</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each pair of escape sequences partitions the complete set of
characters into two disjoint sets. Any given character matches one,
and only one, of each pair.</p>
</div>
<div class="paragraph">
<p>For compatibility with Perl, <code>s</code> does not match the VT character
(code 11).  This makes it different from the the POSIX "space"
class. The <code>s</code> characters are HT (9), LF (10), FF (12), CR (13), and
space (32).</p>
</div>
<div class="paragraph">
<p>A <em>word</em> character is any letter or digit or the underscore character,
that is, any character which can be part of a Perl <em>word</em>. The
definition of letters and digits is controlled by PCRE&#8217;s character
tables, and may vary if locale-specific matching is taking place.  For
example, in the "fr" (French) locale, some character codes greater
than 128 are used for accented letters, and these are matched by <code>w</code>.</p>
</div>
<div class="paragraph">
<p>These character type sequences can appear both inside and outside
character classes. They each match one character of the appropriate
type. If the current matching point is at the end of the subject
string, all of them fail, since there is no character to match.</p>
</div>
<div class="paragraph">
<p>The fourth use of backslash is for certain simple assertions. An
assertion specifies a condition that has to be met at a particular
point in a match, without consuming any characters from the subject
string. The use of subpatterns for more complicated assertions is
described below. The backslashed assertions are</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">b</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches at a word boundary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches when not at a word boundary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches at start of subject</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches at end of subject or before newline at end</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches at end of subject</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches at first matching position in subject</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These assertions may not appear in character classes (but note that
<code>b</code> has a different meaning, namely the backspace character, inside a
character class).</p>
</div>
<div class="paragraph">
<p>A word boundary is a position in the subject string where the current
character and the previous character do not both match <code>w</code>
or <code>W</code> (i.e. one matches <code>w</code> and the other matches
<code>W</code>), or the start or end of the string if the first or last
character matches <code>w</code>, respectively.</p>
</div>
<div class="paragraph">
<p>The <code>A</code>, <code>Z</code>, and <code>z</code> assertions differ from the traditional
circumflex and dollar (described below) in that they only ever match
at the very start and end of the subject string, whatever options
are set. Thus, they are independent of multiline mode.</p>
</div>
<div class="paragraph">
<p>The backslash character has several uses. Firstly, if it is followed by
a non-alphameric character, it takes away any special meaning that
character may have. This use of backslash as an escape character applies
both inside and outside character classes.</p>
</div>
<div class="paragraph">
<p>For example, if you want to match a "<strong>" character, you write "\</strong>"
in the pattern. This applies whether or not the following character
would otherwise be interpreted as a meta-character, so it is always
safe to precede a non-alphameric with &#8220;`" to specify that it stands
for itself. In particular, if you want to match a backslash, you write
"`\&#8221;.</p>
</div>
</div>
<div class="sect2">
<h3 id="_circumflex_and_dollar">5.2. Circumflex and Dollar</h3>
<div class="paragraph">
<p>Outside a character class, in the default matching mode, the
circumflex character is an assertion which is true only if the current
matching point is at the start of the subject string. Inside a
character class, circumflex has an entirely different meaning (see
below).</p>
</div>
<div class="paragraph">
<p>Circumflex need not be the first character of the pattern if a number
of alternatives are involved, but it should be the first thing in each
alternative in which it appears if the pattern is ever to match that
branch. If all possible alternatives start with a circumflex, that is,
if the pattern is constrained to match only at the start of the
subject, it is said to be an "anchored" pattern. (There are also other
constructs that can cause a pattern to be anchored.)</p>
</div>
<div class="paragraph">
<p>A dollar character is an assertion which is true only if the current
matching point is at the end of the subject string, or immediately
before a newline character that is the last character in the string
(by default). Dollar need not be the last character of the pattern if
a number of alternatives are involved, but it should be the last item
in any branch in which it appears.  Dollar has no special meaning in a
character class.</p>
</div>
<div class="paragraph">
<p>The meanings of the circumflex and dollar characters are changed if
the <em>multiline</em> option is set. When this is the case, they match
immediately after and immediately before an internal newline
character, respectively, in addition to matching at the start and end
of the subject string. For example, the pattern <code>^abc$</code> matches the
subject string <code>"defnabc"</code> in multiline mode, but not otherwise.</p>
</div>
<div class="paragraph">
<p>Note that the sequences <code>A</code>, <code>Z</code>, and <code>z</code> can be used to match the
start and end of the subject in both modes, and if all branches of a
pattern start with <code>A</code> it is always anchored, whether
<em>multiline</em> is set or not.</p>
</div>
</div>
<div class="sect2">
<h3 id="_full_stop_period_dot">5.3. Full Stop (period, dot)</h3>
<div class="paragraph">
<p>Outside a character class, a dot in the pattern matches any
one character in the subject, including a non-printing character,
but not (by default) newline. If the <em>dotall</em> option is
set, dots match newlines as well. The handling of dot is entirely
independent of the handling of circumflex and dollar, the only
relationship being that they both involve newline characters. Dot
has no special meaning in a character class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_square_brackets">5.4. Square Brackets</h3>
<div class="paragraph">
<p>An opening square bracket introduces a character class,
terminated by a closing square bracket. A closing square bracket
on its own is not special. If a closing square bracket is
required as a member of the class, it should be the first data
character in the class (after an initial circumflex, if present)
or escaped with a backslash.</p>
</div>
<div class="paragraph">
<p>A character class matches a single character in the
subject. A matched character must be in the set of characters
defined by the class, unless the first character in the class
definition is a circumflex, in which case the subject character
must not be in the set defined by the class. If a circumflex is
actually required as a member of the class, ensure it is not the
first character, or escape it with a backslash.</p>
</div>
<div class="paragraph">
<p>For example, the character class <code>[aeiou]</code> matches any lower case
vowel, while <code>[^aeiou]</code> matches any character that is not a lower case
vowel. Note that a circumflex is just a convenient notation for
specifying the characters which are in the class by enumerating those
that are not. It is not an assertion: it still consumes a character
from the subject string, and fails if the current pointer is at the
end of the string.</p>
</div>
<div class="paragraph">
<p>When caseless matching is set, any letters in a class represent both
their upper case and lower case versions, so for example, a caseless
<code>[aeiou]</code> matches "A" as well as "a", and a caseless <code>[^aeiou]</code>
does not match "A", whereas a caseful version would.</p>
</div>
<div class="paragraph">
<p>The newline character is never treated in any special way in character classes,
whatever the setting of the <em>dotall</em> or <em>multiline</em> options is. A class
such as <code>[^a]</code> will always match a newline.</p>
</div>
<div class="paragraph">
<p>The minus (hyphen) character can be used to specify a range of characters in a
character class. For example, [d-m] matches any letter between d and m,
inclusive. If a minus character is required in a class, it must be escaped with
a backslash or appear in a position where it cannot be interpreted as
indicating a range, typically as the first or last character in the class.</p>
</div>
<div class="paragraph">
<p>It is not possible to have the literal character "]" as the end
character of a range. A pattern such as <code>[W-]46]</code> is interpreted as a
class of two characters ("W" and "-") followed by a literal string
"46]", so it would match "W46]" or "-46]". However, if the "]" is
escaped with a backslash it is interpreted as the end of range, so
<code>(W]46)</code> is interpreted as a single class containing a range followed
by two separate characters. The octal or hexadecimal representation of
"]" can also be used to end a range.</p>
</div>
<div class="paragraph">
<p>Ranges operate in the collating sequence of character values. They can also be
used for characters specified numerically, for example <code>[000-037]</code>.</p>
</div>
<div class="paragraph">
<p>If a range that includes letters is used when caseless matching is set, it
matches the letters in either case. For example, <code>[W-c]</code> is equivalent to
<code>[][^_`wxyzabc]</code>, matched caselessly, and if character tables for the "fr"
locale are in use, <code>[xc8-xcb]</code> matches accented E characters in both cases.</p>
</div>
<div class="paragraph">
<p>The character types <code>d</code>, <code>D</code>, <code>s</code>, <code>S</code>, 'w`, and <code>W</code> may also appear in a
character class, and add the characters that they match to the class. For
example, <code>[dABCDEF]</code> matches any hexadecimal digit. A circumflex can
conveniently be used with the upper case character types to specify a more
restricted set of characters than the matching lower case type. For example,
the class <code>[^W_]</code> matches any letter or digit, but not underscore.</p>
</div>
<div class="paragraph">
<p>All non-alphameric characters other than <code>`, `-</code>, <code>^</code> (at the start) and the
terminating <code>]</code> are non-special in character classes, but it does no harm if they
are escaped.</p>
</div>
</div>
<div class="sect2">
<h3 id="_posix_character_classes">5.5. POSIX character classes</h3>
<div class="paragraph">
<p>Perl supports the POSIX notation for character classes, which
uses names enclosed by [: and :] within the enclosing square
brackets. <strong><em>STklos</em></strong> , thanks to PCRE, also supports this
notation. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[01[:alpha:]%]</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "0", "1", any alphabetic character, or "%". The supported
class names are</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">letters and digits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alpha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">letters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ascii</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">character codes 0 - 127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">blank</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">space or tab only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cntrl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">control characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">digit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">decimal digits (same as d</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">graph</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">printing characters, excluding space</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lower</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lower case letters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">print</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">printing characters, including space</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">punct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">printing characters, excluding letters and digits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">space</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">white space (not quite the same as s)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upper</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">upper case letters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">word"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word</em> characters (same as w)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">xdigit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hexadecimal digits</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <em>space</em> characters are HT (9), LF (10), VT (11), FF (12), CR (13), and
space (32). Notice that this list includes the VT character (code 11). This
makes "space" different to $backslash$s, which does not include VT (for Perl
compatibility).</p>
</div>
<div class="paragraph">
<p>The name <em>word</em> is a Perl extension, and <em>blank</em> is a GNU extension from Perl
5.8. Another Perl extension is negation, which is indicated by a <code>^</code> character
after the colon. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[12[:^digit:]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "1", "2", or any non-digit. <strong><em>STklos</em></strong> (and Perl) also
recognize the POSIX syntax <code>[.ch.]</code> and <code>[=ch=]</code> where "ch" is a
"collating element", but these are not supported, and an error is
given if they are encountered.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vertical_bar">5.6. Vertical Bar</h3>
<div class="paragraph">
<p>Vertical bar characters are used to separate alternative patterns. For example,
the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>gilbert|sullivan</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches either "gilbert" or "sullivan". Any number of alternatives may appear,
and an empty alternative is permitted (matching the empty string).
The matching process tries each alternative in turn, from left to right,
and the first one that succeeds is used. If the alternatives are within a
subpattern (defined below), "succeeds" means matching the rest of the main
pattern as well as the alternative in the subpattern.</p>
</div>
</div>
<div class="sect2">
<h3 id="_internal_option_setting">5.7. Internal Option Setting</h3>
<div class="paragraph">
<p>The settings of the <em>caseless</em>, <em>multiline</em>, <em>dotall</em>, and
<em>EXTENDED</em> options can be changed from within the pattern by a sequence of
Perl option letters enclosed between "(?" and ")". The option letters are</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">i</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for <em>caseless</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for <em>multiline</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for <em>dotall</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for <em>extended</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, <code>(?im)</code> sets <em>caseless</em>, <em>multiline matching</em>. It is also possible to
unset these options by preceding the letter with a hyphen, and a combined
setting and unsetting such as <code>(?im-sx)</code>, which sets <em>caseless</em> and
<em>multiline</em> while unsetting <em>dotall</em> and <em>extended</em>, is also
permitted. If a letter appears both before and after the hyphen, the option is
unset.</p>
</div>
<div class="paragraph">
<p>When an option change occurs at top level (that is, not inside subpattern
parentheses), the change applies to the remainder of the pattern that follows.
If the change is placed right at the start of a pattern, PCRE extracts it into
the global options</p>
</div>
<div class="paragraph">
<p>An option change within a subpattern affects only that part of the current
pattern that follows it, so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(a(?i)b)c</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches <code>abc</code> and <code>aBc</code> and no other strings (assuming <em>caseless</em> is
not used).By this means, options can be made to have different
settings in different parts of the pattern. Any changes made in one
alternative do carry on into subsequent branches within the same
subpattern. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(a(?i)b|c)</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "ab", "aB", "c", and "C", even though when matching "C" the first
branch is abandoned before the option setting. This is because the effects of
option settings happen at compile time. There would be some very weird
behaviour otherwise.</p>
</div>
<div class="paragraph">
<p>The PCRE-specific options <em>ungreedy</em> and <em>extra</em> can be changed in
the same way as the Perl-compatible options by using the characters
<code>U</code> and <code>X</code> respectively. The <code>(?X)</code> flag setting is special in that
it must always occur earlier in the pattern than any of the additional
features it turns on, even when it is at top level. It is best put at
the start.</p>
</div>
</div>
<div class="sect2">
<h3 id="_subpatterns">5.8. Subpatterns</h3>
<div class="paragraph">
<p>Subpatterns are delimited by parentheses (round brackets), which can be nested.
Marking part of a pattern as a subpattern does two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It localizes a set of alternatives. For example, the pattern</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>cat(aract|erpillar|)</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches one of the words "cat", "cataract", or "caterpillar". Without the
parentheses, it would match "cataract", "erpillar" or the empty string.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It sets up the subpattern as a capturing subpattern (as
defined above).  When the whole pattern matches, that portion of
the subject string that matched the subpattern is set so that it
can be used in the regexp-replace or
regexp-replace-all functions. Opening parentheses
are counted from left to right (starting from 1) to obtain the
numbers of the capturing subpatterns.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if the string "the red king" is matched against the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>the ((red|white) (king|queen))</code></pre>
</div>
</div>
<div class="paragraph">
<p>the captured substrings are "red king", "red", and "king", and are numbered 1,
2, and 3, respectively.</p>
</div>
<div class="paragraph">
<p>The fact that plain parentheses fulfil two functions is not always helpful.
There are often times when a grouping subpattern is required without a
capturing requirement. If an opening parenthesis is followed by a question mark
and a colon, the subpattern does not do any capturing, and is not counted when
computing the number of any subsequent capturing subpatterns. For example, if
the string "the white queen" is matched against the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>the ((?:red|white) (king|queen))</code></pre>
</div>
</div>
<div class="paragraph">
<p>the captured substrings are "white queen" and "queen", and are
numbered 1 and 2. The maximum number of capturing subpatterns is
65535, and the maximum depth of nesting of all subpatterns, both
capturing and non-capturing, is 200.</p>
</div>
<div class="paragraph">
<p>As a convenient shorthand, if any option settings are required at the
start of a non-capturing subpattern, the option letters may appear
between the "?" and the ":".<br>
Thus the two patterns</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?i:saturday|sunday)</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?:(?i)saturday|sunday)</code></pre>
</div>
</div>
<div class="paragraph">
<p>match exactly the same set of strings. Because alternative branches are tried
from left to right, and options are not reset until the end of the subpattern
is reached, an option setting in one branch does affect subsequent branches, so
the above patterns match "SUNDAY" as well as "Saturday".</p>
</div>
</div>
<div class="sect2">
<h3 id="_named_subpatterns">5.9. Named Subpatterns</h3>
<div class="paragraph">
<p>Identifying capturing parentheses by number is simple, but it can be very hard
to keep track of the numbers in complicated regular expressions. Furthermore,
if an expression is modified, the numbers may change. To help with the
difficulty, PCRE supports the naming of subpatterns, something that Perl does
not provide. The Python syntax (?P&lt;name&gt;&#8230;&#8203;) is used. Names consist of
alphanumeric characters and underscores, and must be unique within a pattern.</p>
</div>
</div>
<div class="sect2">
<h3 id="_repetition">5.10. Repetition</h3>
<div class="paragraph">
<p>Repetition is specified by quantifiers, which can follow any of the following
items:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a literal data character</p>
</li>
<li>
<p>the <code>.</code> metacharacter</p>
</li>
<li>
<p>the <code>C</code> escape sequence</p>
</li>
<li>
<p>escapes such as <code>d</code> that match single characters</p>
</li>
<li>
<p>a character class</p>
</li>
<li>
<p>a back reference (see next section)</p>
</li>
<li>
<p>a parenthesized subpattern (unless it is an assertion)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The general repetition quantifier specifies a minimum and maximum
number of permitted matches, by giving the two numbers in curly
brackets (braces), separated by a comma. The numbers must be less than
65536, and the first must be less than or equal to the second. For
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>z{2,4}</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "zz", "zzz", or "zzzz". A closing brace on its own is not a special
character. If the second number is omitted, but the comma is present, there is
no upper limit; if the second number and the comma are both omitted, the
quantifier specifies an exact number of required matches. Thus</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[aeiou]{3,}</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches at least 3 successive vowels, but may match many more, while</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>d{8}</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches exactly 8 digits. An opening curly bracket that appears in a position
where a quantifier is not allowed, or one that does not match the syntax of a
quantifier, is taken as a literal character. For example, {,6} is not a
quantifier, but a literal string of four characters.</p>
</div>
<div class="paragraph">
<p>The quantifier {0} is permitted, causing the expression to behave as if the
previous item and the quantifier were not present.</p>
</div>
<div class="paragraph">
<p>For convenience (and historical compatibility) the three most common
quantifiers have single-character abbreviations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>*</code>    is equivalent to {0,}</p>
</li>
<li>
<p><code>+</code>    is equivalent to {1,}</p>
</li>
<li>
<p><code>?</code>    is equivalent to {0,1}</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to construct infinite loops by following a subpattern that can
match no characters with a quantifier that has no upper limit, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(a?)*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Earlier versions of Perl and PCRE used to give an error at compile time for
such patterns. However, because there are cases where this can be useful, such
patterns are now accepted, but if any repetition of the subpattern does in fact
match no characters, the loop is forcibly broken.</p>
</div>
<div class="paragraph">
<p>By default, the quantifiers are "greedy", that is, they match as much as
possible (up to the maximum number of permitted times), without causing the
rest of the pattern to fail. The classic example of where this gives problems
is in trying to match comments in C programs. These appear between the
sequences <code>/<strong></code> and <code></strong>/</code> and within the sequence, individual <code>*</code> and <code>/</code> characters may
appear. An attempt to match C comments by applying the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>/*.**/</code></pre>
</div>
</div>
<div class="paragraph">
<p>to the string</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>/* first command */  not comment  /* second comment */</code></pre>
</div>
</div>
<div class="paragraph">
<p>fails, because it matches the entire string owing to the greediness of the <code>.*</code>
item.</p>
</div>
<div class="paragraph">
<p>However, if a quantifier is followed by a question mark, it ceases to be
greedy, and instead matches the minimum number of times possible, so the
pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>/*.*?*/</code></pre>
</div>
</div>
<div class="paragraph">
<p>does the right thing with the C comments. The meaning of the various
quantifiers is not otherwise changed, just the preferred number of matches.
Do not confuse this use of question mark with its use as a quantifier in its
own right. Because it has two uses, it can sometimes appear doubled, as in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>d??d</code></pre>
</div>
</div>
<div class="paragraph">
<p>which matches one digit by preference, but can match two if that is the only
way the rest of the pattern matches.</p>
</div>
<div class="paragraph">
<p>If the <em>ungreedy</em> option is set (an option which is not available in
Perl), the quantifiers are not greedy by default, but individual ones
can be made greedy by following them with a question mark. In other
words, it inverts the default behaviour.</p>
</div>
<div class="paragraph">
<p>When a parenthesized subpattern is quantified with a minimum repeat
count that is greater than 1 or with a limited maximum, more store is
required for the compiled pattern, in proportion to the size of the
minimum or maximum.</p>
</div>
<div class="paragraph">
<p>If a pattern starts with <code>.*</code> or <code>.{0,}</code> and the <em>dotall</em> option (equivalent
to Perl&#8217;s <code>/s</code>) is set, thus allowing the <code>.</code> to match newlines, the pattern is
implicitly anchored, because whatever follows will be tried against every
character position in the subject string, so there is no point in retrying the
overall match at any position after the first. PCRE normally treats such a
pattern as though it were preceded by <code>A</code>.</p>
</div>
<div class="paragraph">
<p>In cases where it is known that the subject string contains no newlines, it is
worth setting <em>dotall</em> in order to obtain this optimization, or
alternatively using <code>^</code> to indicate anchoring explicitly.</p>
</div>
<div class="paragraph">
<p>However, there is one situation where the optimization cannot be used. When <code>.*</code>
is inside capturing parentheses that are the subject of a backreference
elsewhere in the pattern, a match at the start may fail, and a later one
succeed. Consider, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(.*)abc1</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the subject is <code>"xyz123abc123"</code> the match point is the fourth character. For
this reason, such a pattern is not implicitly anchored.</p>
</div>
<div class="paragraph">
<p>When a capturing subpattern is repeated, the value captured is the substring
that matched the final iteration. For example, after</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(tweedle[dume]{3}s*)+</code></pre>
</div>
</div>
<div class="paragraph">
<p>has matched "tweedledum tweedledee" the value of the captured substring is
"tweedledee". However, if there are nested capturing subpatterns, the
corresponding captured values may have been set in previous iterations. For
example, after</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(a|(b))+</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_atomic_grouping_and_possessive_quantifiers">5.11. Atomic Grouping And Possessive Quantifiers</h3>
<div class="paragraph">
<p>With both maximizing and minimizing repetition, failure of what follows
normally causes the repeated item to be re-evaluated to see if a different
number of repeats allows the rest of the pattern to match. Sometimes it is
useful to prevent this, either to change the nature of the match, or to cause
it fail earlier than it otherwise might, when the author of the pattern knows
there is no point in carrying on.</p>
</div>
<div class="paragraph">
<p>Consider, for example, the pattern <code>d+foo</code> when applied to the subject line</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>123456bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>After matching all 6 digits and then failing to match "foo", the normal
action of the matcher is to try again with only 5 digits matching the <code>d+</code>
item, and then with 4, and so on, before ultimately failing. "Atomic grouping"
(a term taken from Jeffrey Friedl&#8217;s book) provides the means for specifying
that once a subpattern has matched, it is not to be re-evaluated in this way.</p>
</div>
<div class="paragraph">
<p>If we use atomic grouping for the previous example, the matcher would give up
immediately on failing to match "foo" the first time. The notation is a kind of
special parenthesis, starting with (<code>?&gt;</code> as in this example:)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&gt;d+)foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>This kind of parenthesis "locks up" the  part of the pattern it contains once
it has matched, and a failure further into the pattern is prevented from
backtracking into it. Backtracking past it to previous items, however, works as
normal.</p>
</div>
<div class="paragraph">
<p>An alternative description is that a subpattern of this type matches the string
of characters that an identical standalone pattern would match, if anchored at
the current point in the subject string.</p>
</div>
<div class="paragraph">
<p>Atomic grouping subpatterns are not capturing subpatterns. Simple
cases such as the above example can be thought of as a maximizing
repeat that must swallow everything it can. So, while both
<code>d+</code> and <code>d+?</code> are prepared to adjust the number
of digits they match in order to make the rest of the pattern match,
<code>(?&gt;d+)</code> can only match an entire sequence of digits.</p>
</div>
<div class="paragraph">
<p>Atomic groups in general can of course contain arbitrarily complicated
subpatterns, and can be nested. However, when the subpattern for an atomic
group is just a single repeated item, as in the example above, a simpler
notation, called a "possessive quantifier" can be used. This consists of an
additional <code>+</code> character following a quantifier. Using this notation, the
previous example can be rewritten as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>d++bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possessive quantifiers are always greedy; the setting of the <em>ungreedy</em>
option is ignored. They are a convenient notation for the simpler forms of
atomic group. However, there is no difference in the meaning or processing of a
possessive quantifier and the equivalent atomic group.</p>
</div>
<div class="paragraph">
<p>The possessive quantifier syntax is an extension to the Perl syntax. It
originates in Sun&#8217;s Java package.</p>
</div>
<div class="paragraph">
<p>When a pattern contains an unlimited repeat inside a subpattern that can itself
be repeated an unlimited number of times, the use of an atomic group is the
only way to avoid some failing matches taking a very long time indeed. The
pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(D+|&lt;d+&gt;)*[!?]</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches an unlimited number of substrings that either consist of non-digits, or
digits enclosed in &lt;&gt;, followed by either ! or ?. When it matches, it runs
quickly. However, if it is applied to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</code></pre>
</div>
</div>
<div class="paragraph">
<p>it takes a long time before reporting failure. This is because the string can
be divided between the two repeats in a large number of ways, and all have to
be tried. (The example used <code>[!?]</code> rather than a single character at the end,
because both PCRE and Perl have an optimization that allows for fast failure
when a single character is used. They remember the last single character that
is required for a match, and fail early if it is not present in the string.)
If the pattern is changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>((?&gt;D+)|&lt;d+&gt;)*[!?]</code></pre>
</div>
</div>
<div class="paragraph">
<p>sequences of non-digits cannot be broken, and failure happens quickly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_back_references">5.12. Back References</h3>
<div class="paragraph">
<p>Outside a character class, a backslash followed by a digit greater than 0 (and
possibly further digits) is a back reference to a capturing subpattern earlier
(that is, to its left) in the pattern, provided there have been that many
previous capturing left parentheses.</p>
</div>
<div class="paragraph">
<p>However, if the decimal number following the backslash is less than
10, it is always taken as a back reference, and causes an error only
if there are not that many capturing left parentheses in the entire
pattern. In other words, the parentheses that are referenced need not
be to the left of the reference for numbers less than 10. See the
section entitled "Backslash" above for further details of the handling
of digits following a backslash.</p>
</div>
<div class="paragraph">
<p>A back reference matches whatever actually matched the capturing
subpattern in the current subject string, rather than anything
matching the subpattern itself (see below for a way of doing that). So
the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(sens|respons)e and 1ibility</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "sense and sensibility" and "response and responsibility", but not
"sense and responsibility". If caseful matching is in force at the time of the
back reference, the case of letters is relevant. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>((?i)rah)s+1</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "rah rah" and "RAH RAH", but not "RAH rah", even though the original
capturing subpattern is matched caselessly.</p>
</div>
<div class="paragraph">
<p>Back references to named subpatterns use the Python syntax <code>(?P=name)</code>. We could
rewrite the above example as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;p1&gt;(?i)rah)s+(?P=p1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>There may be more than one back reference to the same subpattern. If a
subpattern has not actually been used in a particular match, any back
references to it always fail. For example, the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(a|(bc))2</code></pre>
</div>
</div>
<div class="paragraph">
<p>always fails if it starts to match "a" rather than "bc". Because there may be
many capturing parentheses in a pattern, all digits following the backslash are
taken as part of a potential back reference number. If the pattern continues
with a digit character, some delimiter must be used to terminate the back
reference. If the <em>extended</em> option is set, this can be whitespace.
Otherwise an empty comment can be used.</p>
</div>
<div class="paragraph">
<p>A back reference that occurs inside the parentheses to which it refers fails
when the subpattern is first used, so, for example, (a1) never matches.
However, such references can be useful inside repeated subpatterns. For
example, the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(a|b1)+</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches any number of "a"s and also "aba", "ababbaa" etc. At each iteration of
the subpattern, the back reference matches the character string corresponding
to the previous iteration. In order for this to work, the pattern must be such
that the first iteration does not need to match the back reference. This can be
done using alternation, as in the example above, or by a quantifier with a
minimum of zero.</p>
</div>
</div>
<div class="sect2">
<h3 id="_assertions">5.13. Assertions</h3>
<div class="paragraph">
<p>An assertion is a test on the characters following or preceding the current
matching point that does not actually consume any characters. The simple
assertions coded as <code>b</code>, <code>B</code>, <code>A</code>, <code>G</code>, <code>Z</code>, <code>z</code>, <code>^</code> and <code>$</code> are described above.
More complicated assertions are coded as subpatterns. There are two kinds:
those that look ahead of the current position in the subject string, and those
that look behind it.</p>
</div>
<div class="paragraph">
<p>An assertion subpattern is matched in the normal way, except that it does not
cause the current matching position to be changed. Lookahead assertions start
with <code>(?=</code> for positive assertions and <code>(?!</code> for negative assertions. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>w+(?=;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches a word followed by a semicolon, but does not include the
semicolon in the match, and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>foo(?!bar)</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches any occurrence of "foo" that is not followed by "bar". Note
that the apparently similar pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?!foo)bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>does not find an occurrence of "bar" that is preceded by something other than
"foo"; it finds any occurrence of "bar" whatsoever, because the assertion
<code>(?!foo)</code> is always true when the next three characters are "bar". A
lookbehind assertion is needed to achieve this effect.</p>
</div>
<div class="paragraph">
<p>If you want to force a matching failure at some point in a pattern, the most
convenient way to do it is with <code>(?!)</code> because an empty string always matches, so
an assertion that requires there not to be an empty string must always fail.</p>
</div>
<div class="paragraph">
<p>Lookbehind assertions start with <code>(?&#8656;</code> for positive assertions and <code>(?&lt;!</code> for
negative assertions. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;!foo)bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>does find an occurrence of "bar" that is not preceded by "foo". The contents of
a lookbehind assertion are restricted such that all the strings it matches must
have a fixed length. However, if there are several alternatives, they do not
all have to have the same fixed length. Thus</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=bullock|donkey)</code></pre>
</div>
</div>
<div class="paragraph">
<p>is permitted, but</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;!dogs?|cats?)</code></pre>
</div>
</div>
<div class="paragraph">
<p>causes an error at compile time. Branches that match different length strings
are permitted only at the top level of a lookbehind assertion. This is an
extension compared with Perl (at least for 5.8), which requires all branches to
match the same length of string. An assertion such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=ab(c|de))</code></pre>
</div>
</div>
<div class="paragraph">
<p>is not permitted, because its single top-level branch can match two different
lengths, but it is acceptable if rewritten to use two top-level branches:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=abc|abde)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The implementation of lookbehind assertions is, for each alternative, to
temporarily move the current position back by the fixed width and then try to
match. If there are insufficient characters before the current position, the
match is deemed to fail.</p>
</div>
<div class="paragraph">
<p>Atomic groups can be used in conjunction with lookbehind assertions to specify
efficient matching at the end of the subject string. Consider a simple pattern
such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>abcd$</code></pre>
</div>
</div>
<div class="paragraph">
<p>when applied to a long string that does not match. Because matching proceeds
from left to right, PCRE will look for each "a" in the subject and then see if
what follows matches the rest of the pattern. If the pattern is specified as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>^.*abcd$</code></pre>
</div>
</div>
<div class="paragraph">
<p>the initial .* matches the entire string at first, but when this fails (because
there is no following "a"), it backtracks to match all but the last character,
then all but the last two characters, and so on. Once again the search for "a"
covers the entire string, from right to left, so we are no better off. However,
if the pattern is written as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>^(?&gt;.*)(?&lt;=abcd)</code></pre>
</div>
</div>
<div class="paragraph">
<p>or, equivalently,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>^.*+(?&lt;=abcd)</code></pre>
</div>
</div>
<div class="paragraph">
<p>there can be no backtracking for the <code>.*</code> item; it can match only the entire
string. The subsequent lookbehind assertion does a single test on the last four
characters. If it fails, the match fails immediately. For long strings, this
approach makes a significant difference to the processing time.</p>
</div>
<div class="paragraph">
<p>Several assertions (of any sort) may occur in succession. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=d{3})(?&lt;!999)foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "foo" preceded by three digits that are not "999". Notice that each of
the assertions is applied independently at the same point in the subject
string. First there is a check that the previous three characters are all
digits, and then there is a check that the same three characters are not "999".
This pattern does fInotfR match "foo" preceded by six characters, the first
of which are digits and the last three of which are not "999". For example, it
doesn&#8217;t match "123abcfoo". A pattern to do that is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=d{3}...)(?&lt;!999)foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>This time the first assertion looks at the preceding six characters, checking
that the first three are digits, and then the second assertion checks that the
preceding three characters are not "999".</p>
</div>
<div class="paragraph">
<p>Assertions can be nested in any combination. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=(?&lt;!foo)bar)baz</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches an occurrence of "baz" that is preceded by "bar" which in turn is not
preceded by "foo", while</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?&lt;=d{3}(?!999)...)foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>is another pattern which matches "foo" preceded by three digits and any three
characters that are not "999".</p>
</div>
<div class="paragraph">
<p>Assertion subpatterns are not capturing subpatterns, and may not be repeated,
because it makes no sense to assert the same thing several times. If any kind
of assertion contains capturing subpatterns within it, these are counted for
the purposes of numbering the capturing subpatterns in the whole pattern.
However, substring capturing is carried out only for positive assertions,
because it does not make sense for negative assertions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conditional_subpatterns">5.14. Conditional Subpatterns</h3>
<div class="paragraph">
<p>It is possible to cause the matching process to obey a subpattern
conditionally or to choose between two alternative subpatterns, depending on
the result of an assertion, or whether a previous capturing subpattern matched
or not. The two possible forms of conditional subpattern are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?(condition)yes-pattern)
(?(condition)yes-pattern|no-pattern)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the condition is satisfied, the yes-pattern is used; otherwise the
no-pattern (if present) is used. If there are more than two
alternatives in the subpattern, a compile-time error occurs.</p>
</div>
<div class="paragraph">
<p>There are three kinds of condition. If the text between the parentheses
consists of a sequence of digits, the condition is satisfied if the capturing
subpattern of that number has previously matched. The number must be greater
than zero. Consider the following pattern, which contains non-significant white
space to make it more readable (assume the <em>extended</em> option) and to divide
it into three parts for ease of discussion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>( ( )?    [^()]+    (?(1) ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first part matches an optional opening parenthesis, and if that
character is present, sets it as the first captured substring. The second part
matches one or more characters that are not parentheses. The third part is a
conditional subpattern that tests whether the first set of parentheses matched
or not. If they did, that is, if subject started with an opening parenthesis,
the condition is true, and so the yes-pattern is executed and a closing
parenthesis is required. Otherwise, since no-pattern is not present, the
subpattern matches nothing. In other words, this pattern matches a sequence of
non-parentheses, optionally enclosed in parentheses.</p>
</div>
<div class="paragraph">
<p>If the condition is the string <code>&#174;</code>, it is satisfied if a recursive call to the
pattern or subpattern has been made. At "top level", the condition is false.
This is a PCRE extension. See PCRE documentation for recursive patterns.</p>
</div>
<div class="paragraph">
<p>If the condition is not a sequence of digits or <code>&#174;</code>, it must be an assertion.
This may be a positive or negative lookahead or lookbehind assertion. Consider
this pattern, again containing non-significant white space, and with the two
alternatives on the second line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(?(?=`(^a-z)*`(a-z))
d{2}-`(a-z){3}-d{2}  |  d{2}-d{2}-d{2} )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The condition is a positive lookahead assertion that matches an optional
sequence of non-letters followed by a letter. In other words, it tests for the
presence of at least one letter in the subject. If a letter is found, the
subject is matched against the first alternative; otherwise it is matched
against the second. This pattern matches strings in one of the two forms
dd-aaa-dd or dd-dd-dd, where aaa are letters and dd are digits.</p>
</div>
</div>
<div class="sect2">
<h3 id="_comments_2">5.15. Comments</h3>
<div class="paragraph">
<p>The sequence <code>(?#</code> marks the start of a comment which continues up to the next
closing parenthesis. Nested parentheses are not permitted. The characters
that make up a comment play no part in the pattern matching at all.</p>
</div>
<div class="paragraph">
<p>If the <em>extended</em> option is set, an unescaped <code>&#35;</code> character outside a
character class introduces a comment that continues up to the next newline
character in the pattern.</p>
</div>
</div>
<div class="sect2">
<h3 id="_subpatterns_as_subroutines">5.16. Subpatterns As Subroutines</h3>
<div class="paragraph">
<p>If the syntax for a recursive subpattern reference (either by number or by
name) is used outside the parentheses to which it refers, it operates like a
subroutine in a programming language. An earlier example pointed out that the
pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(sens|respons)e and 1ibility</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches "sense and sensibility" and "response and responsibility", but not
"sense and responsibility". If instead the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(sens|respons)e and (?1)ibility</code></pre>
</div>
</div>
<div class="paragraph">
<p>is used, it does match "sense and responsibility" as well as the other two
strings. Such references must, however, follow the subpattern to which they
refer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_regexp_procedures">5.17. Regexp Procedures</h3>
<div class="paragraph">
<p>This section lists the <strong><em>STklos</em></strong> functions that can use PCRE regexpr described
before</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(string&#8594;regexp string)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>String&#8594;regexp</code> takes a string representation of a regular
expression and compiles it into a regexp value. Other regular
expression procedures accept either a string or a regexp value as
the matching pattern. If a regular expression string is used
multiple times, it is faster to compile the string once to a regexp
value and use it for repeated matches instead of using the string
each time.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(regexp? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Regexp</code> returns <code>#t</code> if <code>obj</code> is a regexp value created by the <code>regexp</code>,
otherwise <code>regexp</code> returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(regexp-match pattern str)</code></strong><br>
<strong><code>(regexp-match-positions pattern str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These functions attempt to match <code>pattern</code> (a string or a regexp value)
to <code>str</code>. If the match fails, <code>#f</code> is returned. If the match succeeds,
a list (containing strings for <code>regexp-match</code> and positions for
<code>regexp-match-positions</code>) is returned. The first string (or positions) in
this list is the portion of string that matched pattern. If two portions
of string can match pattern, then the earliest and longest match is found,
by default.</p>
</div>
<div class="paragraph">
<p>Additional strings or positions are returned in the list if pattern contains
parenthesized sub-expressions; matches for the sub-expressions are provided
in the order of the opening parentheses in pattern.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">regexp-match-positions</span> <span class="s">"ca"</span> <span class="s">"abracadabra"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">4</span> <span class="mi">6</span><span class="p">))</span>
<span class="p">(</span><span class="nf">regexp-match-positions</span> <span class="s">"CA"</span> <span class="s">"abracadabra"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">regexp-match-positions</span> <span class="s">"(?i)CA"</span> <span class="s">"abracadabra"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">4</span> <span class="mi">6</span><span class="p">))</span>
<span class="p">(</span><span class="nf">regexp-match</span> <span class="s">"(a*)(b*)(c*)"</span> <span class="s">"abc"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="p">(</span><span class="s">"abc"</span> <span class="s">"a"</span> <span class="s">"b"</span> <span class="s">"c"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">regexp-match-positions</span> <span class="s">"(a*)(b*)(c*)"</span> <span class="s">"abc"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">0</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">(</span><span class="nf">regexp-match-positions</span> <span class="s">"(a*)(b*)(c*)"</span> <span class="s">"c"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">0</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nf">regexp-match-positions</span> <span class="s">"(?&lt;=\d{3})(?&lt;!999)foo"</span>
                        <span class="s">"999foo and 123foo"</span><span class="p">)</span>
                 <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">14</span> <span class="mi">17</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(regexp-replace pattern string substitution)</code></strong><br>
<strong><code>(regexp-replace-all pattern string substitution)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Regexp-replace</code> matches the regular expression <code>pattern</code> against
<code>string</code>. If there is a match, the portion of <code>string</code> which matches
<code>pattern</code> is replaced by the <code>substitution</code> string. If there is no
match, <code>regexp-replace</code> returns <code>string</code> unmodified. Note that the
given <code>pattern</code> could be here either a string or a regular expression.</p>
</div>
<div class="paragraph">
<p>If <code>pattern</code> contains <code>n</code> where <strong>n</strong> is a digit between 1 and 9,
then it is replaced in the substitution with the portion of string that
matched the <strong>n</strong>-th parenthesized subexpression of <code>pattern</code>. If
<strong>n</strong> is equal to 0, then it is replaced in <code>substitution</code>
with the portion of <code>string</code> that matched <code>pattern</code>.</p>
</div>
<div class="paragraph">
<p><code>Regexp-replace</code> replaces the first occurrence of <code>pattern</code> in <code>string</code>.
To replace <em>all</em> the occurrences of <code>pattern</code>, use <code>regexp-replace-all</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">regexp-replace</span> <span class="s">"a*b"</span> <span class="s">"aaabbcccc"</span> <span class="s">"X"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"Xbcccc"</span>
<span class="p">(</span><span class="nf">regexp-replace</span> <span class="p">(</span><span class="nf">string-&gt;regexp</span> <span class="s">"a*b"</span><span class="p">)</span> <span class="s">"aaabbcccc"</span> <span class="s">"X"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"Xbcccc"</span>
<span class="p">(</span><span class="nf">regexp-replace</span> <span class="s">"(a*)b"</span> <span class="s">"aaabbcccc"</span> <span class="s">"X\1Y"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"XaaaYbcccc"</span>
<span class="p">(</span><span class="nf">regexp-replace</span> <span class="s">"f(.*)r"</span> <span class="s">"foobar"</span> <span class="s">"\1 \1"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"ooba ooba"</span>
<span class="p">(</span><span class="nf">regexp-replace</span> <span class="s">"f(.*)r"</span> <span class="s">"foobar"</span> <span class="s">"\0 \0"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"foobar foobar"</span>

<span class="p">(</span><span class="nf">regexp-replace</span> <span class="s">"a*b"</span> <span class="s">"aaabbcccc"</span> <span class="s">"X"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"Xbcccc"</span>
<span class="p">(</span><span class="nf">regexp-replace-all</span> <span class="s">"a*b"</span> <span class="s">"aaabbcccc"</span> <span class="s">"X"</span><span class="p">)</span>
                   <span class="nv">=&gt;</span> <span class="s">"XXcccc"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(regexp-quote str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Takes an arbitrary string and returns a string where characters of
<code>str</code> that could serve as regexp metacharacters are escaped with a
backslash, so that they safely match only themselves.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">regexp-quote</span> <span class="s">"cons"</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="s">"cons"</span>
<span class="p">(</span><span class="nf">regexp-quote</span> <span class="s">"list?"</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="s">"list\?"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>regexp-quote</code> is useful when building a composite regexp from
a mix of regexp strings and verbatim strings.</p>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_standard_procedures.html">Standard Procedures</a> | ↑ Up: <a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.00)</a> | Next: <a href="_pattern_matching.html">Pattern Matching</a> →</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Documentation about hygienic macros has been stolen in the SLIB manual
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. In fact <code>define-module</code> on a given name defines a new module only the first time it is invoked on this name. By this way, interactively reloading a module does not define a new entity, and the other modules which use it are not altered.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. This transcript uses the default toplevel loop             which displays the name of the current module in the evaluator             prompt.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Under Unix, you can simply connect to a listening socket with the <code>telnet</code> of <code>netcat</code> command. For the given example, this can be achieved with <code>netcat localhost 12345</code>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Port 13, if open, can be used for testing: making a connection to it permits to know the distant system&#8217;s idea of the time of day.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-09-12 16:56:23 +0200
</div>
</div>
</body>
</html>