<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Erick Gallesio">
<title>STklos Reference Manual : (version 2.10)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cm {
  color: #75715e;
  font-style: italic;
}
pre.rouge .c1 {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cp {
  color: #75715e;
  font-weight: bold;
}
pre.rouge .cs {
  color: #75715e;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .err {
  color: #960050;
  background-color: #1e0010;
}
pre.rouge .gi {
  color: #ffffff;
  background-color: #324932;
}
pre.rouge .gd {
  color: #ffffff;
  background-color: #493131;
}
pre.rouge .ge {
  font-style: italic;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .k, pre.rouge .kv {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kc {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kd {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kp {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kr {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kt {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kn {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .ow {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .o {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .mf {
  color: #ae81ff;
}
pre.rouge .mh {
  color: #ae81ff;
}
pre.rouge .il {
  color: #ae81ff;
}
pre.rouge .mi {
  color: #ae81ff;
}
pre.rouge .mo {
  color: #ae81ff;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #ae81ff;
}
pre.rouge .se {
  color: #ae81ff;
}
pre.rouge .sa {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .sb {
  color: #e6db74;
}
pre.rouge .sc {
  color: #e6db74;
}
pre.rouge .sd {
  color: #e6db74;
}
pre.rouge .s2 {
  color: #e6db74;
}
pre.rouge .sh {
  color: #e6db74;
}
pre.rouge .si {
  color: #e6db74;
}
pre.rouge .sx {
  color: #e6db74;
}
pre.rouge .sr {
  color: #e6db74;
}
pre.rouge .s1 {
  color: #e6db74;
}
pre.rouge .ss {
  color: #e6db74;
}
pre.rouge .s, pre.rouge .dl {
  color: #e6db74;
}
pre.rouge .na {
  color: #a6e22e;
}
pre.rouge .nc {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nd {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .ne {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .no {
  color: #66d9ef;
}
pre.rouge .bp {
  color: #f8f8f2;
}
pre.rouge .nb {
  color: #f8f8f2;
}
pre.rouge .ni {
  color: #f8f8f2;
}
pre.rouge .nn {
  color: #f8f8f2;
}
pre.rouge .vc {
  color: #f8f8f2;
}
pre.rouge .vg {
  color: #f8f8f2;
}
pre.rouge .vi {
  color: #f8f8f2;
}
pre.rouge .nv, pre.rouge .vm {
  color: #f8f8f2;
}
pre.rouge .w {
  color: #f8f8f2;
}
pre.rouge .nl {
  color: #f8f8f2;
  font-weight: bold;
}
pre.rouge .nt {
  color: #f92672;
}
pre.rouge {
  color: #f8f8f2;
  background-color: #49483e;
}
</style>
<style>
  /* Customize default CSS */
  .sidebarblock { margin-top: -1em; }
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_srfis" class="book toc2 toc-left">
<div id="header">
<h1>STklos Reference Manual : (version 2.10)</h1>
<div class="details">
<span id="author" class="author">Erick Gallesio</span><br>
<span id="email" class="email"><a href="mailto:eg@stklos.net">eg@stklos.net</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.10)</a></span></p><ul class="sectlevel1">
<li><a href="_preface.html">Preface</a>
</li>
<li><a href="_introduction.html">1. Introduction</a>
</li>
<li><a href="_expressions.html">2. Expressions</a>
</li>
<li><a href="_program_structure.html">3. Program structure</a>
</li>
<li><a href="_standard_procedures.html">4. Standard Procedures</a>
</li>
<li><a href="_regular_expressions.html">5. Regular Expressions</a>
</li>
<li><a href="_pattern_matching.html">6. Pattern Matching</a>
</li>
<li><a href="_exceptions_and_conditions.html">7. Exceptions and Conditions</a>
</li>
<li><a href="_stklos_object_system.html">8. STklos Object System</a>
</li>
<li><a href="_threads_mutexes_and_condition_variables.html">9. Threads, Mutexes and Condition Variables</a>
</li>
<li><a href="_stklos_customization.html">10. STklos Customization</a>
</li>
<li><a href="_foreign_function_interface.html">11. Foreign Function Interface</a>
</li>
<li><a href="_using_the_slib_package.html">12. Using the SLIB package</a>
</li>
<li><a href="_srfis.html"><span class="toc-current">13. SRFIs</span></a>
<ul class="sectlevel2">
<li><a href="_srfis.html#_supported_srfis">13.1. Supported SRFIs</a>
</li>
<li><a href="_srfis.html#_using_a_srfi">13.2. Using a SRFI</a>
</li>
<li><a href="_srfis.html#_misc_information">13.3. Misc. Information</a>
</li>
</ul>
</li>
<li><a href="_bibliography.html">Bibliography</a>
</li>
<li><a href="_idiosync.html">Appendix C: STklos Idiosyncrasies</a>
</li>
<li><a href="FDL.html">Appendix D: GNU Free Documentation License</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_srfis">13. SRFIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
Scheme Request For Implementation (<a href="http://srfi.schemers.org">SRFI</a>)
process grew out of the Scheme Workshop held
in Baltimore, MD, on September 26, 1998, where the attendees considered a
number of proposals for standardized feature sets for inclusion in Scheme
implementations. Many of the proposals received overwhelming support in a
series of straw votes. Along with this there was concern that the next Revised
Report would not be produced for several years and this would prevent the
timely implementation of standardized approaches to several important problems
and needs in the Scheme community.</p>
</div>
<div class="paragraph">
<p>Only the implemented SRFIs are (briefly) presented here. For further
information on each SRFI, please look at the official
SRFI <a href="http://srfi.schemers.org">site</a>.</p>
</div>
<div class="sect2">
<h3 id="_supported_srfis">13.1. Supported SRFIs</h3>
<div class="paragraph">
<p><strong><em>STklos</em></strong> supports <strong>125</strong> finalized SRFIS.
Some of these SRFIS are <em>embedded</em> and some are <em>external</em>.</p>
</div>
<div class="paragraph">
<p>An <em>embedded</em> SRFI can be directly used without any particular action,
whereas an <em>external</em> needs to be loaded before use.</p>
</div>
<div class="paragraph">
<p>The following SRFIS are implemented:</p>
</div>
<div class="paragraph small">
<p>-  <strong><a href="http://srfi.schemers.org/srfi-0/srfi-0.html">SRFI-0</a></strong>&#8201;&#8212;&#8201;<em>Feature-based conditional expansion construct</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-1/srfi-1.html">SRFI-1</a></strong>&#8201;&#8212;&#8201;<em>List Library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-2/srfi-2.html">SRFI-2</a></strong>&#8201;&#8212;&#8201;<em>AND-LET*: an AND with local bindings, a guarded LET* special form</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-4/srfi-4.html">SRFI-4</a></strong>&#8201;&#8212;&#8201;<em>Homogeneous numeric vector datatypes</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-5/srfi-5.html">SRFI-5</a></strong>&#8201;&#8212;&#8201;<em>A compatible let form with signatures and rest arguments</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-6/srfi-6.html">SRFI-6</a></strong>&#8201;&#8212;&#8201;<em>Basic String Ports</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-7/srfi-7.html">SRFI-7</a></strong>&#8201;&#8212;&#8201;<em>Feature-based program configuration language</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-8/srfi-8.html">SRFI-8</a></strong>&#8201;&#8212;&#8201;<em>Receive: Binding to multiple values</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-9/srfi-9.html">SRFI-9</a></strong>&#8201;&#8212;&#8201;<em>Defining Record Types</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-10/srfi-10.html">SRFI-10</a></strong>&#8201;&#8212;&#8201;<em>Sharp Comma External Form</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-11/srfi-11.html">SRFI-11</a></strong>&#8201;&#8212;&#8201;<em>Syntax for receiving multiple values</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-13/srfi-13.html">SRFI-13</a></strong>&#8201;&#8212;&#8201;<em>String Library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-14/srfi-14.html">SRFI-14</a></strong>&#8201;&#8212;&#8201;<em>Character-Set Library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-15/srfi-15.html">SRFI-15</a></strong>&#8201;&#8212;&#8201;<em>Syntax for dynamic scoping (withdrawn)</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-16/srfi-16.html">SRFI-16</a></strong>&#8201;&#8212;&#8201;<em>Syntax for procedures of variable arity</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-17/srfi-17.html">SRFI-17</a></strong>&#8201;&#8212;&#8201;<em>Generalized set!</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-18/srfi-18.html">SRFI-18</a></strong>&#8201;&#8212;&#8201;<em>Multithreading support</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-19/srfi-19.html">SRFI-19</a></strong>&#8201;&#8212;&#8201;<em>Time Data Types and Procedures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-22/srfi-22.html">SRFI-22</a></strong>&#8201;&#8212;&#8201;<em>Running Scheme Scripts on Unix</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-23/srfi-23.html">SRFI-23</a></strong>&#8201;&#8212;&#8201;<em>Error reporting mechanism</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-25/srfi-25.html">SRFI-25</a></strong>&#8201;&#8212;&#8201;<em>Multi-dimensional Arrays</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-26/srfi-26.html">SRFI-26</a></strong>&#8201;&#8212;&#8201;<em>Notation for Specializing Parameters without Currying</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-27/srfi-27.html">SRFI-27</a></strong>&#8201;&#8212;&#8201;<em>Source of random bits</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-28/srfi-28.html">SRFI-28</a></strong>&#8201;&#8212;&#8201;<em>Basic Format Strings</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-29/srfi-29.html">SRFI-29</a></strong>&#8201;&#8212;&#8201;<em>Localization</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-30/srfi-30.html">SRFI-30</a></strong>&#8201;&#8212;&#8201;<em>Nested Multi-line Comments</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-31/srfi-31.html">SRFI-31</a></strong>&#8201;&#8212;&#8201;<em>A special form for recursive evaluation</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-34/srfi-34.html">SRFI-34</a></strong>&#8201;&#8212;&#8201;<em>Exception Handling for Programs</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-35/srfi-35.html">SRFI-35</a></strong>&#8201;&#8212;&#8201;<em>Conditions</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-36/srfi-36.html">SRFI-36</a></strong>&#8201;&#8212;&#8201;<em>I/O Conditions</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-37/srfi-37.html">SRFI-37</a></strong>&#8201;&#8212;&#8201;<em>args-fold: a program argument processor</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-38/srfi-38.html">SRFI-38</a></strong>&#8201;&#8212;&#8201;<em>External representation of shared structures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-39/srfi-39.html">SRFI-39</a></strong>&#8201;&#8212;&#8201;<em>Parameters objects</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a></strong>&#8201;&#8212;&#8201;<em>Streams</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-43/srfi-43.html">SRFI-43</a></strong>&#8201;&#8212;&#8201;<em>Vector library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-45/srfi-45.html">SRFI-45</a></strong>&#8201;&#8212;&#8201;<em>Primitives for Expressing Iterative Lazy Algorithms</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-46/srfi-46.html">SRFI-46</a></strong>&#8201;&#8212;&#8201;<em>Basic Syntax-rules Extensions</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-48/srfi-48.html">SRFI-48</a></strong>&#8201;&#8212;&#8201;<em>Intermediate Format Strings</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-51/srfi-51.html">SRFI-51</a></strong>&#8201;&#8212;&#8201;<em>Handling rest list</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-54/srfi-54.html">SRFI-54</a></strong>&#8201;&#8212;&#8201;<em>Formatting</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-55/srfi-55.html">SRFI-55</a></strong>&#8201;&#8212;&#8201;<em>Require-extension</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-59/srfi-59.html">SRFI-59</a></strong>&#8201;&#8212;&#8201;<em>Vicinity</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-60/srfi-60.html">SRFI-60</a></strong>&#8201;&#8212;&#8201;<em>Integers as bits</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-61/srfi-61.html">SRFI-61</a></strong>&#8201;&#8212;&#8201;<em>A more general COND clause</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-62/srfi-62.html">SRFI-62</a></strong>&#8201;&#8212;&#8201;<em>S-expression comments</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-64/srfi-64.html">SRFI-64</a></strong>&#8201;&#8212;&#8201;<em>A Scheme API for test suites</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-66/srfi-66.html">SRFI-66</a></strong>&#8201;&#8212;&#8201;<em>Octet Vectors</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-69/srfi-69.html">SRFI-69</a></strong>&#8201;&#8212;&#8201;<em>Basic Hash Tables</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-70/srfi-70.html">SRFI-70</a></strong>&#8201;&#8212;&#8201;<em>Numbers</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-74/srfi-74.html">SRFI-74</a></strong>&#8201;&#8212;&#8201;<em>Octet-Addressed Binary Blocks</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-87/srfi-87.html">SRFI-87</a></strong>&#8201;&#8212;&#8201;<em>&#8658; in case clauses</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-88/srfi-88.html">SRFI-88</a></strong>&#8201;&#8212;&#8201;<em>Keyword Objects</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-89/srfi-89.html">SRFI-89</a></strong>&#8201;&#8212;&#8201;<em>Optional Positional and Named Parameters</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-94/srfi-94.html">SRFI-94</a></strong>&#8201;&#8212;&#8201;<em>Type-Restricted Numerical Functions</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-95/srfi-95.html">SRFI-95</a></strong>&#8201;&#8212;&#8201;<em>Sorting and Merging</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-96/srfi-96.html">SRFI-96</a></strong>&#8201;&#8212;&#8201;<em>SLIB Prerequisites</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-98/srfi-98.html">SRFI-98</a></strong>&#8201;&#8212;&#8201;<em>Interface to access environment variables</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-100/srfi-100.html">SRFI-100</a></strong>&#8201;&#8212;&#8201;<em>define-lambda-object</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-111/srfi-111.html">SRFI-111</a></strong>&#8201;&#8212;&#8201;<em>Boxes</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-112/srfi-112.html">SRFI-112</a></strong>&#8201;&#8212;&#8201;<em>Environment Inquiry</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-113/srfi-113.html">SRFI-113</a></strong>&#8201;&#8212;&#8201;<em>Sets and Bags</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-115/srfi-115.html">SRFI-115</a></strong>&#8201;&#8212;&#8201;<em>Scheme Regular Expressions</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-116/srfi-116.html">SRFI-116</a></strong>&#8201;&#8212;&#8201;<em>Immutable List Library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-117/srfi-117.html">SRFI-117</a></strong>&#8201;&#8212;&#8201;<em>Queues based on lists</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-118/srfi-118.html">SRFI-118</a></strong>&#8201;&#8212;&#8201;<em>Simple adjustable-size strings</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-125/srfi-125.html">SRFI-125</a></strong>&#8201;&#8212;&#8201;<em>Intermediate hash tables</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-127/srfi-127.html">SRFI-127</a></strong>&#8201;&#8212;&#8201;<em>Lazy Sequences</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-128/srfi-128.html">SRFI-128</a></strong>&#8201;&#8212;&#8201;<em>Comparators (reduced)</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-129/srfi-129.html">SRFI-129</a></strong>&#8201;&#8212;&#8201;<em>Titlecase procedures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-130/srfi-130.html">SRFI-130</a></strong>&#8201;&#8212;&#8201;<em>Cursor-based string library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-132/srfi-132.html">SRFI-132</a></strong>&#8201;&#8212;&#8201;<em>Sort Libraries</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-133/srfi-133.html">SRFI-133</a></strong>&#8201;&#8212;&#8201;<em>Vector Library (R7RS-compatible)</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-134/srfi-134.html">SRFI-134</a></strong>&#8201;&#8212;&#8201;<em>Immutable Deques</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-135/srfi-135.html">SRFI-135</a></strong>&#8201;&#8212;&#8201;<em>Immutable Texts</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-137/srfi-137.html">SRFI-137</a></strong>&#8201;&#8212;&#8201;<em>Minimal Unique Types</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-138/srfi-138.html">SRFI-138</a></strong>&#8201;&#8212;&#8201;<em>Compiling Scheme programs to executables</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-141/srfi-141.html">SRFI-141</a></strong>&#8201;&#8212;&#8201;<em>Integer Division</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-143/srfi-143.html">SRFI-143</a></strong>&#8201;&#8212;&#8201;<em>Fixnums</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-144/srfi-144.html">SRFI-144</a></strong>&#8201;&#8212;&#8201;<em>Flonums</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-145/srfi-145.html">SRFI-145</a></strong>&#8201;&#8212;&#8201;<em>Assumptions</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-151/srfi-151.html">SRFI-151</a></strong>&#8201;&#8212;&#8201;<em>Bitwise Operations</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-152/srfi-152.html">SRFI-152</a></strong>&#8201;&#8212;&#8201;<em>String Library (reduced)</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-154/srfi-154.html">SRFI-154</a></strong>&#8201;&#8212;&#8201;<em>First-class dynamic extents</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-156/srfi-156.html">SRFI-156</a></strong>&#8201;&#8212;&#8201;<em>Syntactic combiners for binary predicates</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-158/srfi-158.html">SRFI-158</a></strong>&#8201;&#8212;&#8201;<em>Generators and Accumulators</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-160/srfi-160.html">SRFI-160</a></strong>&#8201;&#8212;&#8201;<em>Homogeneous numeric vector libraries</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-161/srfi-161.html">SRFI-161</a></strong>&#8201;&#8212;&#8201;<em>Unifiable Boxes</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-162/srfi-162.html">SRFI-162</a></strong>&#8201;&#8212;&#8201;<em>Comparators sublibrary</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-169/srfi-169.html">SRFI-169</a></strong>&#8201;&#8212;&#8201;<em>Underscores in numbers</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-170/srfi-170.html">SRFI-170</a></strong>&#8201;&#8212;&#8201;<em>POSIX API</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-171/srfi-171.html">SRFI-171</a></strong>&#8201;&#8212;&#8201;<em>Transducers</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-173/srfi-173.html">SRFI-173</a></strong>&#8201;&#8212;&#8201;<em>Hooks</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-174/srfi-174.html">SRFI-174</a></strong>&#8201;&#8212;&#8201;<em>POSIX Timespecs</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-175/srfi-175.html">SRFI-175</a></strong>&#8201;&#8212;&#8201;<em>ASCII character library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-176/srfi-176.html">SRFI-176</a></strong>&#8201;&#8212;&#8201;<em>Version flag</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-178/srfi-178.html">SRFI-178</a></strong>&#8201;&#8212;&#8201;<em>Bitvector library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-180/srfi-180.html">SRFI-180</a></strong>&#8201;&#8212;&#8201;<em>JSON</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-185/srfi-185.html">SRFI-185</a></strong>&#8201;&#8212;&#8201;<em>Linear adjustable-length strings</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-189/srfi-189.html">SRFI-189</a></strong>&#8201;&#8212;&#8201;<em>Maybe and Either: optional container types</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-190/srfi-190.html">SRFI-190</a></strong>&#8201;&#8212;&#8201;<em>Coroutines Generators</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-192/srfi-192.html">SRFI-192</a></strong>&#8201;&#8212;&#8201;<em>Port Positioning</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-193/srfi-193.html">SRFI-193</a></strong>&#8201;&#8212;&#8201;<em>Command line</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-195/srfi-195.html">SRFI-195</a></strong>&#8201;&#8212;&#8201;<em>Multiple-value boxes</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-196/srfi-196.html">SRFI-196</a></strong>&#8201;&#8212;&#8201;<em>Range Objects</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-207/srfi-207.html">SRFI-207</a></strong>&#8201;&#8212;&#8201;<em>String-notated bytevectors</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-208/srfi-208.html">SRFI-208</a></strong>&#8201;&#8212;&#8201;<em>NaN procedures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-214/srfi-214.html">SRFI-214</a></strong>&#8201;&#8212;&#8201;<em>Flexvectors</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-215/srfi-215.html">SRFI-215</a></strong>&#8201;&#8212;&#8201;<em>Central Log Exchange</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-216/srfi-216.html">SRFI-216</a></strong>&#8201;&#8212;&#8201;<em>SICP Prerequisites (Portable)</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-217/srfi-217.html">SRFI-217</a></strong>&#8201;&#8212;&#8201;<em>Integer Sets</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-219/srfi-219.html">SRFI-219</a></strong>&#8201;&#8212;&#8201;<em>Define higher-order lambda</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-221/srfi-221.html">SRFI-221</a></strong>&#8201;&#8212;&#8201;<em>Generator/accumulator sub-library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-222/srfi-222.html">SRFI-222</a></strong>&#8201;&#8212;&#8201;<em>Compound objects</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-223/srfi-223.html">SRFI-223</a></strong>&#8201;&#8212;&#8201;<em>Generalized binary search procedures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-224/srfi-224.html">SRFI-224</a></strong>&#8201;&#8212;&#8201;<em>Integer Mappings</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-227/srfi-227.html">SRFI-227</a></strong>&#8201;&#8212;&#8201;<em>Optional Arguments</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-228/srfi-228.html">SRFI-228</a></strong>&#8201;&#8212;&#8201;<em>A further comparator library</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-229/srfi-229.html">SRFI-229</a></strong>&#8201;&#8212;&#8201;<em>Tagged Procedures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-230/srfi-230.html">SRFI-230</a></strong>&#8201;&#8212;&#8201;<em>Atomic Operations</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-232/srfi-232.html">SRFI-232</a></strong>&#8201;&#8212;&#8201;<em>Flexible Curried Procedures</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-233/srfi-233.html">SRFI-233</a></strong>&#8201;&#8212;&#8201;<em>INI files</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-235/srfi-235.html">SRFI-235</a></strong>&#8201;&#8212;&#8201;<em>Combinators</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-236/srfi-236.html">SRFI-236</a></strong>&#8201;&#8212;&#8201;<em>Evaluating expressions in an unspecified order</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-238/srfi-238.html">SRFI-238</a></strong>&#8201;&#8212;&#8201;<em>Codesets</em><br>
-  <strong><a href="http://srfi.schemers.org/srfi-244/srfi-244.html">SRFI-244</a></strong>&#8201;&#8212;&#8201;<em>Multiple-value definitions</em><br></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_srfi">13.2. Using a SRFI</h3>
<div class="paragraph">
<p>Using a particular SRFI can be done with the special form
<code>cond-expand</code> defined in <strong><a href="http://srfi.schemers.org/srfi-0/srfi-0.html">SRFI-0</a></strong> which is fully supported
by <strong><em>STklos</em></strong>. This form accepts features identifiers which are of the
form <strong><em>srfi-n</em></strong> where <strong><em>n</em></strong> represents the number of the SRFI
supported by the implementation (for instance <strong><em>srfi-1</em></strong> or
<strong><em>srfi-30</em></strong>).</p>
</div>
<div class="paragraph">
<p>For instance, to use <strong><em>srfi-n</em></strong>, you can use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">cond-expand</span>
 <span class="p">(</span><span class="nf">srfi-n</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This forms does nothing if <strong><em>srfi-n</em></strong> is an embedded SRFI and ensures that all
the files needed by this SRFI will be properly loaded if it is an external
SRFI.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> also offers the primitive <strong>require-feature</strong> which ensures
(eventually) the loading of files needed to use a given SRFI. This primitive
accepts several forms to ensure that the SRFI can be used.  For instance, to
use <strong><a href="http://srfi.schemers.org/srfi-1/srfi-1.html">SRFI-1</a></strong> (<em>List Library</em>), the following forms are possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">require-feature</span> <span class="ss">'srfi-1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require-feature</span> <span class="s">"srfi-1"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require-feature</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">require-feature</span> <span class="ss">'lists</span><span class="p">)</span>   <span class="c1">;; Since this feature name is an alias for SRFI-1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The list of the aliases defined for the supported SRFIs is given in
<a href="_srfis.html#feature_identifiers">Table 2</a>.</p>
</div>
<div class="sect3">
<h4 id="_embedded_srfis">13.2.1. Embedded SRFIs</h4>
<div class="paragraph">
<p>As said before, an <em>embedded</em> SRFI can be used directly without loading a
support file. (Note that using <strong>require-feature</strong> works too
and permits to ignore if the SRFI is embedded).</p>
</div>
<div class="paragraph">
<p><strong>List of embedded SRFIs:</strong>
 <code>srfi-0</code> <code>srfi-6</code> <code>srfi-8</code> <code>srfi-10</code> <code>srfi-11</code> <code>srfi-15</code> <code>srfi-16</code> <code>srfi-18</code> <code>srfi-22</code> <code>srfi-23</code> <code>srfi-28</code> <code>srfi-30</code> <code>srfi-31</code> <code>srfi-34</code> <code>srfi-38</code> <code>srfi-39</code> <code>srfi-45</code> <code>srfi-46</code> <code>srfi-55</code> <code>srfi-62</code> <code>srfi-70</code> <code>srfi-87</code> <code>srfi-88</code> <code>srfi-98</code> <code>srfi-111</code> <code>srfi-112</code> <code>srfi-118</code> <code>srfi-138</code> <code>srfi-143</code> <code>srfi-145</code> <code>srfi-169</code> <code>srfi-176</code> <code>srfi-192</code> <code>srfi-193</code> <code>srfi-195</code> <code>srfi-208</code> <code>srfi-219</code> <code>srfi-244</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_external_srfis">13.2.2. External SRFIs</h4>
<div class="paragraph">
<p>An external SRFI needs to load at least one external file. This can be done
with <strong>require</strong> or <strong>require-feature</strong>. As with embedded SRFIS, using
<strong>require-feature</strong> permits to ignore if the SRFI is external.</p>
</div>
<div class="paragraph">
<p><strong>List of external SRFIs:</strong>
<code>srfi-1</code> <code>srfi-2</code> <code>srfi-4</code> <code>srfi-5</code> <code>srfi-7</code> <code>srfi-9</code> <code>srfi-13</code> <code>srfi-14</code> <code>srfi-17</code> <code>srfi-19</code> <code>srfi-25</code> <code>srfi-26</code> <code>srfi-27</code> <code>srfi-29</code> <code>srfi-35</code> <code>srfi-36</code> <code>srfi-37</code> <code>srfi-41</code> <code>srfi-43</code> <code>srfi-48</code> <code>srfi-51</code> <code>srfi-54</code> <code>srfi-59</code> <code>srfi-60</code> <code>srfi-61</code> <code>srfi-64</code> <code>srfi-66</code> <code>srfi-69</code> <code>srfi-74</code> <code>srfi-89</code> <code>srfi-94</code> <code>srfi-95</code> <code>srfi-96</code> <code>srfi-100</code> <code>srfi-113</code> <code>srfi-115</code> <code>srfi-116</code> <code>srfi-117</code> <code>srfi-125</code> <code>srfi-127</code> <code>srfi-128</code> <code>srfi-129</code> <code>srfi-130</code> <code>srfi-132</code> <code>srfi-133</code> <code>srfi-134</code> <code>srfi-135</code> <code>srfi-137</code> <code>srfi-141</code> <code>srfi-144</code> <code>srfi-151</code> <code>srfi-152</code> <code>srfi-154</code> <code>srfi-156</code> <code>srfi-158</code> <code>srfi-160</code> <code>srfi-161</code> <code>srfi-162</code> <code>srfi-170</code> <code>srfi-171</code> <code>srfi-173</code> <code>srfi-174</code> <code>srfi-175</code> <code>srfi-178</code> <code>srfi-180</code> <code>srfi-185</code> <code>srfi-189</code> <code>srfi-190</code> <code>srfi-196</code> <code>srfi-207</code> <code>srfi-214</code> <code>srfi-215</code> <code>srfi-216</code> <code>srfi-217</code> <code>srfi-221</code> <code>srfi-222</code> <code>srfi-223</code> <code>srfi-224</code> <code>srfi-227</code> <code>srfi-228</code> <code>srfi-229</code> <code>srfi-230</code> <code>srfi-232</code> <code>srfi-233</code> <code>srfi-235</code> <code>srfi-236</code> <code>srfi-238</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_features">13.2.3. SRFI features</h4>
<div class="paragraph">
<p>For some SRFIs, <strong><em>STklos</em></strong> accepts that uses them with a name. This names
are given <a href="_srfis.html#feature_identifiers">Table 2</a>.</p>
</div>
<table id="feature_identifiers" class="tableblock frame-all grid-all stretch small">
<caption class="title">Table 2. Feature identifiers</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">symbol</th>
<th class="tableblock halign-left valign-top">require SRFI(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">and-let*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hvectors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">program</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">records</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">case-lambda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-23</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">random</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-27</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">args-fold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-37</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-39</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">streams</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-41</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">rest-list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-51</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formatting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-54</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">testing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash-tables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-69</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boxes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sets-bags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-113</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">immutable-lists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-116</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">queues-as-lists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-117</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adjustable-strings</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-118</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash-table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-125</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lazy-sequences</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">comparators-reduced</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-128</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">titlecase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-129</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-132</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-133</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">immutable-deques</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-134</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">immutable-texts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-135</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer-division</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-141</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitwise-ops</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-151</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">posix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-170</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transducers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-171</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hooks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-173</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">posix-timespecs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-174</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ascii</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-175</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-180</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maybe-either</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-189</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ini-files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-233</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">combinators</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-235</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-35 srfi-36</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">generators</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">srfi-158 srfi-190</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_misc_information">13.3. Misc. Information</h3>
<div class="paragraph">
<p>Previous section described the general way to use the SRFIS implemented in
<strong><em>STklos</em></strong>.  This section concentrates on information not given above.</p>
</div>
<div class="sect3">
<h4 id="_srfi_0feature_based_conditional_expansion_construct">srfi-0&#8201;&#8212;&#8201;Feature-based conditional expansion construct</h4>
<div class="paragraph">
<p>
<strong><a href="http://srfi.schemers.org/srfi-0/srfi-0.html">SRFI-0</a></strong> defines the <code>cond-expand</code> special form. It is fully
supported by <strong><em>STklos</em></strong>. <strong><em>STklos</em></strong> defines several features identifiers which
are of the form <em>srfi-n</em> where <em>n</em> represents the number of the SRFI
supported by the implementation (for instance <em>srfi-1</em> or <em>srfi-30</em>).</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> <code>cond-expand</code> accepts also some feature identifiers which are the
same that the ones defined in <a href="_srfis.html#feature_identifiers">Table 2</a>, such as
<em>case_lambda</em> or <em>generators</em>.</p>
</div>
<div class="paragraph">
<p>Furthermore, the feature identifier <strong><em>stklos</em></strong> and <strong><em>STklos</em></strong> are defined for
applications which need to know on which Scheme implementation they are
running on.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_4homogeneous_numeric_vector_datatypes">srfi-4&#8201;&#8212;&#8201;Homogeneous numeric vector datatypes</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-4/srfi-4.html">SRFI-4</a></strong> is fully supported and is extended to provide the
additional <strong>c64vector</strong> and <strong>c128vector</strong> types of <strong><a href="http://srfi.schemers.org/srfi-160/srfi-160.html">SRFI-160</a></strong> (<em>Homogeneous numeric vector libraries</em>).
<a id='P_uvector-tag'></a><a id='P_uvector->list'></a><a id='P_uvector-set!'></a><a id='P_uvector-ref'></a><a id='P_uvector-length'></a><a id='P_uvector?'></a>





</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(uvector? uv) </strong></code><br>
<code><strong>(uvector-length uv) </strong></code><br>
<code><strong>(uvector-ref uv k) </strong></code><br>
<code><strong>(uvector-set! uv k val) </strong></code><br>
<code><strong>(uvector&#8594;list uv) </strong></code><br>
<code><strong>(uvector-tag uv) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These primitives extend <strong><a href="http://srfi.schemers.org/srfi-4/srfi-4.html">SRFI-4</a></strong>. They can be called with any type
of uniform (homogeneous) vector.  The primitive <code>uvector-tag</code> returns the tag
of the uniform vector, as a symbol</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">uvector?</span> <span class="o">#</span><span class="nv">s16</span><span class="p">(</span><span class="nf">-1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>    <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">uvector-length</span> <span class="o">#</span><span class="nv">u32</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="p">(</span><span class="nf">uvector-length</span> <span class="o">#</span><span class="nv">s64</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="p">(</span><span class="nf">uvector-tag</span> <span class="o">#</span><span class="nv">u8</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="nv">u8</span>
<span class="p">(</span><span class="nf">uvector-tag</span> <span class="o">#</span><span class="nv">c32</span><span class="p">())</span>       <span class="nv">=&gt;</span> <span class="nv">c32</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_10sharp_comma_external_form">srfi-10&#8201;&#8212;&#8201;Sharp Comma External Form</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-10/srfi-10.html">SRFI-10</a></strong> is fully supported. This SRFI extends the
STklos reader with the <code>#,</code> notation which is fully described in
this document (see <em><a href="_standard_procedures.html#readerctor">primitive <code>define-reader-ctor</code></a></em>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_16syntax_for_procedures_of_variable_arity">srfi-16&#8201;&#8212;&#8201;Syntax for procedures of variable arity</h4>
<div class="paragraph">
<p>


<strong><a href="http://srfi.schemers.org/srfi-16/srfi-16.html">SRFI-16</a></strong> is fully supported. Note that <code>case-lambda</code> is now defined in R<sup>7</sup>RS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_17generalized_set">srfi-17&#8201;&#8212;&#8201;Generalized set!</h4>
<div class="paragraph">
<p></p>
</div>
<div id="setter" class="paragraph">
<p>


<strong><a href="http://srfi.schemers.org/srfi-17/srfi-17.html">SRFI-17</a></strong> is fully supported. See the documentation of procedures <code>set!</code>
and <code>setter</code>. However, requiring explicitly <code>srfi-17</code> permits
to define the setters for the (numerous) <code>cXXXXr</code> list procedures.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_19time_data_types_and_procedures">srfi-19&#8201;&#8212;&#8201;Time Data Types and Procedures</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-19/srfi-19.html">SRFI-19</a></strong> is fully supported. STklos offers, as an extension,
the procedures <code>date=?</code>, <code>date&lt;?</code>, <code>date&gt;?</code>, <code>date&#8656;?</code> and <code>date&gt;=?</code>. These
will compare dates by first normalizing them to make the time zone offset
irrelevant, so "2000 Nov 12 03:30:10 GMT-2" will be taken as equal to
"2000 Nov 12 02:30:10 GMT-1".</p>
</div>
<div class="paragraph">
<p><a id='P_time-difference'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(time-difference time1 time2) </strong></code><br>
<code><strong>(time-difference! time1 time2) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These SRFI-19 procedures return the time duration (as an object of type <code>time-duration</code>)
between <code>time1</code> and <code>time2</code>. It is an error if <code>time1</code> and <code>time2</code> are of different time types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>time-difference</code> creates a new time object, while <code>time-difference!</code> may use <code>time1</code> to
create the resulting object.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id='P_time>?'></a><a id='P_time>=?'></a><a id='P_time=?'></a><a id='P_time<?'></a><a id='P_time<=?'></a>




</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(time&#8656;? time1 time2) </strong></code><br>
<code><strong>(time&lt;? time1 time2) </strong></code><br>
<code><strong>(time=? time1 time2) </strong></code><br>
<code><strong>(time&gt;=? time1 time2) </strong></code><br>
<code><strong>(time&gt;? time1 time2) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These are SRFI-19 predicates used to compare times. They return:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>time&#8656;?</code> : <code>#t</code> if <code>time1</code> is before or at (less than or equal to) <code>time2</code>,
<code>#f</code> otherwise.</p>
</li>
<li>
<p><code>time&lt;?</code> :  <code>#t</code> if <code>time1</code> is before (less than) <code>time2</code>, <code>#f</code> otherwise.</p>
</li>
<li>
<p><code>time=?</code> :  <code>#t</code> if <code>time1</code> at (equal) <code>time2</code>, <code>#f</code> otherwise.</p>
</li>
<li>
<p><code>time&gt;=?</code> : <code>#t</code> if <code>time1</code> is at or after (greater than or equal to) <code>time2</code>,
<code>#f</code> otherwise.</p>
</li>
<li>
<p><code>time&gt;?</code> :  <code>#t</code> if <code>time1</code> is after (greater than) <code>time2</code>, <code>#f</code> otherwise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An attempt to compare times of different type will raise an error.</p>
</div>
<div class="paragraph">
<p><a id='P_time-resolution'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(time-resolution [time-type]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Clock resolution, in nanoseconds, of the system clock of type type
<code>time-type</code>, which defaults to <code>TIME-UTC</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">time-resolution</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="mi">1000000</span>
<span class="p">(</span><span class="nf">time-resolution</span> <span class="nv">time-process</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">1000000</span>
<span class="p">(</span><span class="nf">time-resolution</span> <span class="nv">time-tai</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="mi">1000000</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_22running_scheme_scripts_on_unix">srfi-22&#8201;&#8212;&#8201;Running Scheme Scripts on Unix</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-22/srfi-22.html">SRFI-22</a></strong> describes basic prerequisites for running Scheme
programs as Unix scripts in a uniform way. Specifically, it describes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the syntax of Unix scripts written in Scheme,</p>
</li>
<li>
<p>a uniform convention for calling the Scheme script interpreter, and</p>
</li>
<li>
<p>a method for accessing the Unix command line arguments from within the
Scheme script.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><a href="http://srfi.schemers.org/srfi-22/srfi-22.html">SRFI-22</a></strong> (<em>Running Scheme Scripts on Unix</em>)  recommends to invoke the Scheme script interpreter from the
script via a /usr/bin/env trampoline, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>#!/usr/bin/env stklos</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of the classical <code>echo</code> command (without option) in Scheme:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">#</span><span class="nv">!/usr/bin/env</span> <span class="nv">stklos</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">main</span> <span class="nv">arguments</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">display</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">display</span> <span class="o">#</span><span class="nv">space</span><span class="p">))</span>
            <span class="p">(</span><span class="nb">cdr</span> <span class="nv">arguments</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">newline</span><span class="p">)</span>
  <span class="mi">0</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_23error_reporting_mechanism">srfi-23&#8201;&#8212;&#8201;Error reporting mechanism</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-23/srfi-23.html">SRFI-23</a></strong> is fully supported.  Note that the <strong><em>STklos</em></strong> <strong>error</strong>
is more general than the one defined in SRFI-23.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_25multi_dimensional_arrays">srfi-25&#8201;&#8212;&#8201;Multi-dimensional Arrays</h4>
<div class="paragraph">
<p>

<strong><em>STklos</em></strong> implements the arrays of <strong><a href="http://srfi.schemers.org/srfi-25/srfi-25.html">SRFI-25</a></strong>. All the
forms defined in the SRFI are implemented in <strong><em>STklos</em></strong>, but some other
functions, not present in the SRFI, are documented here.</p>
</div>
<div class="paragraph">
<p><a id='P_shape?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(shape? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Checks if <code>obj</code> is an array shape. SRFI-25 dictates that a
shape is an ordinary array, with rank two and shape <code>(0 r 0 2)</code>,
where <code>r</code> is the rank of the array that the shape describes.
So, any array of shape <code>(0 r 0 2</code> is a shape, for any non-negative
integer <code>r</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_shared-array?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(shared-array? array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Will return <code>#t</code> when the array has its data shared with other
arrays, and <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p><a id='P_shape-for-each'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(shape-for-each shape proc [index-object]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure will apply proc to all valid sequences of
indices in <code>shape</code>, in row-major order.</p>
</div>
<div class="paragraph">
<p>If <code>index-object</code> is not provided, then <code>proc</code> must accept
as many arguments as the number of dimensions that the shape
describes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">shape-for-each</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">12</span><span class="p">)</span>
                <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
                  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">"[~a ~a]~%"</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span>
        <span class="nv">|-</span> <span class="p">[</span><span class="nf">1</span> <span class="mi">10</span><span class="p">]</span>
           <span class="p">[</span><span class="nf">1</span> <span class="mi">11</span><span class="p">]</span>
           <span class="p">[</span><span class="nf">2</span> <span class="mi">10</span><span class="p">]</span>
           <span class="p">[</span><span class="nf">2</span> <span class="mi">11</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>index-object</code> is provided, it is used as a place to store the
indices, so proc must accept either a vector or an array (this is to
avoid pushing and popping too many values when calling <code>proc</code>).
<code>index-object</code>, when present, must be aither a vector or array.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">vec</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">2</span> <span class="no">#f</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">shape-for-each</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">12</span><span class="p">)</span>
                  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">o</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">"[~a ~a]~%"</span>
                    <span class="p">(</span><span class="nb">vector-ref</span> <span class="nv">o</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">(</span><span class="nb">vector-ref</span> <span class="nv">o</span> <span class="mi">1</span><span class="p">)))</span>
                  <span class="nv">vec</span><span class="p">))</span>
        <span class="nv">|-</span> <span class="p">[</span><span class="nf">1</span> <span class="mi">10</span><span class="p">]</span>
           <span class="p">[</span><span class="nf">1</span> <span class="mi">11</span><span class="p">]</span>
           <span class="p">[</span><span class="nf">2</span> <span class="mi">10</span><span class="p">]</span>
           <span class="p">[</span><span class="nf">2</span> <span class="mi">11</span><span class="p">]</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">arr</span> <span class="p">(</span><span class="nf">make-array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">shape-for-each</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">12</span><span class="p">)</span>
                  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">o</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">"[~a ~a]~%"</span>
                    <span class="p">(</span><span class="nf">array-ref</span> <span class="nv">o</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">array-ref</span> <span class="nv">o</span> <span class="mi">1</span><span class="p">)))</span>
                  <span class="nv">arr</span><span class="p">))</span>
         <span class="nv">|-</span> <span class="p">[</span><span class="nf">1</span> <span class="mi">10</span><span class="p">]</span>
            <span class="p">[</span><span class="nf">1</span> <span class="mi">11</span><span class="p">]</span>
            <span class="p">[</span><span class="nf">2</span> <span class="mi">10</span><span class="p">]</span>
            <span class="p">[</span><span class="nf">2</span> <span class="mi">11</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_share-nths'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(share-nths a d n) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Share-nths</code> takes every <code>n`th slice along dimension `d</code> into a shared array.
This preserves the origin.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">4</span> <span class="mi">0</span> <span class="mi">4</span><span class="p">)</span>
                 <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-3</span> <span class="mi">-4</span>
                 <span class="mi">-5</span> <span class="mi">-6</span> <span class="mi">-7</span> <span class="mi">-8</span>
                 <span class="mi">-9</span> <span class="mi">-10</span> <span class="mi">-11</span> <span class="mi">-12</span>
                 <span class="mi">-13</span> <span class="mi">-14</span> <span class="mi">-15</span> <span class="mi">-16</span><span class="p">))</span>

<span class="p">(</span><span class="nf">share-nths</span> <span class="nv">a</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span>
 <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">-1</span>  <span class="mi">-2</span>  <span class="mi">-3</span>  <span class="mi">-4</span>
                         <span class="mi">-9</span> <span class="mi">-10</span> <span class="mi">-11</span> <span class="mi">-12</span><span class="p">)</span>

<span class="p">(</span><span class="nf">share-nths</span> <span class="nv">a</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
 <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">4</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-1</span>  <span class="mi">-3</span>  <span class="mi">-5</span>  <span class="mi">-7</span>
                         <span class="mi">-9</span> <span class="mi">-11</span> <span class="mi">-13</span> <span class="mi">-15</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_share-column'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(share-column arr k) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Shares whatever the second index is about. The result has one dimension less.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-3</span> <span class="mi">-4</span> <span class="mi">-5</span> <span class="mi">-6</span> <span class="mi">-7</span> <span class="mi">-8</span><span class="p">))</span>

<span class="p">(</span><span class="nf">share-column</span> <span class="nv">a</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-3</span> <span class="mi">-4</span> <span class="mi">-7</span> <span class="mi">-8</span><span class="p">)</span>
<span class="p">(</span><span class="nf">share-column</span> <span class="nv">a</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-5</span> <span class="mi">-6</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_share-row'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(share-row arr k) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Shares whatever the first index is about. The result has one dimension less.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-3</span> <span class="mi">-4</span> <span class="mi">-5</span> <span class="mi">-6</span> <span class="mi">-7</span> <span class="mi">-8</span><span class="p">))</span>

<span class="p">(</span><span class="nf">share-row</span> <span class="nv">a</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-3</span> <span class="mi">-4</span><span class="p">)</span>
<span class="p">(</span><span class="nf">share-row</span> <span class="nv">a</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">-5</span> <span class="mi">-6</span> <span class="mi">-7</span> <span class="mi">-8</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_share-array/origin'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(share-array/origin arr k &#8230;&#8203;) </strong></code><br>
<code><strong>(share-array/origin arr index) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>change the origin of <code>arr</code> to <code>k</code> &#8230;&#8203;, with <code>index</code> a vector or zero-based
one-dimensional array that contains k &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="p">)</span> <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-3</span> <span class="mi">-4</span><span class="p">))</span>

<span class="p">(</span><span class="nf">share-array/origin</span>  <span class="nv">a</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">-1</span> <span class="mi">-2</span> <span class="mi">-3</span> <span class="mi">-4</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_array-copy+share'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-copy+share array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a copy of <code>array</code>.
If array does not have its own internal data, but was built using
share-array, then the new array will be similar&#8201;&#8212;&#8201;it will be a copy of
array, sharing the elements in the same way.</p>
</div>
<div class="paragraph">
<p><a id='P_array-size'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-size array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of elements in <code>array</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_array-shape'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-shape array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the shape of <code>array</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_array->list'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array&#8594;list array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a list that contains a copy of the elements of <code>array</code>,
in row-major order.
This is not recursive, and will not flatten the array.</p>
</div>
<div class="paragraph">
<p><a id='P_array->vector'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array&#8594;vector array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a vector that contains a copy of the elements of <code>array</code>,
in row-major order. The new vector does not share elements with
the original array (it is a fresh copy).
This is not recursive, and will not flatten the array.</p>
</div>
<div class="paragraph">
<p><a id='P_array-length'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-length array dim) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the length of dimension <code>dim</code> in array <code>array</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_array-map'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-map [shape] proc arr<sub>0</sub> arr<sub>1</sub> &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This procedure is similar to <code>map</code> for lists:
it will run <code>proc</code> on an element of each of the
<code>arr<sub>0</sub></code>, <code>arr<sub>1</sub></code>, &#8230;&#8203; arguments, storing the result in
the equivalent position of a newly created array.</p>
</div>
<div class="paragraph">
<p>The shapes of the arrays must be the same.</p>
</div>
<div class="paragraph">
<p>The procedure will create a new array with shape <code>shape</code>
(or <code>arr<sub>0</sub></code>'s shape, if <code>shape</code> was not specified).</p>
</div>
<div class="paragraph">
<p><a id='P_array-map!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-map! array [shape] proc arr<sub>0</sub> arr<sub>1</sub> &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>For each valid index <code>idx</code>, applies proc to the corresponding
position in <code>arr<sub>0</sub></code>, <code>arr<sub>1</sub></code>, &#8230;&#8203;  and then sets the same
place in <code>array</code> to the result.</p>
</div>
<div class="paragraph">
<p>If <code>shape</code> is specified, it should specify a subarray of
<code>array</code>, and only that section will be mapped.</p>
</div>
<div class="paragraph">
<p><a id='P_array-append'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-append dim arr<sub>1</sub> arr<sub>2</sub> &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Appends arrays <code>arr<sub>1</sub></code>, <code>arr<sub>2</sub></code>, &#8230;&#8203; along the specified dimension <code>dim</code>.
The arrays must have equally many dimensions and all other dimensions
equally long.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">11</span> <span class="mi">22</span> <span class="mi">33</span> <span class="mi">44</span> <span class="mi">55</span> <span class="mi">66</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">b</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">0</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">-11</span> <span class="mi">-22</span> <span class="mi">-33</span> <span class="mi">-44</span> <span class="mi">-55</span> <span class="mi">-66</span> <span class="mi">-77</span> <span class="mi">-88</span> <span class="mi">-99</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">3</span><span class="p">)</span> <span class="ss">'a</span> <span class="ss">'b</span> <span class="ss">'c</span><span class="p">))</span>

<span class="p">(</span><span class="nf">array-append</span> <span class="mi">0</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="nv">=&gt;</span>  <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">6</span> <span class="mi">0</span> <span class="mi">3</span><span class="p">)</span>
                                      <span class="mi">11</span>  <span class="mi">22</span>  <span class="mi">33</span>
                                      <span class="mi">44</span>  <span class="mi">55</span>  <span class="mi">66</span>
                                     <span class="mi">-11</span> <span class="mi">-22</span> <span class="mi">-33</span>
                                     <span class="mi">-44</span> <span class="mi">-55</span> <span class="mi">-66</span>
                                     <span class="mi">-77</span> <span class="mi">-88</span> <span class="mi">-99</span>
                                       <span class="nv">a</span>   <span class="nv">b</span>   <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_array-share-count'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-share-count array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the number of arrays that were built sharing <code>array</code>'s
elements through <code>(share-array array shape proc)</code>, and that were not
yet garbage collected.
Note that it may take a long time for an object to be garbage
collected automatically. It is possible to force a garbage
collection pass by calling <code>(gc)</code>, but even that does not guarantee that
a specific object will be collected.</p>
</div>
<div class="paragraph">
<p><a id='P_array-copy'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-copy array) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a copy of <code>array</code>.
The new copy will have no data shared with any other array, even if the
argument <code>array</code> did.</p>
</div>
<div class="paragraph">
<p><a id='P_array-for-each-index'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-for-each-index arr proc [index-object]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Will loop through all valid indices of <code>array</code>, applying <code>proc</code>
to those indices.</p>
</div>
<div class="paragraph">
<p>If <code>index-object</code> is not provided, then <code>proc</code> must accept
as many arguments as the number of dimensions that the shape
describes.</p>
</div>
<div class="paragraph">
<p>If <code>index-object</code> is provided, it is used as a place to store the
indices, so <code>proc</code> must accept a vector or an array (this is to avoid
pushing and popping too many values when calling proc).
<code>index-object</code>, when present, must be aither a vector or array.</p>
</div>
<div class="paragraph">
<p>See the documentation of <code>shape-for-each</code> for more information
on <code>index-object</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_tabulate-array'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(tabulate-array shape proc) </strong></code><br>
<code><strong>(tabulate-array shape proc idx) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new array of shape <code>shape</code>, populated according
to <code>proc</code>. Each valid index in <code>shape</code> is passed to <code>proc</code>,
and the result is place in the according array position.</p>
</div>
<div class="paragraph">
<p><code>idx</code> is an object that may be used to store the indices, and
it may be either a vector or an array. If it is not present, or
if it is <code>#f</code>, then an index vector will be created internally.</p>
</div>
<div class="paragraph">
<p><a id='P_array-retabulate!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(array-retabulate! arr shp proc [index-object]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Sets the elements of <code>arr</code> in <code>shape</code> to the value of <code>proc</code> at that
index, using <code>index-object</code> if provided. This is similar to
<code>tabulate-array!</code>, except that the array is given by the user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">arr</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="ss">'a</span> <span class="ss">'b</span> <span class="ss">'c</span> <span class="ss">'d</span><span class="p">))</span>
<span class="p">(</span><span class="nf">array-retabulate!</span> <span class="nv">arr</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span>
<span class="nv">arr</span> <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_transpose'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(transpose arr k &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Shares <code>arr</code> with permuted dimensions. Each dimension from 0
inclusive to rank exclusive must appear once in <code>k</code> &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>This is a generalized transpose. It can permute the dimensions any which
way. The permutation is provided by a permutation matrix: a square matrix
of zeros and ones, with exactly one one in each row and column, or a
permutation of the rows of an identity matrix; the size of the matrix
must match the number of dimensions of the array.</p>
</div>
<div class="paragraph">
<p>The default permutation is <code>[ 0 1 , 1 0 ]</code> of course, but any permutation
array can be specified, and the shape array of the original array is then
multiplied with it, and index column vectors of the new array with its
inverse, from left, to permute the rows appropriately.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">transpose</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">4</span> <span class="mi">0</span> <span class="mi">4</span><span class="p">)</span>
                  <span class="mi">-1</span>  <span class="mi">-2</span>   <span class="mi">-3</span>  <span class="mi">-4</span>
                  <span class="mi">-5</span>  <span class="mi">-6</span>   <span class="mi">-7</span>  <span class="mi">-8</span>
                  <span class="mi">-9</span>  <span class="mi">-10</span> <span class="mi">-11</span> <span class="mi">-12</span>
                  <span class="mi">-13</span> <span class="mi">-14</span> <span class="mi">-15</span> <span class="mi">-16</span><span class="p">))</span>
 <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">4</span> <span class="mi">0</span> <span class="mi">4</span><span class="p">)</span>
              <span class="mi">-1</span> <span class="mi">-5</span>  <span class="mi">-9</span> <span class="mi">-13</span>
              <span class="mi">-2</span> <span class="mi">-6</span> <span class="mi">-10</span> <span class="mi">-14</span>
              <span class="mi">-3</span> <span class="mi">-7</span> <span class="mi">-11</span> <span class="mi">-15</span>
              <span class="mi">-4</span> <span class="mi">-8</span> <span class="mi">-12</span> <span class="mi">-16</span><span class="p">)</span>

<span class="p">(</span><span class="nf">transpose</span> <span class="p">(</span><span class="nf">array</span> <span class="p">(</span><span class="nf">shape</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">)</span>
                  <span class="mi">-1</span> <span class="mi">-2</span>
                  <span class="mi">-3</span> <span class="mi">-4</span>
                  <span class="mi">-5</span> <span class="mi">-6</span>

                  <span class="mi">-7</span> <span class="mi">-8</span>
                  <span class="mi">-9</span> <span class="mi">-10</span>
                  <span class="mi">-11</span> <span class="mi">-12</span>

                  <span class="mi">-13</span> <span class="mi">-14</span>
                  <span class="mi">-15</span> <span class="mi">-16</span>
                  <span class="mi">-17</span> <span class="mi">-18</span><span class="p">))</span>
 <span class="nv">=&gt;</span> <span class="o">#,</span><span class="p">(</span><span class="nf">&lt;array&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">0</span> <span class="mi">3</span><span class="p">)</span>
               <span class="mi">-1</span>  <span class="mi">-7</span> <span class="mi">-13</span>
               <span class="mi">-3</span>  <span class="mi">-9</span> <span class="mi">-15</span>
               <span class="mi">-5</span> <span class="mi">-11</span> <span class="mi">-17</span>

               <span class="mi">-2</span>  <span class="mi">-8</span> <span class="mi">-14</span>
               <span class="mi">-4</span> <span class="mi">-10</span> <span class="mi">-16</span>
               <span class="mi">-6</span> <span class="mi">-12</span> <span class="mi">-18</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_27source_of_random_bits">srfi-27&#8201;&#8212;&#8201;Source of random bits</h4>
<div class="paragraph">
<p>


<strong><a href="http://srfi.schemers.org/srfi-27/srfi-27.html">SRFI-27</a></strong> is fully supported. Using primitives
<code>random-integer</code> or <code>random-real</code> automatically load this SRFI.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_28basic_format_strings">srfi-28&#8201;&#8212;&#8201;Basic Format Strings</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-28/srfi-28.html">SRFI-28</a></strong> is fully supported. Note that <strong><em>STklos</em></strong> <code>format</code>
is more general than the one defined this SRFI.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_35conditions">srfi-35&#8201;&#8212;&#8201;Conditions</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-35/srfi-35.html">SRFI-35</a></strong> is fully supported.
See <em><a href="_exceptions_and_conditions.html#_predefined_conditions">Section 7.3</a></em> for the predefined conditions
and when it is required to load this file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_36io_conditions">srfi-36&#8201;&#8212;&#8201;I/O Conditions</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-36/srfi-36.html">SRFI-36</a></strong> is fully supported.  See <em><a href="_exceptions_and_conditions.html#_predefined_conditions">Section 7.3</a></em>
Conditions) for the predefined conditions and when it is required to
load this file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_55require_extension">srfi-55&#8201;&#8212;&#8201;Require-extension</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-55/srfi-55.html">SRFI-55</a></strong> is fully supported. Furthermore, <strong><em>STklos</em></strong>
also accepts the symbols defined in <a href="_srfis.html#feature_identifiers">Table 2</a>
in a <em>require-extension</em> clause.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_69basic_hash_tables">srfi-69&#8201;&#8212;&#8201;Basic Hash Tables</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-69/srfi-69.html">SRFI-69</a></strong> is fully supported. Note that the default
comparison function in <strong><em>STklos</em></strong> is <code>eq?</code> whereas it is <code>equal?</code> for
the SRFI. Furthermore the hash functions defined in the SRFI are not
defined by default in <strong><em>STklos</em></strong>. To have a fully compliant SRFI-69
behaviour, you need use a <code>require-feature</code> in your code.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_88keyword_objects">srfi-88&#8201;&#8212;&#8201;Keyword Objects</h4>
<div class="paragraph">
<p>
<strong><a href="http://srfi.schemers.org/srfi-88/srfi-88.html">SRFI-88</a></strong> is fully
supported. The only difference between the keywords defined in the
SRFI document and the <strong><em>STklos</em></strong> keywords is on the zero-length
keyword: For <strong><em>STklos</em></strong>, <code>:</code> is equivalent to the keyword <code>#:||</code>,
whereas the SRFI considers that <code>:</code> is not a keyword but a symbol.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To obtain the symbol <code>:</code> in <strong><em>STklos</em></strong>, you must use <code>|:|</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_116immutable_list_library">srfi-116&#8201;&#8212;&#8201;Immutable List Library</h4>
<div class="paragraph">
<p>

<strong><em>STklos</em></strong> implements the arrays of <strong><a href="http://srfi.schemers.org/srfi-116/srfi-116.html">SRFI-116</a></strong>.</p>
</div>
<div class="paragraph">
<p><a id='P_ipair'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipair a d) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated <code>ipair</code> whose <code>icar</code> is <code>a</code> and whose <code>icdr</code> is <code>d</code>.
The ipair is guaranteed to be different (in the sense of <code>eqv?</code>)
from every existing object.</p>
</div>
<div class="paragraph">
<p><a id='P_ilist'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilist obj &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated ilist of its arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nf">ilist</span> <span class="ss">'a</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="ss">'c</span><span class="p">)</span>            <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="mi">7</span> <span class="nv">c</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">ilist</span><span class="p">)</span>                          <span class="nv">=&gt;</span>  <span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Being an ilist, its CAR, CDR and all sublists are immutable.</p>
</div>
<div class="paragraph">
<p><a id='P_xipair'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(xipair d a) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The same as <code>(lambda (d a) (ipair a d))</code></p>
</div>
<div class="paragraph">
<p>Of utility only as a value to be conveniently passed to
higher-order procedures.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">xipair</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="ss">'a</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The name stands for "eXchanged Immutable PAIR."</p>
</div>
<div class="paragraph">
<p><a id='P_ipair*'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipair* obj &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>ipair*</code> is like <code>ilist</code> except that the last argument to <code>ipair*</code> is
used as the ,(emph "cdr") of the last pair constructed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">   <span class="p">(</span><span class="nf">ipair*</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">ipair*</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="o">'</span><span class="p">(</span><span class="nf">4</span> <span class="mi">5</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">ipair*</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_make-ilist'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(make-ilist n [fill]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an n-element ilist, whose elements are all the value
fill. If the fill argument is not given, the elements of the
ilist may be arbitrary values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">make-ilist</span> <span class="mi">4</span> <span class="ss">'c</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">c</span> <span class="nv">c</span> <span class="nv">c</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ilist-tabulate'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilist-tabulate n init-proc) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an n-element ilist. Element i of the ilist,
where 0 &#8656; i &lt; n, is produced by <code>(init-proc i)</code>.
No guarantee is made about the dynamic order in which
<code>init-proc</code> is applied to these indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ilist-tabulate</span> <span class="mi">4</span> <span class="nv">values</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ilist-copy'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilist-copy lst) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Copies the spine of the argument, including the ilist tail.</p>
</div>
<div class="paragraph">
<p><a id='P_iiota'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iiota count [ start step ] </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an ilist containing the elements</p>
</div>
<div class="paragraph">
<p><code>(start start+step &#8230;&#8203; start+(count-1)*step)</code></p>
</div>
<div class="paragraph">
<p>The <code>start</code> and <code>step</code> parameters default to 0 and 1,
respectively. This procedure takes its name from the APL
primitive.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iiota</span> <span class="mi">5</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iiota</span> <span class="mi">5</span> <span class="mi">0</span> <span class="mf">-0.1</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mf">-0.1</span> <span class="mf">-0.2</span> <span class="mf">-0.3</span> <span class="mf">-0.4</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_icdr'></a><a id='P_icar'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(icar ipair) </strong></code><br>
<code><strong>(icdr ipair) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the contents of the icar and icdr
field of their argument, respectively. Note that it is an
error to apply them to the empty ilist.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">icar</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>       <span class="nv">=&gt;</span>  <span class="nv">a</span>          <span class="p">(</span><span class="nf">icdr</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span>
<span class="p">(</span><span class="nf">icar</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>   <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span><span class="p">)</span>        <span class="p">(</span><span class="nf">icdr</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
<span class="p">(</span><span class="nf">icar</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>      <span class="nv">=&gt;</span>  <span class="mi">1</span>          <span class="p">(</span><span class="nf">icdr</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="mi">2</span>
<span class="p">(</span><span class="nf">icar</span> <span class="o">'</span><span class="p">())</span>              <span class="nv">=&gt;</span>  <span class="nv">*error*</span>    <span class="p">(</span><span class="nf">icdr</span> <span class="o">'</span><span class="p">())</span>            <span class="nv">=&gt;</span>  <span class="nv">*error*</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ipair?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipair? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns true and only if <code>x</code> is a proper ilist — that is,
a ()-terminated ilist.</p>
</div>
<div class="paragraph">
<p><a id='P_ilist?'></a><a id='P_proper-ilist?'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(proper-ilist? x) </strong></code><br>
<code><strong>(ilist? x) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These identifiers are bound either to the same procedure.
In either case, true is returned iff <code>x</code> is a proper ilist
— a ()-terminated ilist.</p>
</div>
<div class="paragraph">
<p>More carefully: The empty list is a proper ilist. An ipair
whose icdr is a proper ilist is also a proper ilist. Everything
else is a dotted ilist. This includes non-ipair, non-() values
(e.g. symbols, numbers, mutable pairs), which are considered to
be dotted ilists of length 0.</p>
</div>
<div class="paragraph">
<p><a id='P_dotted-ilist?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(dotted-ilist? x) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns true if <code>x</code> is a finite, non-nil-terminated ilist. That is,
there exists an n &gt;= 0 such that <code>icdrn(x)</code> is neither an ipair nor
<code>()</code>. This includes non-ipair, non-() values (e.g. symbols, numbers),
which are considered to be dotted ilists of length 0.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">dotted-ilist?</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">=</span> <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nf">proper-ilist?</span> <span class="nv">x</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_not-ipair?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(not-ipair? x) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This is the same as <code>(lambda (x) (not (ipair? x)))</code></p>
</div>
<div class="paragraph">
<p>Provided as a procedure as it can be useful as the termination
condition for ilist-processing procedures that wish to handle
all ilists, both proper and dotted.</p>
</div>
<div class="paragraph">
<p><a id='P_null-ilist?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(null-ilist? lst) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Ilist is a proper ilist. This procedure returns true if the argument
is the empty list <code>()</code>, and false otherwise. It is an error to pass this
procedure a value which is not a proper ilist. This procedure is
recommended as the termination condition for ilist-processing
procedures that are not defined on dotted ilists.</p>
</div>
<div class="paragraph">
<p><a id='P_ilist='></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilist= elt= ilist1 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Determines ilist equality, given an element-equality procedure. Proper
ilist A equals proper ilist B if they are of the same length, and
their corresponding elements are equal, as determined by <code>elt=</code>. If the
element-comparison procedure&#8217;s first argument is from ilisti, then
its second argument is from ilisti+1, i.e. it is always called as
<code>(elt= a b)</code> for <code>a</code> an element of ilist A, and <code>b</code> an element of ilist B.</p>
</div>
<div class="paragraph">
<p>In the n-ary case, every ilisti is compared to ilisti+1 (as opposed,
for example, to comparing ilist1 to ilisti, for i&gt;1). If there are no
ilist arguments at all, <code>ilist=</code> simply returns true.</p>
</div>
<div class="paragraph">
<p>It is an error to apply ilist= to anything except proper ilists. It
cannot reasonably be extended to dotted ilists, as it provides no way
to specify an equality procedure for comparing the ilist terminators.</p>
</div>
<div class="paragraph">
<p>Note that the dynamic order in which the elt= procedure is applied to
pairs of elements is not specified. For example, if ilist= is applied
to three ilists, A, B, and C, it may first completely compare A to B,
then compare B to C, or it may compare the first elements of A and B,
then the first elements of B and C, then the second elements of A and
B, and so forth.</p>
</div>
<div class="paragraph">
<p>The equality procedure must be consistent with <code>eq?</code>. That is, it must
be the case that</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">eq?</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">elt=</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this implies that two ilists which are <code>eq?</code> are always ilist=,
as well; implementations may exploit this fact to "short-cut" the
element-by-element comparisons.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ilist=</span> <span class="nv">eq?</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="no">#t</span>       <span class="c1">; Trivial cases</span>
<span class="p">(</span><span class="nf">ilist=</span> <span class="nv">eq?</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_list-immutable!'></a><a id='P_list-immutable+!'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(list-immutable+! lst) </strong></code><br>
<code><strong>(list-immutable! lst) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Destructive versions of <code>list&#8594;ilist</code>: both procedures change their
argument so it will become an immutable list.
<code>List-immutable+!</code> returns the list, while <code>list-immutable!</code> returns <code>#void</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_itenth'></a><a id='P_ininth'></a><a id='P_ieighth'></a><a id='P_iseventh'></a><a id='P_isixth'></a><a id='P_ififth'></a><a id='P_ifourth'></a><a id='P_ithird'></a><a id='P_isecond'></a><a id='P_ifirst'></a>









</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifirst   ipair) </strong></code><br>
<code><strong>(isecond  ipair) </strong></code><br>
<code><strong>(ithird   ipair) </strong></code><br>
<code><strong>(ifourth  ipair) </strong></code><br>
<code><strong>(ififth   ipair) </strong></code><br>
<code><strong>(isixth   ipair) </strong></code><br>
<code><strong>(iseventh ipair) </strong></code><br>
<code><strong>(ieighth  ipair) </strong></code><br>
<code><strong>(ininth   ipair) </strong></code><br>
<code><strong>(itenth   ipair) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Synonyms for car, cadr, caddr, &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ithird</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="nv">c</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_icar+icdr'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(icar+icdr ip) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The fundamental ipair deconstructor. Returns two values:
the icar and the icdrif <code>ip</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_ilist-tail'></a><a id='P_idrop'></a><a id='P_itake'></a>


</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(itake x i) </strong></code><br>
<code><strong>(idrop x i) </strong></code><br>
<code><strong>(ilist-tail x i) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>itake</code> returns the first i elements of ilist <code>x</code>.
<code>idrop</code> returns all but the first i elements of ilist <code>x</code>.
<code>ilist-tail</code> is either the same procedure as idrop or else a procedure
with the same behavior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="nf">itake</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)</span>  <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span>
 <span class="p">(</span><span class="nf">idrop</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)</span>  <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>x</code> may be any value — a proper or dotted ilist:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">itake</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span>    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">idrop</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">3</span> <span class="o">.</span> <span class="nv">d</span><span class="p">)</span>
<span class="p">(</span><span class="nf">itake</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">idrop</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="nv">d</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For a legal <code>i</code>, itake and idrop partition the ilist in a manner
which can be inverted with iappend:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iappend</span> <span class="p">(</span><span class="nf">itake</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nf">idrop</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>idrop is exactly equivalent to performing i icdr operations on <code>x</code>;
the returned value shares a common tail with <code>x</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_idrop-right'></a><a id='P_itake-right'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(itake-right dilist i) </strong></code><br>
<code><strong>(idrop-right dilist i) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Itake-right</code> returns the last <code>i</code> elements of <code>dilist</code>.
<code>Idrop-right</code> returns all but the last <code>i</code> elements of <code>dilist</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">itake-right</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">d</span> <span class="nv">e</span><span class="p">)</span>
<span class="p">(</span><span class="nf">idrop-right</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The returned ilist may share a common tail with the argument <code>ilist</code>.</p>
</div>
<div class="paragraph">
<p><code>dilist</code> may be any ilist, either proper or dotted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">itake-right</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span> <span class="o">.</span> <span class="nv">d</span><span class="p">)</span>
<span class="p">(</span><span class="nf">idrop-right</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">2</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">itake-right</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">0</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="nv">d</span>
<span class="p">(</span><span class="nf">idrop-right</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">ipair</span> <span class="mi">3</span> <span class="ss">'d</span><span class="p">)))</span> <span class="mi">0</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For a legal <code>i</code>, <code>itake-right</code> and <code>idrop-right</code> partition the ilist
in a manner which can be inverted with <code>iappend</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>(iappend (itake dilist i) (idrop dilist i)) = dilist</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Itake-right</code>'s return value is guaranteed to share a common tail
with <code>dilist</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_isplit-at'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(isplit-at  x i) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Isplit-at</code> splits the ilist <code>x</code> at index <code>i</code>, returning an
ilist of the first <code>i</code> elements, and the remaining tail. It is
equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">values</span> <span class="p">(</span><span class="nf">itake</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nf">idrop</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_last-ipair'></a><a id='P_ilast'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilast ipair) </strong></code><br>
<code><strong>(last-ipair ipair) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Ilast</code> returns the last element of the non-empty, possibly
dotted, ilist ipair.
<code>Last-ipair</code> returns the last ipair in the non-empty ilist pair.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ilast</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>      <span class="nv">=&gt;</span> <span class="nv">c</span>
<span class="p">(</span><span class="nf">last-ipair</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ilength'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilength  ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the length of its argument. It is an error to pass a value
to <code>ilength</code> which is not a proper ilist (()-terminated).</p>
</div>
<div class="paragraph">
<p>The length of a proper ilist is a non-negative integer n such that
<code>icdr</code> applied n times to the ilist produces the empty list.</p>
</div>
<div class="paragraph">
<p><a id='P_iappend'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iappend ilist1 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns an ilist consisting of the elements of ilist1 followed by the elements of the other ilist parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iappend</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">y</span><span class="p">))</span>        <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iappend</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iappend</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">))</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">c</span><span class="p">)))</span>  <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting ilist is always newly allocated, except that it
shares structure with the final ilisti argument. This last argument
may be any value at all; an improper ilist results if it is not a
proper ilist. All other arguments must be proper ilists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iappend</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">ipair</span> <span class="ss">'c</span> <span class="ss">'d</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="o">.</span> <span class="nv">d</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iappend</span> <span class="o">'</span><span class="p">()</span> <span class="ss">'a</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="nv">a</span>
<span class="p">(</span><span class="nf">iappend</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>         <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iappend</span><span class="p">)</span>                  <span class="nv">=&gt;</span>  <span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iconcatenate'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iconcatenate  ilist-of-ilists) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Appends the elements of its argument together. That is, <code>iconcatenate</code>
returns the same as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iapply</span> <span class="nv">iappend</span> <span class="nv">ilist-of-ilists</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or, equivalently,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ireduce-right</span> <span class="nv">iappend</span> <span class="o">'</span><span class="p">()</span> <span class="nv">ilist-of-ilists</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As with <code>iappend</code>, the last element of the input list may be any
value at all.</p>
</div>
<div class="paragraph">
<p><a id='P_ireverse'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ireverse  ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a newly allocated ilist consisting of the elements of <code>ilist</code>
in reverse order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ireverse</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>              <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">c</span> <span class="nv">b</span> <span class="nv">a</span><span class="p">)</span>
<span class="p">(</span><span class="nf">ireverse</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span> <span class="nv">d</span> <span class="p">(</span><span class="nf">e</span> <span class="p">(</span><span class="nf">f</span><span class="p">))))</span>  <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">e</span> <span class="p">(</span><span class="nf">f</span><span class="p">))</span> <span class="nv">d</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span> <span class="nv">a</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iappend-reverse'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iappend-reverse  rev-head tail) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Iappend-reverse</code> returns <code>(iappend (ireverse rev-head) tail)</code>.
It is provided because it is a common operation — a common list-processing
style calls for this exact operation to transfer values accumulated in
reverse order onto the front of another ilist, and because the
implementation is significantly more efficient than the simple
composition it replaces. (But note that this pattern of iterative
computation followed by a reverse can frequently be rewritten as a
recursion, dispensing with the reverse and iappend-reverse steps, and
shifting temporary, intermediate storage from the heap to the stack,
which is typically a win for reasons of cache locality and eager
storage reclamation.)</p>
</div>
<div class="paragraph">
<p><a id='P_izip'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(izip ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the same as <code>(lambda ilists (iapply imap ilist ilists))</code></p>
</div>
<div class="paragraph">
<p>If <code>izip</code> is passed n ilists, it returns an ilist as long as the shortest
of these ilists, each element of which is an n-element ilist comprised of
the corresponding elements from the parameter ilists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">izip</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">one</span> <span class="nv">two</span> <span class="nv">three</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">iq</span> <span class="nv">odd</span> <span class="nv">even</span> <span class="nv">odd</span> <span class="nv">even</span> <span class="nv">odd</span> <span class="nv">even</span> <span class="nv">odd</span> <span class="nv">even</span><span class="p">))</span>
    <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">one</span> <span class="mi">1</span> <span class="nv">odd</span><span class="p">)</span> <span class="p">(</span><span class="nf">two</span> <span class="mi">2</span> <span class="nv">even</span><span class="p">)</span> <span class="p">(</span><span class="nf">three</span> <span class="mi">3</span> <span class="nv">odd</span><span class="p">))</span>

<span class="p">(</span><span class="nf">izip</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">3</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iunzip5'></a><a id='P_iunzip4'></a><a id='P_iunzip3'></a><a id='P_iunzip2'></a><a id='P_iunzip1'></a>




</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iunzip1 ilist) </strong></code><br>
<code><strong>(iunzip2 ilist) </strong></code><br>
<code><strong>(iunzip3 ilist) </strong></code><br>
<code><strong>(iunzip4 ilist) </strong></code><br>
<code><strong>(iunzip5 ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Iunzip1</code> takes an ilist of ilists, where every ilist must
contain at least one element, and returns an ilist containing
the initial element of each such ilist. That is, it returns
<code>(imap icar ilists)</code>. <code>Iunzip2</code> takes an ilist of ilists, where
every ilist must contain at least two elements, and returns two
values: an ilist of the first elements, and an ilist of the second
elements. <code>Iunzip3</code> does the same for the first three elements of
the ilists, and so forth.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iunzip2</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">1</span> <span class="nv">one</span><span class="p">)</span> <span class="p">(</span><span class="nf">2</span> <span class="nv">two</span><span class="p">)</span> <span class="p">(</span><span class="nf">3</span> <span class="nv">three</span><span class="p">)))</span> <span class="nv">=&gt;</span>
    <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">one</span> <span class="nv">two</span> <span class="nv">three</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_icount'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(icount pred ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Pred</code> is a procedure taking as many arguments as there are ilists and
returning a single value. It is applied element-wise to the elements
of the ilists, and a count is tallied of the number of elements that
produce a true value. This count is returned. count is "iterative" in
that it is guaranteed to apply pred to the ilist elements in a
left-to-right order. The counting stops when the shortest ilist
expires.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">icount</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">))</span>            <span class="nv">=&gt;</span> <span class="mi">3</span>
<span class="p">(</span><span class="nf">icount</span> <span class="nv">&lt;</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">8</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span> <span class="mi">10</span> <span class="mi">12</span> <span class="mi">14</span> <span class="mi">16</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_imap'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(imap proc ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>proc is a procedure taking as many arguments as there are ilist
arguments and returning a single value. imap applies proc element-wise
to the elements of the ilists and returns an ilist of the results, in
order. The dynamic order in which proc is applied to the elements of
the ilists is unspecified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">imap</span> <span class="nv">icadr</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">d</span> <span class="nv">e</span><span class="p">)</span> <span class="p">(</span><span class="nf">g</span> <span class="nv">h</span><span class="p">)))</span> <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">e</span> <span class="nv">h</span><span class="p">)</span>

<span class="p">(</span><span class="nf">imap</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span> <span class="p">(</span><span class="nb">expt</span> <span class="nv">n</span> <span class="nv">n</span><span class="p">))</span>
     <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
    <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">1</span> <span class="mi">4</span> <span class="mi">27</span> <span class="mi">256</span> <span class="mi">3125</span><span class="p">)</span>

<span class="p">(</span><span class="nf">imap</span> <span class="nv">+</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span> <span class="mi">9</span><span class="p">)</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">count</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">imap</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">ignored</span><span class="p">)</span>
         <span class="p">(</span><span class="k">set!</span> <span class="nv">count</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">count</span> <span class="mi">1</span><span class="p">))</span>
         <span class="nv">count</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)))</span> <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span><span class="p">)</span> <span class="nv">or</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ifor-each'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifor-each proc ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The arguments to <code>ifor-each</code> are like the arguments to <code>imap</code>, but
<code>ifor-each</code> calls <code>proc</code> for its side effects rather than for its
values. Unlike <code>imap</code>, <code>ifor-each</code> is guaranteed to call proc on the
elements of the ilists in order from the first element(s) to the last,
and the value returned by <code>ifor-each</code> is unspecified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">v</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">5</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">ifor-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">i</span><span class="p">)</span>
              <span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">v</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">i</span> <span class="nv">i</span><span class="p">)))</span>
            <span class="p">(</span><span class="nf">iq</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>
  <span class="nv">v</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">9</span> <span class="mi">16</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ifold'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifold kons knil ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The fundamental ilist iterator.</p>
</div>
<div class="paragraph">
<p>First, consider the single ilist-parameter case. If
<code>ilist1</code> = <code>(e1 e2 &#8230;&#8203; en)</code>, then this procedure returns</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nf">kons</span> <span class="nv">en</span> <span class="o">...</span> <span class="p">(</span><span class="nf">kons</span> <span class="nv">e2</span> <span class="p">(</span><span class="nf">kons</span> <span class="nv">e1</span> <span class="nv">knil</span><span class="p">))</span> <span class="o">...</span> <span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is, it obeys the (tail) recursion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="nv">lis</span><span class="p">)</span> <span class="nv">=</span> <span class="p">(</span><span class="nf">ifold</span> <span class="nv">kons</span> <span class="p">(</span><span class="nf">kons</span> <span class="p">(</span><span class="nf">icar</span> <span class="nv">lis</span><span class="p">)</span> <span class="nv">knil</span><span class="p">)</span> <span class="p">(</span><span class="nf">icdr</span> <span class="nv">lis</span><span class="p">))</span>
<span class="p">(</span><span class="nf">ifold</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="o">'</span><span class="p">())</span> <span class="nv">=</span> <span class="nv">knil</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="nf">ifold</span> <span class="nv">+</span> <span class="mi">0</span> <span class="nv">lis</span><span class="p">)</span>                    <span class="c1">; Add up the elements of LIS.</span>
  <span class="p">(</span><span class="nf">ifold</span> <span class="nv">ipair</span> <span class="o">'</span><span class="p">()</span> <span class="nv">lis</span><span class="p">)</span>              <span class="c1">; Reverse LIS.</span>
  <span class="p">(</span><span class="nf">ifold</span> <span class="nv">ipair</span> <span class="nv">tail</span> <span class="nv">rev-head</span><span class="p">)</span>        <span class="c1">; See APPEND-REVERSE.</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; How many symbols in LIS?</span>
<span class="p">(</span><span class="nf">ifold</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">count</span><span class="p">)</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">symbol?</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">count</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">count</span><span class="p">))</span>
      <span class="mi">0</span>
      <span class="nv">lis</span><span class="p">)</span>

<span class="c1">;; Length of the longest string in LIS:</span>
<span class="p">(</span><span class="nf">ifold</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">s</span> <span class="nv">max-len</span><span class="p">)</span> <span class="p">(</span><span class="nb">max</span> <span class="nv">max-len</span> <span class="p">(</span><span class="nb">string-length</span> <span class="nv">s</span><span class="p">)))</span>
      <span class="mi">0</span>
      <span class="nv">lis</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If n <code>ilist</code> arguments are provided, then the <code>kons</code> function must take
n+1 parameters: one element from each ilist, and the "seed" or fold
state, which is initially knil. The fold operation terminates when the
shortest ilist runs out of values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold</span> <span class="nv">ipair*</span> <span class="o">'</span><span class="p">()</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">c</span> <span class="mi">3</span> <span class="nv">b</span> <span class="mi">2</span> <span class="nv">a</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iunfold'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iunfold p f g seed [tail-gen]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Iunfold</code> is best described by its basic recursion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iunfold</span> <span class="nv">p</span> <span class="nv">f</span> <span class="nv">g</span> <span class="nv">seed</span><span class="p">)</span> <span class="nv">=</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">p</span> <span class="nv">seed</span><span class="p">)</span> <span class="p">(</span><span class="nf">tail-gen</span> <span class="nv">seed</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">ipair</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">seed</span><span class="p">)</span>
              <span class="p">(</span><span class="nf">iunfold</span> <span class="nv">p</span> <span class="nv">f</span> <span class="nv">g</span> <span class="p">(</span><span class="nf">g</span> <span class="nv">seed</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>p        Determines when to stop unfolding.
f        Maps each seed value to the corresponding ilist element.
g        Maps each seed value to next seed value.
seed     The "state" value for the unfold.
tail-gen Creates the tail of the ilist; defaults to (lambda (x) '())</pre>
</div>
</div>
<div class="paragraph">
<p>In other words, we use g to generate a sequence of seed values
 seed, g(seed), g2(seed), g3(seed), &#8230;&#8203;
 These seed values are mapped to ilist elements by f, producing
the elements of the result ilist in a left-to-right order. P says when
to stop.</p>
</div>
<div class="paragraph">
<p><code>Iunfold</code> is the fundamental recursive ilist constructor, just as
<code>ifold-right</code> is the fundamental recursive ilist consumer. While
<code>iunfold</code> may seem a bit abstract to novice functional programmers,
it can be used in a number of ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; Ilist of squares: 1^2 ... 10^2</span>
<span class="p">(</span><span class="nf">iunfold</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">x</span> <span class="mi">10</span><span class="p">))</span>
         <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
         <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span>
         <span class="mi">1</span><span class="p">)</span>

<span class="p">(</span><span class="nf">iunfold</span> <span class="nv">null-ilist?</span> <span class="nv">icar</span> <span class="nv">icdr</span> <span class="nv">lis</span><span class="p">)</span> <span class="c1">; Copy a proper ilist.</span>

<span class="c1">;; Read current input port into an ilist of values.</span>
<span class="p">(</span><span class="nf">iunfold</span> <span class="nv">eof-object?</span> <span class="nv">values</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">read</span><span class="p">))</span> <span class="p">(</span><span class="nb">read</span><span class="p">))</span>

<span class="c1">;; Copy a possibly non-proper ilist:</span>
<span class="p">(</span><span class="nf">iunfold</span> <span class="nv">not-ipair?</span> <span class="nv">icar</span> <span class="nv">icdr</span> <span class="nv">lis</span>
         <span class="nv">values</span><span class="p">)</span>

<span class="c1">;; Append HEAD onto TAIL:</span>
<span class="p">(</span><span class="nf">iunfold</span> <span class="nv">null-ilist?</span> <span class="nv">icar</span> <span class="nv">icdr</span> <span class="nv">head</span>
        <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="nv">tail</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Interested functional programmers may enjoy noting that ifold-right and
iunfold are in some sense inverses. That is, given operations <code>knull?</code>,
<code>kar</code>, <code>kdr</code>, <code>kons</code>, and <code>knil</code> satisfying</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">kons</span> <span class="p">(</span><span class="nf">kar</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">kdr</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span> <span class="nv">and</span> <span class="p">(</span><span class="nf">knull?</span> <span class="nv">knil</span><span class="p">)</span> <span class="nv">=</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>then</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="p">(</span><span class="nf">iunfold</span> <span class="nv">knull?</span> <span class="nv">kar</span> <span class="nv">kdr</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iunfold</span> <span class="nv">knull?</span> <span class="nv">kar</span> <span class="nv">kdr</span> <span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span><span class="o">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This combinator sometimes is called an "anamorphism;" when an explicit
tail-gen procedure is supplied, it is called an "apomorphism."</p>
</div>
<div class="paragraph">
<p><a id='P_ipair-fold'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipair-fold kons knil ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Analogous to fold, but kons is applied to successive sub-ilists of the
ilists, rather than successive elements — that is, kons is applied to
the ipairs making up the lists, giving this (tail) recursion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ipair-fold</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="nv">lis</span><span class="p">)</span> <span class="nv">=</span> <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">tail</span> <span class="p">(</span><span class="nf">icdr</span> <span class="nv">lis</span><span class="p">)))</span>
                              <span class="p">(</span><span class="nf">ipair-fold</span> <span class="nv">kons</span> <span class="p">(</span><span class="nf">kons</span> <span class="nv">lis</span> <span class="nv">knil</span><span class="p">)</span> <span class="nv">tail</span><span class="p">))</span>
<span class="p">(</span><span class="nf">ipair-fold</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="o">'</span><span class="p">())</span> <span class="nv">=</span> <span class="nv">knil</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ipair-fold</span> <span class="nv">ipair</span> <span class="o">'</span><span class="p">()</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ireduce'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ireduce f ridentity ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Ireduce</code> is a variant of <code>ifold</code>.</p>
</div>
<div class="paragraph">
<p><code>Ridentity</code> should be a "right identity" of the procedure <code>f</code>
— that is, for any value <code>x</code> acceptable to <code>f</code>,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="nf">f</span> <span class="nv">x</span> <span class="nv">ridentity</span><span class="p">)</span> <span class="nv">=</span> <span class="nv">x</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Ireduce</code> has the following definition:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>If ilist = (), return ridentity;
Otherwise, return (ifold f (icar ilist) (icdr ilist)).</pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;in other words, we compute <code>(ifold f ridentity ilist)</code>.</p>
</div>
<div class="paragraph">
<p>Note that ridentity is used only in the empty-list case. You typically
use ireduce when applying <code>f</code> is expensive and you&#8217;d like to avoid the
extra application incurred when ifold applies <code>f</code> to the head of <code>ilist</code>
and the identity value, redundantly producing the same value passed in
to <code>f</code>. For example, if <code>f</code> involves searching a file directory or
performing a database query, this can be significant. In general,
however, <code>ifold</code> is useful in many contexts where <code>ireduce</code> is
not (consider the examples given in the ifold definition — only one of
the five folds uses a function with a right identity. The other four
may not be performed with ireduce).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; take the max of an ilist of non-negative integers.</span>
<span class="p">(</span><span class="nf">ireduce</span> <span class="nv">max</span> <span class="mi">0</span> <span class="nv">nums</span><span class="p">)</span> <span class="c1">; i.e., (iapply max 0 nums)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ifold-right'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifold-right kons knil ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The fundamental ilist recursion operator.</p>
</div>
<div class="paragraph">
<p>First, consider the single ilist-parameter case. If
<code>ilist1 = (e1 e2 &#8230;&#8203; en)</code>, then this procedure returns
<code>(kons e1 (kons e2 &#8230;&#8203; (kons en knil)))</code></p>
</div>
<div class="paragraph">
<p>That is, it obeys the recursion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="nv">lis</span><span class="p">)</span> <span class="nv">=</span> <span class="p">(</span><span class="nf">kons</span> <span class="p">(</span><span class="nf">icar</span> <span class="nv">lis</span><span class="p">)</span> <span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="p">(</span><span class="nf">icdr</span> <span class="nv">lis</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="o">'</span><span class="p">())</span> <span class="nv">=</span> <span class="nv">knil</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">ipair</span> <span class="o">'</span><span class="p">()</span> <span class="nv">lis</span><span class="p">)</span>          <span class="c1">; Copy LIS.</span>

<span class="c1">;; Filter the even numbers out of LIS.</span>
<span class="p">(</span><span class="nf">ifold-right</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">l</span><span class="p">)</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">even?</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">ipair</span> <span class="nv">x</span> <span class="nv">l</span><span class="p">)</span> <span class="nv">l</span><span class="p">))</span> <span class="o">'</span><span class="p">()</span> <span class="nv">lis</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If n ilist arguments are provided, then the <code>kons</code> procedure must take
n+1 parameters: one element from each ilist, and the "seed" or fold
state, which is initially <code>knil</code>. The fold operation terminates when the
shortest ilist runs out of values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold-right</span> <span class="nv">ipair*</span> <span class="o">'</span><span class="p">()</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span> <span class="mi">1</span> <span class="nv">b</span> <span class="mi">2</span> <span class="nv">c</span> <span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iunfold-right'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iunfold-right p f g seed [tail]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Iunfold-right</code> constructs an ilist with the following loop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="nv">lp</span> <span class="p">((</span><span class="nf">seed</span> <span class="nv">seed</span><span class="p">)</span> <span class="p">(</span><span class="nf">lis</span> <span class="nv">tail</span><span class="p">))</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">p</span> <span class="nv">seed</span><span class="p">)</span> <span class="nv">lis</span>
      <span class="p">(</span><span class="nf">lp</span> <span class="p">(</span><span class="nf">g</span> <span class="nv">seed</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">ipair</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">seed</span><span class="p">)</span> <span class="nv">lis</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>p         Determines when to stop unfolding.
f         Maps each seed value to the corresponding ilist element.
g         Maps each seed value to next seed value.
seed      The "state" value for the unfold.
tail      ilist terminator; defaults to '().</pre>
</div>
</div>
<div class="paragraph">
<p>In other words, we use g to generate a sequence of seed values</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">seed,</span> <span class="nv">g</span><span class="p">(</span><span class="nf">seed</span><span class="p">)</span><span class="o">,</span> <span class="nv">g2</span><span class="p">(</span><span class="nf">seed</span><span class="p">)</span><span class="o">,</span> <span class="nv">g3</span><span class="p">(</span><span class="nf">seed</span><span class="p">)</span><span class="o">,</span> <span class="o">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These seed values are mapped to ilist elements by <code>f</code>, producing the
elements of the result ilist in a right-to-left order. P says when to
stop.</p>
</div>
<div class="paragraph">
<p><code>Iunfold-right</code> is the fundamental iterative ilist constructor, just as
<code>ifold</code> is the fundamental iterative ilist consumer. While <code>iunfold-right</code>
may seem a bit abstract to novice functional programmers, it can be
used in a number of ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; Ilist of squares: 1^2 ... 10^2</span>
<span class="p">(</span><span class="nf">iunfold-right</span> <span class="nv">zero?</span>
              <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
              <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span>
              <span class="mi">10</span><span class="p">)</span>

<span class="c1">;; Reverse a proper ilist.</span>
<span class="p">(</span><span class="nf">iunfold-right</span> <span class="nv">null-ilist?</span> <span class="nv">icar</span> <span class="nv">icdr</span> <span class="nv">lis</span><span class="p">)</span>

<span class="c1">;; Read current input port into an ilist of values.</span>
<span class="p">(</span><span class="nf">iunfold-right</span> <span class="nv">eof-object?</span> <span class="nv">values</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">read</span><span class="p">))</span> <span class="p">(</span><span class="nb">read</span><span class="p">))</span>

<span class="c1">;; (iappend-reverse rev-head tail)</span>
<span class="p">(</span><span class="nf">iunfold-right</span> <span class="nv">null-ilist?</span> <span class="nv">icar</span> <span class="nv">icdr</span> <span class="nv">rev-head</span> <span class="nv">tail</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Interested functional programmers may enjoy noting that ifold and
<code>iunfold-right</code> are in some sense inverses. That is, given operations
<code>knull?</code>, <code>kar</code>, <code>kdr</code>, <code>kons</code>, and <code>knil</code> satisfying</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">kons</span> <span class="p">(</span><span class="nf">kar</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">kdr</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span> <span class="nv">and</span> <span class="p">(</span><span class="nf">knull?</span> <span class="nv">knil</span><span class="p">)</span> <span class="nv">=</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>then</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifold</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="p">(</span><span class="nf">iunfold-right</span> <span class="nv">knull?</span> <span class="nv">kar</span> <span class="nv">kdr</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iunfold-right</span> <span class="nv">knull?</span> <span class="nv">kar</span> <span class="nv">kdr</span> <span class="p">(</span><span class="nf">ifold</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=</span> <span class="nv">x</span><span class="o">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ipair-fold-right'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipair-fold-right kons knil ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Holds the same relationship with <code>ifold-right</code> that <code>ipair-fold</code>
holds with <code>ifold</code>. Obeys the recursion</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="nf">ipair-fold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="nv">lis</span><span class="p">)</span> <span class="nv">=</span>
     <span class="p">(</span><span class="nf">kons</span> <span class="nv">lis</span> <span class="p">(</span><span class="nf">ipair-fold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="p">(</span><span class="nf">icdr</span> <span class="nv">lis</span><span class="p">)))</span>
 <span class="p">(</span><span class="nf">ipair-fold-right</span> <span class="nv">kons</span> <span class="nv">knil</span> <span class="o">'</span><span class="p">())</span> <span class="nv">=</span> <span class="nv">knil</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ipair-fold-right</span> <span class="nv">ipair</span> <span class="o">'</span><span class="p">()</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ireduce-right'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ireduce-right f ridentity ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Ireduce-right</code> is the <code>fold-right</code> variant of <code>ireduce</code>. It obeys the
following definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ireduce-right</span> <span class="nv">f</span> <span class="nv">ridentity</span> <span class="o">'</span><span class="p">())</span> <span class="nv">=</span> <span class="nv">ridentity</span>
<span class="p">(</span><span class="nf">ireduce-right</span> <span class="nv">f</span> <span class="nv">ridentity</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">e1</span><span class="p">))</span> <span class="nv">=</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">e1</span> <span class="nv">ridentity</span><span class="p">)</span> <span class="nv">=</span> <span class="nv">e1</span>
<span class="p">(</span><span class="nf">ireduce-right</span> <span class="nv">f</span> <span class="nv">ridentity</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">e1</span> <span class="nv">e2</span> <span class="o">...</span><span class="p">))</span> <span class="nv">=</span>
    <span class="p">(</span><span class="nf">f</span> <span class="nv">e1</span> <span class="p">(</span><span class="nf">ireduce</span> <span class="nv">f</span> <span class="nv">ridentity</span> <span class="p">(</span><span class="nf">e2</span> <span class="o">...</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;in other words, we compute <code>(ifold-right f ridentity ilist)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; Append a bunch of ilists together.</span>
<span class="c1">;; I.e., (iapply iappend ilist-of-ilists)</span>
<span class="p">(</span><span class="nf">ireduce-right</span> <span class="nv">iappend</span> <span class="o">'</span><span class="p">()</span> <span class="nv">ilist-of-ilists</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iappend-map'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iappend-map  f ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iapply</span> <span class="nv">iappend</span> <span class="p">(</span><span class="nf">imap</span> <span class="nv">f</span> <span class="nv">ilist1</span> <span class="nv">ilist2</span> <span class="o">...</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iapply</span> <span class="nv">iappend</span> <span class="p">(</span><span class="nf">imap</span> <span class="nv">f</span> <span class="nv">ilist1</span> <span class="nv">ilist2</span> <span class="o">...</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Map f over the elements of the ilists, just as in the <code>imap</code>
function. However, the results of the applications are appended
together (using <code>iappend</code>) to make the final result.</p>
</div>
<div class="paragraph">
<p>The dynamic order in which the various applications of <code>f</code> are made is
not specified.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iappend-map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">ilist</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">x</span><span class="p">)))</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">8</span><span class="p">))</span>
    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">-1</span> <span class="mi">3</span> <span class="mi">-3</span> <span class="mi">8</span> <span class="mi">-8</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ipair-for-each'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipair-for-each f ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Like <code>ifor-each</code>, but <code>f</code> is applied to successive sub-ilists of the
argument <code>ilists</code>. That is, <code>f</code> is applied to the cells of the ilists,
rather than the ilists' elements. These applications occur in
left-to-right order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ipair-for-each</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">ipair</span><span class="p">)</span> <span class="p">(</span><span class="nb">display</span> <span class="nv">ipair</span><span class="p">)</span> <span class="p">(</span><span class="nb">newline</span><span class="p">))</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="nv">==&gt;</span>
    <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ifilter-map'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifilter-map f ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Like <code>imap</code>, but only true values are saved.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifilter-map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="k">and</span> <span class="p">(</span><span class="nb">number?</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="mi">1</span> <span class="nv">b</span> <span class="mi">3</span> <span class="nv">c</span> <span class="mi">7</span><span class="p">))</span>
    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">9</span> <span class="mi">49</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The dynamic order in which the various applications of <code>f</code> are made is
not specified.</p>
</div>
<div class="paragraph">
<p><a id='P_imap-in-order'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(imap-in-order f ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>A variant of the <code>imap</code> procedure that guarantees to apply <code>f</code> across the
elements of the <code>ilisti</code> arguments in a left-to-right order. This is
useful for mapping procedures that both have side effects and return
useful values.</p>
</div>
<div class="paragraph">
<p><a id='P_ifilter'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifilter pred ilist ) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return all the elements of <code>ilist</code> that satisfy predicate <code>pred</code>. The
ilist is not disordered — elements that appear in the result ilist
occur in the same order as they occur in the argument <code>ilist</code>. The
returned ilist may share a common tail with the argument ilist. The
dynamic order in which the various applications of pred are made is
not specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifilter</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">0</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">43</span> <span class="mi">-4</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">0</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">-4</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ipartition'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ipartition pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Partitions the elements of <code>ilist</code> with predicate <code>pred</code>, and returns two
values: the ilist of in-elements and the ilist of out-elements. The
ilist is not disordered — elements occur in the result ilists in the
same order as they occur in the argument ilist. The dynamic order in
which the various applications of <code>pred</code> are made is not specified. One
of the returned ilists may share a common tail with the argument
ilist.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ipartition</span> <span class="nv">symbol?</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">one</span> <span class="mi">2</span> <span class="mi">3</span> <span class="nv">four</span> <span class="nv">five</span> <span class="mi">6</span><span class="p">))</span> <span class="nv">=&gt;</span>
    <span class="p">(</span><span class="nf">one</span> <span class="nv">four</span> <span class="nv">five</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span> <span class="mi">6</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iremove'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iremove pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns ilist without the elements that satisfy predicate pred,
similar to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">pred</span> <span class="nv">ilist</span><span class="p">)</span> <span class="p">(</span><span class="nf">ifilter</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nf">pred</span> <span class="nv">x</span><span class="p">)))</span> <span class="nv">ilist</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The ilist is not disordered — elements that appear in the result
ilist occur in the same order as they occur in the argument ilist. The
returned ilist may share a common tail with the argument ilist. The
dynamic order in which the various applications of <code>pred</code> are made is
not specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iremove</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">0</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">43</span> <span class="mi">-4</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">7</span> <span class="mi">43</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_imemv'></a><a id='P_imemq'></a><a id='P_imember'></a>


</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(imember x ilist [=]) </strong></code><br>
<code><strong>(imemq x ilist) </strong></code><br>
<code><strong>(imemv x ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return the first sub-ilist of <code>ilis`t whose icar is `x</code>,
where the sub-ilists of ilist are the non-empty ilists returned
by <code>(idrop ilist i)</code> for <code>i</code> less than the length of ilist. If <code>x</code> does not
occur in <code>ilist</code>, then false is returned. <code>Imemq</code> uses <code>eq?</code> to compare <code>x</code> with
the elements of <code>ilist</code>, while <code>imemv</code> uses <code>eqv?</code>, and <code>imember</code> uses <code>equal?</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">imemq</span> <span class="ss">'a</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>           <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
<span class="p">(</span><span class="nf">imemq</span> <span class="ss">'b</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>           <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span>
<span class="p">(</span><span class="nf">imemq</span> <span class="ss">'a</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>           <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nf">imemq</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">ilist</span> <span class="ss">'b</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="ss">'c</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nf">imember</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'a</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">ilist</span> <span class="ss">'b</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="ss">'c</span><span class="p">)))</span>    <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="nv">c</span><span class="p">)</span>
<span class="p">(</span><span class="nf">imemq</span> <span class="mi">101</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">100</span> <span class="mi">101</span> <span class="mi">102</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="nv">*unspecified*</span>
<span class="p">(</span><span class="nf">imemv</span> <span class="mi">101</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">100</span> <span class="mi">101</span> <span class="mi">102</span><span class="p">))</span>    <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">101</span> <span class="mi">102</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The comparison procedure is used to compare the elements <code>ei</code> of <code>ilist</code>
to the key <code>x</code> in this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">=</span> <span class="nv">x</span> <span class="nv">ei</span><span class="p">)</span> <span class="c1">; ilist is (E1 ... En)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is, the first argument is always <code>x</code>, and the second argument is
one of the ilist elements. Thus one can reliably find the first
element of ilist that is greater than five with <code>(imember 5 ilist &lt;)</code></p>
</div>
<div class="paragraph">
<p>Note that fully general ilist searching may be performed with the
<code>ifind-tail</code> and <code>ifind</code> procedures, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifind-tail</span> <span class="nv">even?</span> <span class="nv">ilist</span><span class="p">)</span> <span class="c1">; Find the first elt with an even key.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ifind'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifind pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the first element of ilist that satisfies predicate <code>pred</code>;
false if no element does.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifind</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">4</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that ifind has an ambiguity in its lookup semantics — if ifind
returns false, you cannot tell (in general) if it found a false element
that satisfied <code>pred</code>, or if it did not find any element at all. In many
situations, this ambiguity cannot arise — either the ilist being
searched is known not to contain any false elements, or the ilist is
guaranteed to have an element satisfying pred. However, in cases where
this ambiguity can arise, you should use <code>ifind-tail</code> instead of <code>ifind</code>,
since <code>ifind-tail</code> has no such ambiguity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nf">ifind-tail</span> <span class="nv">pred</span> <span class="nv">lis</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">ipair</span><span class="p">)</span> <span class="o">...</span><span class="p">))</span> <span class="c1">; Handle (icar ipair)</span>
      <span class="p">(</span><span class="k">else</span> <span class="o">...</span><span class="p">))</span> <span class="c1">; Search failed.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ifind-tail'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ifind-tail pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the first ipair of ilist whose icar satisfies <code>pred</code>. If no
ipair does, return false.</p>
</div>
<div class="paragraph">
<p><code>Ifind-tail</code> can be viewed as a general-predicate variant of the
<code>imember</code> function.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">ifind-tail</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">37</span> <span class="mi">-8</span> <span class="mi">-5</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">-8</span> <span class="mi">-5</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="nf">ifind-tail</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">37</span> <span class="mi">-5</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#f</span>

<span class="c1">;; IMEMBER X LIS:</span>
<span class="p">(</span><span class="nf">ifind-tail</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">elt</span><span class="p">)</span> <span class="p">(</span><span class="nb">equal?</span> <span class="nv">x</span> <span class="nv">elt</span><span class="p">))</span> <span class="nv">lis</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Ifind-tail</code> is essentially <code>idrop-while</code>, where the sense of the
predicate is inverted: <code>Ifind-tail</code> searches until it finds an element
satisfying the predicate; <code>idrop-while</code> searches until it finds an
element that doesn&#8217;t satisfy the predicate.</p>
</div>
<div class="paragraph">
<p><a id='P_iany'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iany pred ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Applies the predicate across the ilists, returning true if the
predicate returns true on any application.</p>
</div>
<div class="paragraph">
<p>If there are n ilist arguments <code>ilist1 &#8230;&#8203; ilistn</code>, then <code>pred</code> must
be a procedure taking n arguments and returning a boolean result.</p>
</div>
<div class="paragraph">
<p><code>Iany</code> applies <code>pred</code> to the first elements of the <code>ilisti</code>
parameters. If this application returns a true value, iany immediately
returns that value. Otherwise, it iterates, applying pred to the
second elements of the <code>ilisti</code> parameters, then the third, and so
forth. The iteration stops when a true value is produced or one of the
ilists runs out of values; in the latter case, iany returns false. The
application of <code>pred</code> to the last element of the ilists is a tail call.</p>
</div>
<div class="paragraph">
<p>Note the difference between <code>ifind</code> and <code>iany</code> — <code>ifind</code> returns the
element that satisfied the predicate; iany returns the true value that
the predicate produced.</p>
</div>
<div class="paragraph">
<p>Like <code>ievery</code>, `iany&#8217;s name does not end with a question mark — this
is to indicate that it does not return a simple boolean (true or false),
but a general value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">iany</span> <span class="nv">integer?</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="mi">3</span> <span class="nv">b</span> <span class="mf">2.7</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">iany</span> <span class="nv">integer?</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="mf">3.1</span> <span class="nv">b</span> <span class="mf">2.7</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#f</span>
<span class="p">(</span><span class="nf">iany</span> <span class="nv">&lt;</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">7</span> <span class="mi">1</span> <span class="mi">8</span> <span class="mi">2</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ievery'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ievery pred ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Applies the predicate across the ilists, returning true if the
predicate returns true on every application.</p>
</div>
<div class="paragraph">
<p>If there are n ilist arguments <code>ilist1 &#8230;&#8203; ilistn</code>, then <code>pred</code> must be a
procedure taking n arguments and returning a boolean result.</p>
</div>
<div class="paragraph">
<p><code>Ievery</code> applies <code>pred</code> to the first elements of the <code>ilisti</code> parameters. If
this application returns false, ievery immediately returns
false. Otherwise, it iterates, applying pred to the second elements of
the ilisti parameters, then the third, and so forth. The iteration
stops when a false value is produced or one of the ilists runs out of
values. In the latter case, ievery returns the true value produced by
its final application of <code>pred</code>. The application of pred to the last
element of the ilists is a tail call.</p>
</div>
<div class="paragraph">
<p>If one of the <code>ilisti</code> has no elements, ievery simply returns true.</p>
</div>
<div class="paragraph">
<p>Like <code>iany</code>, `ievery&#8217;s name does not end with a question mark — this is
to indicate that it does not return a simple boolean (true or false), but a
general value.</p>
</div>
<div class="paragraph">
<p><a id='P_ilist-index'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ilist-index pred ilist1 ilist2 &#8230;&#8203;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the index of the leftmost element that satisfies <code>pred</code>.</p>
</div>
<div class="paragraph">
<p>If there are n ilist arguments <code>ilist1 &#8230;&#8203; ilistn</code>, then <code>pred</code> must be a
function taking n arguments and returning a boolean result.</p>
</div>
<div class="paragraph">
<p><code>Ilist-index</code> applies <code>pred</code> to the first elements of the <code>ilisti</code>
parameters. If this application returns true, <code>ilist-index</code> immediately
returns zero. Otherwise, it iterates, applying <code>pred</code> to the second
elements of the <code>ilisti</code> parameters, then the third, and so forth. When
it finds a tuple of ilist elements that cause <code>pred</code> to return true, it
stops and returns the zero-based index of that position in the ilists.</p>
</div>
<div class="paragraph">
<p>The iteration stops when one of the ilists runs out of values; in this
case, <code>ilist-index</code> returns false.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="nv">ilist-index</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="nv">ilist-index</span> <span class="nv">&lt;</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">7</span> <span class="mi">1</span> <span class="mi">8</span> <span class="mi">2</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="nv">ilist-index</span> <span class="nv">=</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">7</span> <span class="mi">1</span> <span class="mi">8</span> <span class="mi">2</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_itake-while'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(itake-while  pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the longest initial prefix of ilist whose elements all
satisfy the predicate <code>pred</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">itake-while</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">18</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">22</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">18</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_idrop-while'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(idrop-while pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Drops the longest initial prefix of <code>ilist</code> whose elements all
satisfy the predicate <code>pred</code>, and returns the rest of the ilist.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">idrop-while</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">18</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">22</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">3</span> <span class="mi">10</span> <span class="mi">22</span> <span class="mi">9</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ibreak'></a><a id='P_ispan'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ispan   pred ilist) </strong></code><br>
<code><strong>(ibreak  pred ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Ispan</code> splits the ilist into the longest initial prefix whose
elements all satisfy <code>pred</code>, and the remaining tail. <code>Ibreak</code> inverts the
sense of the predicate: the tail commences with the first element of
the input ilist that satisfies the predicate.</p>
</div>
<div class="paragraph">
<p>In other words: <code>ispan</code> finds the initial span of elements
satisfying <code>pred</code>, and <code>ibreak</code> breaks the ilist at the first element
satisfying <code>pred</code>.</p>
</div>
<div class="paragraph">
<p><code>Ispan</code> is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">values</span> <span class="p">(</span><span class="nf">itake-while</span> <span class="nv">pred</span> <span class="nv">ilist</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">idrop-while</span> <span class="nv">pred</span> <span class="nv">ilist</span><span class="p">))</span>

<span class="p">(</span><span class="nf">ispan</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">2</span> <span class="mi">18</span> <span class="mi">3</span> <span class="mi">10</span> <span class="mi">22</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=&gt;</span>
  <span class="p">(</span><span class="nf">2</span> <span class="mi">18</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">3</span> <span class="mi">10</span> <span class="mi">22</span> <span class="mi">9</span><span class="p">)</span>

<span class="p">(</span><span class="nf">ibreak</span> <span class="nv">even?</span> <span class="p">(</span><span class="nf">iq</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span><span class="p">))</span> <span class="nv">=&gt;</span>
  <span class="p">(</span><span class="nf">3</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">4</span> <span class="mi">1</span> <span class="mi">5</span> <span class="mi">9</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_idelete'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(idelete  x ilist [=]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Idelete</code> uses the comparison procedure <code>=</code>, which defaults to <code>equal?</code>,
to find all elements of ilist that are equal to <code>x</code>, and deletes them from
<code>ilist</code>. The dynamic order in which the various applications of = are
made is not specified.</p>
</div>
<div class="paragraph">
<p>The ilist is not disordered — elements that appear in the result
ilist occur in the same order as they occur in the argument ilist. The
result may share a common tail with the argument ilist.</p>
</div>
<div class="paragraph">
<p>Note that fully general element deletion can be performed with the
iremove procedures, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; idelete all the even elements from LIS:</span>
<span class="p">(</span><span class="nf">iremove</span> <span class="nv">even?</span> <span class="nv">lis</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The comparison procedure is used in this way: <code>(= x ei)</code>. That is, <code>x</code>
is always the first argument, and an ilist element is always the
second argument. The comparison procedure will be used to compare each
element of ilist exactly once; the order in which it is applied to the
various ei is not specified. Thus, one can reliably remove all the
numbers greater than five from an ilist with <code>(idelete 5 ilist &lt;)</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_ialist-cons'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ialist-cons key datum ialist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Constructs a new ialist entry mapping key &#8594; datum onto ialist.
This is the same as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">key</span> <span class="nv">datum</span> <span class="nv">ialist</span><span class="p">)</span> <span class="p">(</span><span class="nf">ipair</span> <span class="p">(</span><span class="nf">ipair</span> <span class="nv">key</span> <span class="nv">datum</span><span class="p">)</span> <span class="nv">ialist</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_idelete-duplicates'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(idelete-duplicates  ilist [=]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Idelete-duplicates</code> removes duplicate elements from the <code>ilist</code>
argument. If there are multiple equal elements in the argument <code>ilist</code>,
the result ilist only contains the first or leftmost of these elements
in the result. The order of these surviving elements is the same as in
the original ilist — <code>idelete-duplicates</code> does not disorder the
ilist (hence it is useful for "cleaning up" immutable association
lists).</p>
</div>
<div class="paragraph">
<p>The <code>=</code> parameter is used to compare the elements of the ilist; it
defaults to equal?. If x comes before y in ilist, then the comparison
is performed <code>(= x y)</code>. The comparison procedure will be used to compare
each pair of elements in ilist no more than once; the order in which
it is applied to the various pairs is not specified.</p>
</div>
<div class="paragraph">
<p>Although  <code>idelete-duplicates</code> can be implemented so it runs in time
O(n2) for n-element ilists, the STklos implementation runs in linear
expected time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">idelete-duplicates</span> <span class="p">(</span><span class="nf">iq</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">a</span> <span class="nv">c</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">z</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">z</span><span class="p">)</span>

<span class="c1">;; Clean up an ialist:</span>
<span class="p">(</span><span class="nf">idelete-duplicates</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">a</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="o">.</span> <span class="mi">7</span><span class="p">)</span> <span class="p">(</span><span class="nf">a</span> <span class="o">.</span> <span class="mi">9</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span> <span class="o">.</span> <span class="mi">1</span><span class="p">))</span>
                   <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">eq?</span> <span class="p">(</span><span class="nf">icar</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">icar</span> <span class="nv">y</span><span class="p">))))</span>
    <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">a</span> <span class="o">.</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="o">.</span> <span class="mi">7</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span> <span class="o">.</span> <span class="mi">1</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_iassv'></a><a id='P_iassq'></a><a id='P_iassoc'></a>


</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iassoc key ialist [=] &#8594; ipair or #f </strong></code><br>
<code><strong>(iassq key ialist &#8594; ipair or #f </strong></code><br>
<code><strong>(iassv key ialist &#8594; ipair or #f </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Ialist</code> must be an immutable association list — an ilist of
ipairs. These procedures find the first ipair in ialist whose icar
field is key, and returns that ipair. If no ipair in ialist has key as
its icar, then false is returned. <code>Iassq</code> uses <code>eq?</code> to compare key with the
icar fields of the ipairs in ialist, while <code>iassv</code> uses <code>eqv?</code> and <code>iassoc</code>
uses <code>equal?</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">e</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">a</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">c</span> <span class="mi">3</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">iassq</span> <span class="ss">'a</span> <span class="nv">e</span><span class="p">)</span>                               <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iassq</span> <span class="ss">'b</span> <span class="nv">e</span><span class="p">)</span>                               <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">iassq</span> <span class="ss">'d</span> <span class="nv">e</span><span class="p">)</span>                               <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nf">iassq</span> <span class="p">(</span><span class="nf">ilist</span> <span class="ss">'a</span><span class="p">)</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">((</span><span class="nf">a</span><span class="p">))</span> <span class="p">((</span><span class="nf">b</span><span class="p">))</span> <span class="p">((</span><span class="nf">c</span><span class="p">))))</span>  <span class="nv">=&gt;</span>  <span class="no">#f</span>
<span class="p">(</span><span class="nf">iassoc</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">ilist</span> <span class="o">'</span><span class="p">((</span><span class="nf">a</span><span class="p">))</span> <span class="o">'</span><span class="p">((</span><span class="nf">b</span><span class="p">))</span> <span class="o">'</span><span class="p">((</span><span class="nf">c</span><span class="p">))))</span> <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">a</span><span class="p">))</span>
<span class="p">(</span><span class="nf">iassq</span> <span class="mi">5</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span><span class="p">)</span> <span class="p">(</span><span class="nf">11</span> <span class="mi">13</span><span class="p">)))</span>         <span class="nv">=&gt;</span>  <span class="nv">*unspecified*</span>
<span class="p">(</span><span class="nf">iassv</span> <span class="mi">5</span> <span class="p">(</span><span class="nf">iq</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span><span class="p">)</span> <span class="p">(</span><span class="nf">11</span> <span class="mi">13</span><span class="p">)))</span>         <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">5</span> <span class="mi">7</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The comparison procedure is used to compare the elements <code>ei</code> of ilist
to the key parameter in this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">=</span> <span class="nv">key</span> <span class="p">(</span><span class="nf">icar</span> <span class="nv">ei</span><span class="p">))</span> <span class="c1">; ilist is (E1 ... En)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is, the first argument is always key, and the second argument
is one of the ilist elements. Thus one can reliably find the first
entry of ialist whose key is greater than five with
<code>(iassoc 5 ialist &lt;)</code>.</p>
</div>
<div class="paragraph">
<p>Note that fully general ialist searching may be performed with the
ifind-tail and ifind procedures, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="c1">;; Look up the first association in ialist with an even key:</span>
<span class="p">(</span><span class="nf">ifind</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span><span class="p">)</span> <span class="p">(</span><span class="nb">even?</span> <span class="p">(</span><span class="nf">icar</span> <span class="nv">a</span><span class="p">)))</span> <span class="nv">ialist</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_ialist-delete'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(ialist-delete  key ialist [=]) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Ialist-delete</code> deletes all associations from ialist with the given
key, using key-comparison procedure <code>=</code>, which defaults to <code>equal?</code>. The
dynamic order in which the various applications of <code>=</code> are made is not
specified.</p>
</div>
<div class="paragraph">
<p>Return values may share common tails with the ialist argument. The
ialist is not disordered — elements that appear in the result ialist
occur in the same order as they occur in the argument ialist.</p>
</div>
<div class="paragraph">
<p>The comparison procedure is used to compare the element keys ki of
ialist&#8217;s entries to the key parameter in this way: <code>(= key ki)</code>. Thus,
one can reliably remove all entries of ialist whose key is greater
than five with <code>(ialist-delete 5 ialist &lt;)</code></p>
</div>
<div class="paragraph">
<p><a id='P_replace-icdr'></a><a id='P_replace-icar'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(replace-icar ipair object) </strong></code><br>
<code><strong>(replace-icdr ipair object) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Replace-icar</code> returns an ipair with object in the icar field and
the icdr of ipair in the icdr field.</p>
</div>
<div class="paragraph">
<p><code>Replace-icdr</code> returns an ipair with object in the icdr field and
the icar of ipair in the icar field.</p>
</div>
<div class="paragraph">
<p><a id='P_ilist->list'></a><a id='P_list->ilist'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(list&#8594;ilist lst) </strong></code><br>
<code><strong>(ilist&#8594;list lst) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures return an ilist and a list respectively that have
the same elements as the argument. The tails of dotted (i)lists are
preserved in the result, which makes the procedures not inverses
when the tail of a dotted ilist is a list or vice versa. The empty
list is converted to itself.</p>
</div>
<div class="paragraph">
<p>It is an error to apply list&#8594;ilist to a circular list.</p>
</div>
<div class="paragraph">
<p><a id='P_ipair->pair'></a><a id='P_pair->ipair'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(pair&#8594;ipair pair) </strong></code><br>
<code><strong>(ipair&#8594;pair ipair) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures, which are inverses, return an ipair and
a pair respectively that have the same (i)car and (i)cdr
fields as the argument.</p>
</div>
<div class="paragraph">
<p><a id='P_itree->tree'></a><a id='P_tree->itree'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(tree&#8594;itree object) </strong></code><br>
<code><strong>(itree&#8594;tree object) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures walk a tree of pairs or ipairs respectively and
make a deep copy of it, returning an isomorphic tree containing
ipairs or pairs respectively. The result may share structure with
the argument. If the argument is not of the expected type, it is
returned.</p>
</div>
<div class="paragraph">
<p>These procedures are not inverses in the general case. For example,
a pair of ipairs would be converted by <code>tree&#8594;itree</code> to an ipair of
ipairs, which if converted by <code>itree&#8594;tree</code> would produce a pair of
pairs.</p>
</div>
<div class="paragraph">
<p><a id='P_gtree->tree'></a><a id='P_gtree->itree'></a>

</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(gtree&#8594;itree object) </strong></code><br>
<code><strong>(gtree&#8594;tree object) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures walk a generalized tree consisting of pairs,
ipairs, or a combination of both, and make a deep copy of it,
returning an isomorphic tree containing only ipairs or pairs
respectively. The result may share structure with the argument.
If the argument is neither a pair nor an ipair, it is returned.</p>
</div>
<div class="paragraph">
<p><a id='P_iapply'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(iapply procedure object &#8230;&#8203; ilist) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>iapply</code> procedure is an analogue of <code>apply</code> whose last argument
is an ilist rather than a list. It is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">apply</span> <span class="nv">procedure</span> <span class="nv">object</span> <span class="o">...</span> <span class="p">(</span><span class="nf">ilist-&gt;list</span> <span class="nv">ilist</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_138compiling_scheme_programs_to_executables">srfi-138&#8201;&#8212;&#8201;Compiling Scheme programs to executables</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-138/srfi-138.html">SRFI-138</a></strong> is fully supported.  The <code>stklos-compile</code>
program conforms to SRFI 138, accepting all the required command line
options.</p>
</div>
<div class="paragraph">
<p>The -D x flag of <code>stklos-compile</code> will define a feature named <code>x</code> for
use with <code>cond-expand</code> in the compiled code only. It will not include
<code>x</code> in the features list of the runtime.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_145assumptions">srfi-145&#8201;&#8212;&#8201;Assumptions</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-145/srfi-145.html">SRFI-145</a></strong> is fully supported. See the
<em><a href="_standard_procedures.html#assume"><code>assume</code> special form</a></em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_169underscores_in_numbers">srfi-169&#8201;&#8212;&#8201;Underscores in numbers</h4>
<div class="paragraph">
<p>



<strong><a href="http://srfi.schemers.org/srfi-169/srfi-169.html">SRFI-169</a></strong> is fully supported. See <em><a href="_stklos_customization.html#srfi169">parameter <code>accept-srfi-169-numbers</code></a></em> to eventually forbid the usage of
underscores in numbers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_216sicp_prerequisites_portable">srfi-216&#8201;&#8212;&#8201;SICP Prerequisites (Portable)</h4>
<div class="paragraph">
<p>

<strong><a href="http://srfi.schemers.org/srfi-216/srfi-216.html">SRFI-216</a></strong> is fully supported. However, it defines the constant <code>stream-null</code> and the predicate
<code>stream-null?</code> which are incompatible with the ones defined in the <code>(stream primitive)</code> library used by
<strong><a href="http://srfi.schemers.org/srfi-41/srfi-41.html">SRFI-41</a></strong> or <strong><a href="http://srfi.schemers.org/srfi-221/srfi-221.html">SRFI-221</a></strong>. Prefix the imported symbols of this SRFI, if you plan to
use it with one of the previous libraries.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_230atomic_operations">srfi-230&#8201;&#8212;&#8201;Atomic Operations</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p><strong><a href="http://srfi.schemers.org/srfi-238/srfi-238.html">SRFI-238</a></strong> is fully supported if <strong><em>STklos</em></strong> was compiled
with Posix threads. If <strong><em>STklos</em></strong> was compiled without thread support,
the module <code>(srfi 230)</code> is defined, but it exports nothing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_srfi_238codesets">srfi-238&#8201;&#8212;&#8201;Codesets</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p><strong><a href="http://srfi.schemers.org/srfi-238/srfi-238.html">SRFI-238</a></strong> is fully supported. Furthermore, <strong><em>STklos</em></strong>
adds the functions <code>codeset-list</code> and <code>make-codeset</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_codeset-list'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(codeset-list) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Retuns a list of known codeset names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">codeset-list</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">errno</span> <span class="nv">signal</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_make-codeset'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(make-codeset name lst) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>returns a new codeset object of the given <code>name</code> (a symbol). The  list <code>lst</code>
is a list of triplets (code-number symbol message) where <code>symbol</code> and
<code>message</code>  can be <code>#f</code> if <code>code-number</code> has no associated name or message.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="k">define</span> <span class="nv">cs</span>
     <span class="p">(</span><span class="nf">make-codeset</span> <span class="ss">'foo</span>
                   <span class="o">'</span><span class="p">((</span><span class="nf">1</span>   <span class="nv">OK</span>    <span class="s">"Everything is OK"</span><span class="p">)</span>
                     <span class="p">(</span><span class="nf">1</span>   <span class="nv">YES</span>   <span class="no">#f</span><span class="p">)</span>                  <span class="c1">; Other name for OK</span>
                     <span class="p">(</span><span class="nf">2</span>   <span class="nv">KO</span>    <span class="s">"We have a problem"</span><span class="p">)</span>
                     <span class="p">(</span><span class="nf">2</span>   <span class="nv">NO</span>    <span class="no">#f</span><span class="p">)</span>                  <span class="c1">; Other name for KO</span>
                     <span class="p">(</span><span class="nf">3</span>   <span class="nv">MAYBE</span> <span class="s">"To be determined"</span><span class="p">)</span>
                     <span class="p">(</span><span class="nf">404</span> <span class="no">#f</span>    <span class="s">"Not found"</span><span class="p">))))</span>      <span class="c1">; No symbolic name</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_using_the_slib_package.html">Using the SLIB package</a> | ↑ Up: <a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.10)</a> | Next: <a href="_bibliography.html">Bibliography</a> →</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Documentation about hygienic macros has been stolen in the SLIB manual
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. In fact <code>define-module</code> on a given name defines a new module only the first time it is invoked on this name. By this way, interactively reloading a module does not define a new entity, and the other modules which use it are not altered.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. This transcript uses the default toplevel loop             which displays the name of the current module in the evaluator             prompt.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Under Unix, you can simply connect to a listening socket with the <code>telnet</code> of <code>netcat</code> command. For the given example, this can be achieved with <code>netcat localhost 12345</code>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Port 13, if open, can be used for testing: making a connection to it permits to know the distant system&#8217;s idea of the time of day.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The "pattern matching compiler" has been written by Jean-Marie Geffroy and is part of the Manuel Serrano&#8217;s Bigloo compiler since several years <a href="_bibliography.html#Bigloo">[Bigloo]</a>
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. This section is an adaptation of Jeff Dalton&#8217;s (<a href="mailto:J.Dalton@ed.ac.uk">J.Dalton@ed.ac.uk</a>) "<strong><em>Brief introduction to CLOS</em></strong>" which can be found at <a href="http://www.aiai.ed.ac.uk/~jeff/clos-guide.html" class="bare">http://www.aiai.ed.ac.uk/~jeff/clos-guide.html</a>
</div>
</div>
</body>
</html>