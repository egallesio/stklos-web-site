<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Erick Gallesio">
<title>STklos Reference Manual : (version 2.00)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cm {
  color: #75715e;
  font-style: italic;
}
pre.rouge .c1 {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cp {
  color: #75715e;
  font-weight: bold;
}
pre.rouge .cs {
  color: #75715e;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .err {
  color: #960050;
  background-color: #1e0010;
}
pre.rouge .gi {
  color: #ffffff;
  background-color: #324932;
}
pre.rouge .gd {
  color: #ffffff;
  background-color: #493131;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .k, pre.rouge .kv {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kc {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kd {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kp {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kr {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kt {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kn {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .ow {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .o {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .mf {
  color: #ae81ff;
}
pre.rouge .mh {
  color: #ae81ff;
}
pre.rouge .il {
  color: #ae81ff;
}
pre.rouge .mi {
  color: #ae81ff;
}
pre.rouge .mo {
  color: #ae81ff;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #ae81ff;
}
pre.rouge .se {
  color: #ae81ff;
}
pre.rouge .sa {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .sb {
  color: #e6db74;
}
pre.rouge .sc {
  color: #e6db74;
}
pre.rouge .sd {
  color: #e6db74;
}
pre.rouge .s2 {
  color: #e6db74;
}
pre.rouge .sh {
  color: #e6db74;
}
pre.rouge .si {
  color: #e6db74;
}
pre.rouge .sx {
  color: #e6db74;
}
pre.rouge .sr {
  color: #e6db74;
}
pre.rouge .s1 {
  color: #e6db74;
}
pre.rouge .ss {
  color: #e6db74;
}
pre.rouge .s, pre.rouge .dl {
  color: #e6db74;
}
pre.rouge .na {
  color: #a6e22e;
}
pre.rouge .nc {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nd {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .ne {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .no {
  color: #66d9ef;
}
pre.rouge .bp {
  color: #f8f8f2;
}
pre.rouge .nb {
  color: #f8f8f2;
}
pre.rouge .ni {
  color: #f8f8f2;
}
pre.rouge .nn {
  color: #f8f8f2;
}
pre.rouge .vc {
  color: #f8f8f2;
}
pre.rouge .vg {
  color: #f8f8f2;
}
pre.rouge .vi {
  color: #f8f8f2;
}
pre.rouge .nv, pre.rouge .vm {
  color: #f8f8f2;
}
pre.rouge .w {
  color: #f8f8f2;
}
pre.rouge .nl {
  color: #f8f8f2;
  font-weight: bold;
}
pre.rouge .nt {
  color: #f92672;
}
pre.rouge {
  color: #f8f8f2;
  background-color: #49483e;
}
</style>
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
    font-size: 90%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_stklos_object_system" class="book toc2 toc-left">
<div id="header">
<h1>STklos Reference Manual : (version 2.00)</h1>
<div class="details">
<span id="author" class="author">Erick Gallesio</span><br>
<span id="email" class="email"><a href="mailto:eg@stklos.net">eg@stklos.net</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.00)</a></span></p><ul class="sectlevel1">
<li><a href="_preface.html">Preface</a>
</li>
<li><a href="_introduction.html">1. Introduction</a>
</li>
<li><a href="_expressions.html">2. Expressions</a>
</li>
<li><a href="_program_structure.html">3. Program structure</a>
</li>
<li><a href="_standard_procedures.html">4. Standard Procedures</a>
</li>
<li><a href="_regular_expressions.html">5. Regular Expressions</a>
</li>
<li><a href="_pattern_matching.html">6. Pattern Matching</a>
</li>
<li><a href="_exceptions_and_conditions.html">7. Exceptions and Conditions</a>
</li>
<li><a href="_stklos_object_system.html"><span class="toc-current">8. STklos Object System</span></a>
<ul class="sectlevel2">
<li><a href="_stklos_object_system.html#_introduction_2">8.1. Introduction</a>
</li>
<li><a href="_stklos_object_system.html#_object_system_tutorial">8.2. Object System Tutorial</a>
</li>
<li><a href="_stklos_object_system.html#_object_system_main_functions_and_syntaxes">8.3. Object System Main Functions and Syntaxes</a>
</li>
</ul>
</li>
<li><a href="_threads_mutexes_and_condition_variables.html">9. Threads, Mutexes and Condition Variables</a>
</li>
<li><a href="_stklos_customization.html">10. STklos Customization</a>
</li>
<li><a href="_foreign_function_interface.html">11. Foreign Function Interface</a>
</li>
<li><a href="_using_the_slib_package.html">12. Using the SLIB package</a>
</li>
<li><a href="_srfis.html">13. SRFIs</a>
</li>
<li><a href="_bibliography.html">Bibliography</a>
</li>
<li><a href="_idiosync.html">Appendix C: STklos Idiosyncrasies</a>
</li>
<li><a href="FDL.html">Appendix D: GNU Free Documentation License</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_stklos_object_system">8. STklos Object System</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2">8.1. Introduction</h3>
<div class="paragraph">
<p>The aim of this chapter is to present <strong><em>STklos</em></strong> object
system.  Briefly stated, <strong><em>STklos</em></strong> gives the  programmer
an extensive object system with meta-classes, multiple
inheritance, generic functions and multi-methods.  Furthermore,
its implementation relies on a MOP  (Meta Object Protocol
(MOP) <a href="_bibliography.html#AMOP">[AMOP]</a>),
in the spirit of the one defined for
CLOS <a href="_bibliography.html#CLtL2">[CLtL2]</a>.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> implementation is derived from the version 1.3 of <strong><em>Tiny CLOS</em></strong>, a
pure and clean CLOS-like MOP implementation in Scheme written by Gregor
Kickzales <a href="_bibliography.html#Tiny-Clos">[Tiny-Clos]</a>. However, Tiny CLOS implementation was designed as a
pedagogical tool and consequently, completeness and efficiency were not the
author concern for it.  <strong><em>STklos</em></strong> extends the Tiny CLOS model to be efficient
and as close as possible to CLOS, the Common Lisp Object System <a href="_bibliography.html#CLtL2">[CLtL2]</a>.
Some features of <strong><em>STklos</em></strong> are also issued from <a href="_bibliography.html#Dylan">[Dylan]</a> or <a href="_bibliography.html#SOS">[SOS]</a>.</p>
</div>
<div class="paragraph">
<p>This chapter is divided in three parts, which have a quite different audience
in mind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first part presents the <strong><em>STklos</em></strong> object system rather
informally; it is intended to be a tutorial of the language and is
for people who want to have an idea of the <strong><em>look and feel</em></strong> of
<strong><em>STklos</em></strong>.</p>
</li>
<li>
<p>The second part describes the <strong><em>STklos</em></strong> object system at
the <strong><em>external</em></strong> level (i.e.  without requiring the use of the
Meta Object Protocol).</p>
</li>
<li>
<p>The third and last part describes the <strong><em>STklos</em></strong> Meta
Object Protocol.  It is intended for people whio want to play with
meta programming.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_object_system_tutorial">8.2. Object System Tutorial</h3>
<div class="paragraph">
<p>The <strong><em>STklos</em></strong> object system relies on classes like most of the current OO
languages.  Furthermore, <strong><em>STklos</em></strong> provides meta-classes, multiple
inheritance, generic functions and multi-methods as in CLOS, the Common Lisp
Object System <a href="_bibliography.html#CLtL2">[CLtL2]</a> or <a href="_bibliography.html#Dylan">[Dylan]</a>.  This chapter presents <strong><em>STklos</em></strong> in
a rather informal manner.  Its intent is to give the reader an idea of the
"<strong><em>look and feel</em></strong>" of <strong><em>STklos</em></strong> programming.  However, we suppose here that
the reader has some basic notions of OO programming, and is familiar with
terms such as <strong><em>classes, instances</em></strong> or <strong><em>methods.</em></strong></p>
</div>
<div class="sect3">
<h4 id="_class_definition_and_instantiation">8.2.1. Class definition and instantiation</h4>
<div class="sect4">
<h5 id="_class_definition">Class definition</h5>
<div class="paragraph">
<p>


A new class is defined with the <code>define-class</code> form.
The syntax of <code>define-class</code> is close to CLOS <code>defclass</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">class</span> <span class="p">(</span><span class="nf">superclass~1~</span> <span class="nv">superclass~2~</span> <span class="o">...</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">slot-description1</span>
   <span class="nv">slot-description2</span>
   <span class="o">...</span><span class="p">)</span>
  <span class="nv">metaclass</span> <span class="nv">option</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong><em>metaclass option</em></strong> will not be discussed here.
The <strong><em>superclass</em></strong>es list specifies the super classes of
<strong><em>class</em></strong> (see <a href="_stklos_object_system.html#_inheritance">Section 8.2.2</a> for details).</p>
</div>
<div class="paragraph">
<p>
A <strong><em>slot description</em></strong> gives the name of a slot and,
eventually, some <em>properties</em> of this slot (such as its
initial value, the function which permit to access its value,
&#8230;&#8203;). Slot descriptions will be discussed in
,(index "slot-definition").</p>
</div>
<div class="paragraph">
<p>As an example, consider now that we want to define a point as an object. This
can be done with the following class definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;point&gt;</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This definition binds the symbol <code>&lt;point&gt;</code> to a new class whose instances
contain two slots. These slots are called <code>x</code> an <code>y</code> and we suppose here that
they contain the coordinates of a 2D point.</p>
</div>
<div class="paragraph">
<p>Let us define now a circle, as a 2D point and a radius:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;circle&gt;</span> <span class="p">(</span><span class="nf">&lt;point&gt;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">radius</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As we can see here, the class <code>&lt;circle&gt;</code> is constructed by inheriting from the
class <code>&lt;point&gt;</code> and adding a new slot (the <code>radius</code> slot).</p>
</div>
</div>
<div class="sect4">
<h5 id="_instance_creation_and_slot_access">Instance creation and slot access</h5>
<div class="paragraph">
<p>

Creation of an instance of a previously defined class can
be done with the <code>make</code> procedure. This procedure takes
one mandatory parameter which is the class of the instance which
must be created and a list of optional arguments. Optional
arguments are generally used to initialize some slots of the
newly created instance. For instance, the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span>  <span class="nv">c</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;circle&gt;</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>creates a new <code>&lt;circle&gt;</code> object and binds it to the <code>c</code> Scheme variable.</p>
</div>
<div class="paragraph">
<p>


Accessing the slots of the newly created circle can be done
with the <code>slot-ref</code> and the <code>slot-set!</code> primitives. The <code>slot-set!</code>
primitive permits to set the value of an object slot and <code>slot-ref</code>
permits to get its value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">slot-set!</span> <span class="nv">c</span> <span class="ss">'x</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">(</span><span class="nf">slot-set!</span> <span class="nv">c</span> <span class="ss">'y</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">c</span> <span class="ss">'x</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="mi">10</span>
<span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">c</span> <span class="ss">'y</span><span class="p">)</span>       <span class="nv">=&gt;</span>  <span class="mi">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the <code>describe</code> function is a simple way to see all the slots of an
object at one time: this function prints all the slots of an object on the
standard output. For instance, the expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">describe</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>prints the following information on the standard output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>#[&lt;circle&gt; 81aa1f8] is an an instance of class &lt;circle&gt;.
Slots are:
     radius = #[unbound]
     x = 10
     y = 3</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_slot_definition">Slot Definition</h5>
<div class="paragraph">
<p>When specifying a slot, a set of options can be given to
the system.  Each option is specified with a keyword. For
instance,</p>
</div>
<div class="ulist">
<ul>
<li>
<p> <strong>:init-form</strong> can be used to supply a default value for the slot.</p>
</li>
<li>
<p><strong>:init-keyword</strong> can be used to specify the keyword used for initializing a slot.</p>
</li>
<li>
<p> <strong>:getter</strong> can be used to define the name of the slot getter</p>
</li>
<li>
<p> <strong>:setter</strong> can be used to define the name of the slot setter</p>
</li>
<li>
<p> <strong>:accessor</strong> can be used to define the name of the slot accessor
(see below)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To illustrate slot description, we redefine here the <code>&lt;point&gt;</code> class seen
before. A new definition of this class could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;point&gt;</span> <span class="p">()</span>
  <span class="p">((</span><span class="nf">x</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:getter</span> <span class="nv">get-x</span> <span class="nv">:setter</span> <span class="nv">set-x!</span> <span class="nv">:init-keyword</span> <span class="nv">:x</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">y</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:getter</span> <span class="nv">get-y</span> <span class="nv">:setter</span> <span class="nv">set-y!</span> <span class="nv">:init-keyword</span> <span class="nv">:y</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this definition,</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the <code>x</code> and <code>y</code> slots are set to 0 by default.</p>
</li>
<li>
<p>The value of a slot can also be specified by calling <code>make</code> with the <code>:x</code> and <code>:y</code>
keywords.</p>
</li>
<li>
<p>Furthermore, the generic functions <code>get-x</code> and <code>set-x!</code> (resp.  <code>get-y</code> and
<code>set-y!</code>) are automatically defined by the system to read and write the <code>x</code>
(resp.  <code>y</code>) slot.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">p1</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;point&gt;</span> <span class="nv">:x</span> <span class="mi">1</span> <span class="nv">:y</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">get-x</span> <span class="nv">p1</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">set-x!</span> <span class="nv">p1</span>  <span class="mi">12</span><span class="p">)</span>
<span class="p">(</span><span class="nf">get-x</span> <span class="nv">p1</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">12</span>

<span class="p">(</span><span class="k">define</span>  <span class="nv">p2</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;point&gt;</span> <span class="nv">:x</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">get-x</span> <span class="nv">p2</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="mi">2</span>
<span class="p">(</span><span class="nf">get-y</span> <span class="nv">p2</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="mi">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
Accessors provide an uniform access for reading and writing an object slot.
Writing a slot is done with an extended form of <code>set!</code>  which is
close to the Common Lisp <code>setf</code> macro.  A slot accessor can be
defined with the <code>:accessor</code> option in the slot
description.  Hereafter, is another definition of our
<code>&lt;point&gt;</code> class, using an accessor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;point&gt;</span> <span class="p">()</span>
  <span class="p">((</span><span class="nf">x</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:accessor</span> <span class="nv">x-of</span> <span class="nv">:init-keyword</span> <span class="nv">:x</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">y</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:accessor</span> <span class="nv">y-of</span> <span class="nv">:init-keyword</span> <span class="nv">:y</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using this class definition, reading the x coordinate of the <code>p</code> point can be
done with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">x-of</span> <span class="nv">p</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and setting it to 100 can be done using the extended <code>set!</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">x-of</span> <span class="nv">p</span><span class="p">)</span> <span class="mi">100</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong><em>STklos</em></strong> also define <code>slot-set!</code> as the <a href="_srfis.html#setter">setter function</a> of <code>slot-ref</code>.
As a consequence, we have</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">p</span> <span class="ss">'y</span><span class="p">)</span> <span class="mi">100</span><span class="p">)</span>
<span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">p</span> <span class="ss">'y</span><span class="p">)</span>       <span class="nv">=&gt;</span> <span class="mi">100</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_virtual_slots">Virtual Slots</h5>
<div class="paragraph">
<p>

Suppose that we need slot named <code>area</code> in circle objects which contain the
area of the circle. One way to do this would be to add the new slot to the
class definition and have an initialisation form for this slot which takes
into account the radius of the circle. The problem with this approach is that
if the <code>radius</code> slot is changed, we need to change <code>area</code> (and
vice-versa). This is something which is hard to manage and if we don&#8217;t care,
it is easy to have a <code>area</code> and <code>radius</code> in an instance which are
"un-synchronized".  The virtual slot mechanism avoid this problem.</p>
</div>
<div class="paragraph">
<p>A virtual slot is a special slot whose value is calculated rather than stored
in an object.  The way to read and write such a slot must be given when the
slot is defined with the <code>:slot-ref</code> and <code>:slot-set!</code> slot options.</p>
</div>
<div class="paragraph">
<p>A complete definition of the <code>&lt;circle&gt;</code> class
using virtual slots could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;circle&gt;</span> <span class="p">(</span><span class="nf">&lt;point&gt;</span><span class="p">)</span>
  <span class="p">((</span><span class="nf">radius</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:accessor</span> <span class="nv">radius</span> <span class="nv">:init-keyword</span> <span class="nv">:radius</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">area</span> <span class="nv">:allocation</span> <span class="nv">:virtual</span> <span class="nv">:accessor</span> <span class="nv">area</span>
	     <span class="nv">:slot-ref</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">o</span><span class="p">)</span> <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">r</span> <span class="p">(</span><span class="nf">radius</span> <span class="nv">o</span><span class="p">)))</span> <span class="p">(</span><span class="nb">*</span> <span class="mf">3.14</span> <span class="nv">r</span> <span class="nv">r</span><span class="p">)))</span>
	     <span class="nv">:slot-set!</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">o</span> <span class="nv">v</span><span class="p">)</span> <span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">radius</span> <span class="nv">o</span><span class="p">)</span> <span class="p">(</span><span class="nb">sqrt</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">v</span> <span class="mf">3.14</span><span class="p">)))))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example using this definition of <code>&lt;circle&gt;</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;circle&gt;</span> <span class="nv">:radius</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nf">radius</span> <span class="nv">c</span><span class="p">)</span>                           <span class="nv">=&gt;</span> <span class="mi">1</span>
<span class="p">(</span><span class="nf">area</span> <span class="nv">c</span><span class="p">)</span>                             <span class="nv">=&gt;</span> <span class="mf">3.14</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">area</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">4</span> <span class="p">(</span><span class="nf">area</span> <span class="nv">x</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">area</span> <span class="nv">c</span><span class="p">)</span>                             <span class="nv">=&gt;</span> <span class="mf">12.56</span>   <span class="c1">;; (i.e. ⒋π)</span>
<span class="p">(</span><span class="nf">radius</span> <span class="nv">c</span><span class="p">)</span>                           <span class="nv">=&gt;</span> <span class="mf">2.0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, we can also used the function <code>describe</code> to visualize
the slots of a given object. Applied to the prvious <code>c</code>, it prints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>#[&lt;circle&gt; 81b2348] is an an instance of class &lt;circle&gt;.
Slots are:
     area = 12.56
     radius = 2.0
     x = 0
     y = 0</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_inheritance">8.2.2. Inheritance</h4>
<div class="sect4">
<h5 id="_class_hierarchy_and_inheritance_of_slots">Class hierarchy and inheritance of slots</h5>
<div class="paragraph">
<p>inheritance
Inheritance is specified upon class definition. As said in the introduction,
<strong><em>STklos</em></strong> supports multiple inheritance.  Hereafter are some classes
definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">A</span> <span class="p">()</span> <span class="p">(</span><span class="nf">a</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">B</span> <span class="p">()</span> <span class="p">(</span><span class="nf">b</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">C</span> <span class="p">()</span> <span class="p">(</span><span class="nf">c</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">D</span> <span class="p">(</span><span class="nf">A</span> <span class="nv">B</span><span class="p">)</span> <span class="p">(</span><span class="nf">d</span> <span class="nv">a</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">E</span> <span class="p">(</span><span class="nf">A</span> <span class="nv">C</span><span class="p">)</span> <span class="p">(</span><span class="nf">e</span> <span class="nv">c</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">F</span> <span class="p">(</span><span class="nf">D</span> <span class="nv">E</span><span class="p">)</span> <span class="p">(</span><span class="nf">f</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>A</code>, <code>B</code>, <code>C</code> have a null list of super classes. In this case, the
system will replace it by the list which only contains <code>&lt;object&gt;</code>, the root of
all the classes defined by <code>define-class</code>.</p>
</li>
<li>
<p><code>D</code>, <code>E</code>, and <code>F</code> use multiple inheritance: each class inherits from two
previously defined classes.  Those class definitions define a hierarchy which
is shown in <a href="_stklos_object_system.html#class_hierarchy">Figure 1</a>.</p>
</li>
</ul>
</div>
<div id="class_hierarchy" class="imageblock text-center">
<div class="content">
<img src="images/hierarchy.png" alt="hierarchy">
</div>
<div class="title">Figure 1. A class hiearchy</div>
</div>
<div class="paragraph">
<p>In this figure, the class <code>&lt;top&gt;</code> is also shown; this class is the super class
of all Scheme objects. In particular, <code>&lt;top&gt;</code> is the super class of all
standard Scheme types.</p>
</div>
<div class="paragraph">
<p>The set of slots of a given class is calculated by "unioning" the slots of all
its super class. For instance, each instance of the class <code>D</code> defined before
will have three slots (<code>a</code>, <code>b</code> and <code>d</code>). The slots of a class can be obtained
by the <code>class-slots</code> primitive.  For instance,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">class-slots</span> <span class="nv">A</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span><span class="p">)</span>
<span class="p">(</span><span class="nf">class-slots</span> <span class="nv">E</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">e</span> <span class="nv">c</span><span class="p">)</span>
<span class="p">(</span><span class="nf">class-slots</span> <span class="nv">F</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">e</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">a</span> <span class="nv">f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The order of slots is not significant.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_class_precedence_list">Class precedence list</h5>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>A class may have more than one superclass <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>With single inheritance (only one superclass), it is easy to order the super
classes from most to least specific.  This is the rule:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Rule 1: Each class is more specific than its superclasses.</strong></p>
</div>
</div>
</div>
<div class="paragraph">
<p>With multiple inheritance, ordering is harder.  Suppose we have</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">X</span> <span class="p">()</span>
   <span class="p">((</span><span class="nf">x</span> <span class="nv">:init-form</span> <span class="mi">1</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-class</span> <span class="nv">Y</span> <span class="p">()</span>
   <span class="p">((</span><span class="nf">x</span> <span class="nv">:init-form</span> <span class="mi">2</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-class</span> <span class="nv">Z</span> <span class="p">(</span><span class="nf">X</span> <span class="nv">Y</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">z</span> <span class="nv">:init-form</span> <span class="mi">3</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, given <strong>Rule 1</strong>, the <code>Z</code> class is more specific than the <code>X</code> or <code>Y</code>
class for instances of <code>Z</code>.  However, the <code>:init-form</code> specified in <code>X</code> and
<code>Y</code> leads to a problem: which one overrides the other?  Or, stated
differently, which is the default initial value of the <code>x</code> slot of a <code>Z</code>
instance.  The rule in <strong><em>STklos</em></strong>, as in CLOS, is that the superclasses listed
earlier are more specific than those listed later.  So:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Rule 2: For a given class, superclasses listed earlier are more specific than those listed later.</strong></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These rules are used to compute a linear order for a class and all its
superclasses, from most specific to least specific.  This order is called the
"<strong><em>class precedence list</em></strong>" of the class.  Given these two rules, we can claim
that the initial form for the <code>x</code> slot of previous example is 1 since the
class <code>X</code> is placed before <code>Y</code> in the super classes of <code>Z</code>.  These two rules
are not always sufficient to determine a unique order.  However, they give an
idea of how the things work. <strong><em>STklos</em></strong> algorithm for calculating the class
precedence list of a class is a little simpler than the CLOS one described in
<a href="_bibliography.html#AMOP">[AMOP]</a> for breaking ties.  Consequently, the calculated class
precedence list by <strong><em>STklos</em></strong> algorithm can be different than the one given by
the CLOS one in some subtle situations.  Taking the <code>F</code> class shown in <a href="_stklos_object_system.html#class_hierarchy">Figure 1</a>,
the <strong><em>STklos</em></strong> calculated class precedence list is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">F</span> <span class="nv">D</span> <span class="nv">E</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> <span class="nv">&lt;object&gt;</span> <span class="nv">&lt;top&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>whereas it would be the following list with a CLOS-like algorithm:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">F</span> <span class="nv">D</span> <span class="nv">E</span> <span class="nv">A</span> <span class="nv">C</span> <span class="nv">B</span> <span class="nv">&lt;object&gt;</span> <span class="nv">&lt;top&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p> However, it is usually considered a bad idea for
programmers to rely on exactly what the order is.  If the order for some
superclasses is important, it can be expressed directly in the class
definition.  The precedence list of a class can be obtained by the function
<code>class-precedence-list</code>.  This function returns a ordered list whose first
element is the most specific class.  For instance,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">class-precedence-list</span> <span class="nv">D</span><span class="p">)</span>
    <span class="nv">=&gt;</span> <span class="p">(</span><span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">D</span> <span class="mi">81</span><span class="nv">aebb8</span><span class="p">]</span> <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">A</span> <span class="mi">81</span><span class="nv">aab88</span><span class="p">]</span>
        <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">B</span> <span class="mi">81</span><span class="nv">aa720</span><span class="p">]</span> <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;object&gt;</span> <span class="mi">80</span><span class="nv">eff90</span><span class="p">]</span>
        <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;top&gt;</span> <span class="mi">80</span><span class="nv">effa8</span><span class="p">])</span></code></pre>
</div>
</div>
<div class="paragraph">
<p> However, this result is hard to read; using the function
<code>class-name</code> yields a clearer result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">map</span> <span class="nv">class-name</span> <span class="p">(</span><span class="nf">class-precedence-list</span> <span class="nv">D</span><span class="p">))</span>
  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">D</span> <span class="nv">A</span> <span class="nv">B</span> <span class="nv">&lt;object&gt;</span> <span class="nv">&lt;top&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generic_function">8.2.3. Generic function</h4>
<div class="sect4">
<h5 id="_generic_functions_and_methods">Generic functions and methods</h5>
<div class="paragraph">
<p>


Neither <strong><em>STklos</em></strong> nor CLOS use the message passing mechanism
for methods as most Object Oriented languages do.  Instead, they
use the notion of <strong><em>generic function</em></strong>.A generic function
can be seen as a "<strong><em>tanker</em></strong>" of methods.  When the
evaluator requests the application of a generic function, all the
applicable methods of this generic function will be grabbed and
the most specific among them will be applied.  We say that a
method <code>M</code> is <strong><em>more specific</em></strong> than a method <code>M'</code>
if the class of its parameters are more specific than the <code>M'</code>
ones.  To be more precise, when a generic function must be
"<strong><em>called</em></strong>" the system</p>
</div>
<div class="ulist">
<ul>
<li>
<p>searchs among all the generic function methods those which
are applicable (i.e.  the ones which filter on types which are
<strong><em>compatible</em></strong> with the actual argument list),</p>
</li>
<li>
<p>sorts the list of applicable methods in the "<strong><em>most specific</em></strong>"
order,</p>
</li>
<li>
<p>calls the most specific method of this list (i.e.  the
first of the list of sorted methods).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>

The definition of a generic function is done with the
<code>define-generic</code> macro. Definition of a new method is
done with the <code>define-method</code> macro.</p>
</div>
<div class="paragraph">
<p>Consider the following definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-generic</span> <span class="nv">M</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span><span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;integer&gt;</span><span class="p">)</span> <span class="nv">b</span><span class="p">)</span> <span class="ss">'integer</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span><span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;real&gt;</span><span class="p">)</span>    <span class="nv">b</span><span class="p">)</span> <span class="ss">'real</span><span class="p">)</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span>             <span class="ss">'top</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>define-generic</code> call defines <code>M</code> as a
generic function.  Note that the signature of the generic
function is not given upon definition, contrarily to CLOS.  This
permits methods with different signatures for a given generic
function, as we shall see later.  The three next lines define
methods for the <code>M</code> generic function.  Each method uses a
sequence of <strong><em>parameter specializers</em></strong> that specify when
the given method is applicable.  A specializer permits to
indicate the class a parameter must belong (directly or
indirectly) to be applicable.  If no specializer is given, the
system defaults it to <code>&lt;top&gt;</code>&gt;.  Thus, the first method
definition is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span><span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;integer&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">&lt;top&gt;</span><span class="p">))</span> <span class="ss">'integer</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let us look at some possible calls to generic
function <code>M</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">M</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>      <span class="nv">=&gt;</span> <span class="nv">integer</span>
<span class="p">(</span><span class="nf">M</span> <span class="mi">2</span> <span class="no">#t</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="nv">integer</span>
<span class="p">(</span><span class="nf">M</span> <span class="mf">1.2</span> <span class="ss">'a</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="nv">real</span>
<span class="p">(</span><span class="nf">M</span> <span class="no">#t</span> <span class="no">#f</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="nv">top</span>
<span class="p">(</span><span class="nf">M</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="nv">error</span> <span class="p">(</span><span class="nf">no</span> <span class="nv">method</span> <span class="nv">with</span> <span class="mi">3</span> <span class="nv">parameters</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding methods use only one specializer per parameter
list. Of course, each parameter can use a specializer.  In this
case, the parameter list is scanned from left to right to
determine the applicability of a method.  Suppose we declare now</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span> <span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;integer&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">&lt;number&gt;</span><span class="p">))</span>
    <span class="ss">'integer-number</span><span class="p">)</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span> <span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;integer&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">&lt;real&gt;</span><span class="p">))</span>
    <span class="ss">'integer-real</span><span class="p">)</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span> <span class="p">(</span><span class="nf">a</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">&lt;number&gt;</span><span class="p">))</span>
    <span class="ss">'top-number</span><span class="p">)</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">M</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
    <span class="ss">'three-parameters</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, we have</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">M</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="nv">integer-integer</span>
<span class="p">(</span><span class="nf">M</span> <span class="mi">1</span> <span class="mf">1.0</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="nv">integer-real</span>
<span class="p">(</span><span class="nf">M</span> <span class="ss">'a</span> <span class="mi">1</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="nv">top-number</span>
<span class="p">(</span><span class="nf">M</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="nv">three-parameters</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Before defining a new generic function <code>define-generic,</code> verifies if
the symbol given as parameter is already bound to a procedure in the
current environment.  If so, this procedure is added, as a method to
the newly created generic function.  For instance:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-generic</span> <span class="nv">log</span><span class="p">)</span>  <span class="c1">; transform "log" in a generic function</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">log</span> <span class="p">((</span><span class="nf">s</span> <span class="nv">&lt;string&gt;</span><span class="p">)</span> <span class="o">.</span> <span class="nv">l</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">apply</span> <span class="nv">format</span>  <span class="p">(</span><span class="nf">current-error-port</span><span class="p">)</span> <span class="nv">s</span> <span class="nv">l</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">newline</span> <span class="p">(</span><span class="nf">current-error-port</span><span class="p">)))</span>

<span class="p">(</span><span class="nb">log</span> <span class="s">"Hello, ~a"</span> <span class="s">"world"</span><span class="p">)</span>      <span class="nv">|-</span> <span class="nv">Hello,</span> <span class="nv">world</span>
<span class="p">(</span><span class="nb">log</span> <span class="mi">1</span><span class="p">)</span>                        <span class="nv">=&gt;</span> <span class="mi">0</span> <span class="c1">; standard "log" procedure</span></code></pre>
</div>
</div>
</li>
<li>
<p><code>define-method</code> automatically defines the
generic function if it has not been defined before.
Consequently, most of the time, the <code>define-generic</code> is
not needed.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_next_method">Next-method</h5>
<div class="paragraph">
<p>

When a generic function is called, the list of applicable
methods is built.  As mentioned before, the most specific method
of this list is applied (see <a href="_stklos_object_system.html#_generic_function">Section 8.2.3</a>).</p>
</div>
<div class="paragraph">
<p>This method may call, if needed, the next method in the list of
applicable methods.  This is done by using the special form
<code>next-method</code>.  Consider the following definitions</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">Test</span><span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;integer&gt;</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">cons</span> <span class="ss">'integer</span> <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">Test</span><span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;number&gt;</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">cons</span> <span class="ss">'number</span>  <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">Test</span><span class="p">(</span><span class="nf">a</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">list</span> <span class="ss">'top</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With those definitions, we have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">Test</span> <span class="mi">1</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">integer</span> <span class="nv">number</span> <span class="nv">top</span><span class="p">)</span>
<span class="p">(</span><span class="nf">Test</span> <span class="mf">1.0</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">number</span> <span class="nv">top</span><span class="p">)</span>
<span class="p">(</span><span class="nf">Test</span> <span class="no">#t</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">top</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_standard_generic_functions">Standard  generic functions</h5>
<div class="paragraph">
<p>

<strong>Printing objects</strong></p>
</div>
<div class="paragraph">
<p>When the Scheme primitives <code>write</code> or <code>display</code> are called with a
parameter which is an object, the <code>write-object</code> or <code>display-object</code>
generic functions are called with this object and the port to which
the printing must be done as parameters.  This facility permits to
define a customized printing for a class of objects by simply defining
a new method for this class.  So, defining a new printing method
overloads the standard printing method (which just prints the class of
the object and its hexadecimal address).</p>
</div>
<div class="paragraph">
<p>For instance, we can define a customized printing for the <code>&lt;point&gt;</code>
used before as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">display-object</span> <span class="p">((</span><span class="nf">p</span> <span class="nv">&lt;point&gt;</span><span class="p">)</span> <span class="nv">port</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="nv">port</span> <span class="s">"&lt;Point x=~S y=~S&gt;"</span> <span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">p</span> <span class="ss">'x</span><span class="p">)</span> <span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">p</span> <span class="ss">'y</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this definition, we have</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;point&gt;</span> <span class="nv">:x</span> <span class="mi">1</span> <span class="nv">:y</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nb">display</span> <span class="nv">p</span><span class="p">)</span>                         <span class="nv">|=</span> <span class="nv">&lt;Point</span> <span class="nv">x=1</span> <span class="nv">y=2&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Scheme primitive <code>write</code> tries to write objects, in such a way
that they are readable back with the <code>read</code> primitive.  Consequently,
we can define the writing of a <code>&lt;point&gt;</code> as a form which, when read,
will build back this point:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">write-object</span> <span class="p">((</span><span class="nf">p</span> <span class="nv">&lt;point&gt;</span><span class="p">)</span> <span class="nv">port</span><span class="p">)</span>
 <span class="p">(</span><span class="nf">format</span> <span class="nv">port</span> <span class="s">"#,(make &lt;point&gt; :x ~S :y ~S)"</span>
              <span class="p">(</span><span class="nf">get-x</span> <span class="nv">p</span><span class="p">)</span> <span class="p">(</span><span class="nf">get-y</span> <span class="nv">p</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this method, writing the <code>p</code> point defined before
prints the following text on the output port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">#,</span><span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;point&gt;</span> <span class="nv">:x</span> <span class="mi">1</span> <span class="nv">:y</span> <span class="mi">2</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note here the usage of the <code>#,</code>  notation of <strong><a href="http://srfi.schemers.org/srfi-10/srfi-10.html">SRFI-10</a></strong> (<em>Sharp Comma External Form</em>) used here
to "evaluate" the form when reading it. We suppose here that we are in a context
where we already defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-reader-ctor</span> <span class="ss">'make</span> <span class="p">(</span><span class="k">lambda</span> <span class="nv">l</span> <span class="p">(</span><span class="nb">eval</span> <span class="o">`</span><span class="p">(</span><span class="nf">make</span> <span class="o">,@</span><span class="nv">l</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Comparing objects</strong><br>


When objects are compared with the <code>eqv?</code> or <code>equal?</code> Scheme standard
primitives, <strong><em>STklos</em></strong> calls the <code>object-eqv?</code> or <code>object-equal?</code>
generic functions.  This facility permits to define a customized
comparison function for a class of objects by simply defining a new
method for this class.  Defining a new comparison method overloads the
standard comparaison method (which always returns <code>#f</code>).  For instance
we could define the following method to compare points:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">object-eqv?</span> <span class="p">((</span><span class="nf">a</span> <span class="nv">&lt;point&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="nv">&lt;point&gt;</span><span class="p">))</span>
  <span class="p">(</span><span class="k">and</span> <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="nf">point-x</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-x</span> <span class="nv">b</span><span class="p">))</span>
       <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="nf">point-y</span> <span class="nv">a</span><span class="p">)</span> <span class="p">(</span><span class="nf">point-y</span> <span class="nv">b</span><span class="p">))))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_object_system_main_functions_and_syntaxes">8.3. Object System Main Functions and Syntaxes</h3>
<div class="sect3">
<h4 id="_classes_and_instances">8.3.1. Classes and Instances</h4>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-class name supers slots . options)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Creates a class whose name is <code>name</code>, and whose superclasses are in the
list <code>supers</code>, with the slots specified by the list <code>slots</code>.</p>
</div>
<div class="paragraph">
<p>As an example, this is the definition of a point:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;point&gt;</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In another example, a class <code>&lt;circle&gt;</code> that inherits <code>&lt;point&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;circle&gt;</span> <span class="p">(</span><span class="nf">&lt;point&gt;</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">radius</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following options can be passed to slots:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>:init-form</code> is the default value for the slot.</p>
</li>
<li>
<p><code>:init-keyword</code> is the keyword for initializing the slot.</p>
</li>
<li>
<p><code>:getter</code> is the name of the getter method.</p>
</li>
<li>
<p><code>:setter</code> is the name of the setter method.</p>
</li>
<li>
<p><code>:accessor</code> is the name of the accessor (setter and getter) method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;point&gt;</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">x</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:getter</span> <span class="nv">get-x</span> <span class="nv">:setter</span> <span class="nv">set-x!</span> <span class="nv">:init-keyword</span> <span class="nv">:x</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">y</span> <span class="nv">:init-form</span> <span class="mi">0</span> <span class="nv">:getter</span> <span class="nv">get-y</span> <span class="nv">:setter</span> <span class="nv">set-y!</span> <span class="nv">:init-keyword</span> <span class="nv">:y</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> also defines setters for the specified getters, so the following
will work with the definition of <code>&lt;point&gt;</code> given above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">my-point</span> <span class="ss">'x</span><span class="p">)</span> <span class="mi">50</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Accessors, are methods which can be used as getter and setter, as shown bellow</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;circle&gt;</span> <span class="p">(</span><span class="nf">&lt;point&gt;</span><span class="p">)</span>
  <span class="p">((</span><span class="nf">radius</span> <span class="nv">:accessor</span> <span class="nv">radius</span> <span class="nv">:init-keyword</span> <span class="nv">:radius</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;circle&gt;</span> <span class="nv">:radius</span> <span class="mi">100</span><span class="p">))</span>
<span class="p">(</span><span class="nf">radius</span> <span class="nv">x</span><span class="p">)</span>                             <span class="nv">=&gt;</span> <span class="mi">100</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">radius</span> <span class="nv">x</span><span class="p">)</span> <span class="mi">200</span><span class="p">)</span>
<span class="p">(</span><span class="nf">radius</span> <span class="nv">x</span><span class="p">)</span>                             <span class="nv">=&gt;</span> <span class="mi">200</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(allocate-instance c init-args)</code></strong><br>
<strong><code>(make-instance c)</code></strong><br>
<strong><code>(make c)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Make-instance</code> creates and initializes an instance of class <code>c</code>.
<code>Allocate-instance</code> is similar, but only allocates the instance,
without initializing it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;X&gt;</span> <span class="p">()</span> <span class="p">((</span><span class="nf">xx</span> <span class="nv">:init-form</span> <span class="mi">10</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">my-x</span> <span class="p">(</span><span class="nf">make-instance</span> <span class="nv">&lt;X&gt;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">describe</span> <span class="nv">my-x</span><span class="p">)</span>
<span class="o">#</span><span class="p">[</span><span class="nf">&lt;X&gt;</span> <span class="mi">7</span><span class="nv">fbd2e3075d0</span><span class="p">]</span> <span class="nv">is</span> <span class="nv">an</span> <span class="nv">an</span> <span class="nv">instance</span> <span class="nv">of</span> <span class="nv">class</span> <span class="nv">&lt;X&gt;</span><span class="o">.</span>
<span class="nv">The</span> <span class="nv">only</span> <span class="nv">slot</span> <span class="nv">is:</span>
  <span class="nv">xx</span> <span class="nv">=</span> <span class="mi">10</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">my-other-x</span> <span class="p">(</span><span class="nf">allocate-instance</span> <span class="nv">&lt;X&gt;</span> <span class="mi">20</span><span class="p">))</span>
<span class="p">(</span><span class="nf">describe</span> <span class="nv">y</span><span class="p">)</span>
<span class="o">#</span><span class="p">[</span><span class="nf">&lt;X&gt;</span> <span class="mi">7</span><span class="nv">fbd2e2bdab0</span><span class="p">]</span> <span class="nv">is</span> <span class="nv">an</span> <span class="nv">an</span> <span class="nv">instance</span> <span class="nv">of</span> <span class="nv">class</span> <span class="nv">&lt;X&gt;</span><span class="o">.</span>
<span class="nv">The</span> <span class="nv">only</span> <span class="nv">slot</span> <span class="nv">is:</span>
  <span class="nv">xx</span> <span class="nv">=</span> <span class="o">#</span><span class="p">[</span><span class="nf">unbound</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>make</code> is an alias for <code>make-instance</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(class-name c)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of the class <code>c</code>,a s a symbol.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;A&gt;</span> <span class="p">()</span> <span class="p">())</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;A&gt;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">class-name</span> <span class="p">(</span><span class="nf">class-of</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="nv">&lt;A&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(class-of obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Return the class of object <code>obj</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;A&gt;</span> <span class="p">()</span> <span class="p">())</span>
<span class="p">(</span><span class="nf">class-of</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;A&gt;</span><span class="p">))</span>     <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;A&gt;</span> <span class="mi">7</span><span class="nv">f5dc5002a20</span><span class="p">]</span>
<span class="p">(</span><span class="nf">class-of</span> <span class="no">#t</span><span class="p">)</span>             <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;boolean&gt;</span> <span class="mi">7</span><span class="nv">f5dc551ade0</span><span class="p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(class-name c)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of the class <code>c</code>,a s a symbol.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;A&gt;</span> <span class="p">()</span> <span class="p">())</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;A&gt;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">class-name</span> <span class="p">(</span><span class="nf">class-of</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="nv">&lt;A&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(find-class name)</code></strong><br>
<strong><code>(find-class name default)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the class whose name is equal to symbol <code>name</code>. If <code>name</code> is not
a class instance, the <code>default</code> value is returned, if present.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(is-a? obj class)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an instance of <code>class</code>, and <code>#f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(ensure-metaclass class-list)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Given a list of classes, returns a class which is a superclass of all
the classes given. This superclass will be built so that it is a subclass
of the most specific classes posible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;A&gt;</span> <span class="p">()</span> <span class="p">())</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;B&gt;</span> <span class="p">(</span><span class="nf">&lt;A&gt;</span><span class="p">)</span> <span class="p">())</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;C&gt;</span> <span class="p">()</span> <span class="p">())</span>

<span class="p">(</span><span class="nf">ensure-metaclass</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">&lt;B&gt;</span> <span class="nv">&lt;A&gt;</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;B&gt;</span> <span class="mi">7</span><span class="nv">fea2b8a3c30</span><span class="p">]</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">m</span> <span class="p">(</span><span class="nf">ensure-metaclass</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">&lt;B&gt;</span> <span class="nv">&lt;A&gt;</span> <span class="nv">&lt;C&gt;</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">class-direct-superclasses</span> <span class="nv">m</span><span class="p">)</span>
  <span class="nv">=&gt;</span> <span class="p">(</span><span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;B&gt;</span> <span class="mi">7</span><span class="nv">fea2b8a3c30</span><span class="p">]</span> <span class="o">#</span><span class="p">[</span><span class="nf">&lt;class&gt;</span> <span class="nv">&lt;C&gt;</span> <span class="mi">7</span><span class="nv">fea2b8afb40</span><span class="p">])</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generic_functions_and_methods_2">8.3.2. Generic Functions and Methods</h4>
<div class="paragraph">
<p>Generic functions and methods are an important part of <strong><em>STklos</em></strong> object
system. A generic function is a function which can have several methods with a
behavior which depends of the type or the number of its parameters.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-generic gf)</code></strong><br>
<strong><code>(define-generic gf metaclass)</code></strong><br>
<strong><code>(define-generic gf :documentation str)</code></strong><br>
<strong><code>(define-generic gf metaclass :documentation str)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>This function creates a new generic function named <code>gf</code>. By default, the created
function is an instance of the class <code>&lt;generic&gt;</code>, except if <code>metaclass</code> is used.
Using a different metaclass permits to fine tune the way methods are applied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Generally, it is not necessary to use <code>define-generic</code> to declare a generic
function, since it is created the first time a method  with the name of that function
is created. However, for the sake of documentation, or to export a generic function
from a module which do not define methods, it is possible also to explicitly
define the generic function before its methods.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>eject-eq</strong> (define-method gf args body)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The primitive <code>define-method</code> creates a generic method that will be added to a
generic function <code>gf</code>, having arguments <code>args</code> and body <code>body</code>.
<code>Args</code> is a list of arguments, and each argument can be either a single
symbol (the argument name) or an argument specification.
In its simplest form, a generic method behaves a lot like an ordinary
procedure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">square</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>

<span class="p">(</span><span class="nf">square</span> <span class="mi">10</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">100</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, <code>x</code> is the only argument to the method, and it is
specified as a single symbol, which means that <strong><em>any</em></strong> type of argument will
be matched and this method will be used.</p>
</div>
<div class="paragraph">
<p>An argument may also be specified in the form of a list with two elements:
the argument name and its class. The method will only be applicable when its
arguments are of the specified classes (or types).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">++</span> <span class="p">(</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">&lt;string&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="nv">&lt;string&gt;</span><span class="p">)</span> <span class="p">)</span>
  <span class="p">(</span><span class="nb">string-append</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">++</span> <span class="p">(</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">&lt;number&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="nv">&lt;number&gt;</span><span class="p">)</span> <span class="p">)</span>
  <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">++</span> <span class="p">(</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">&lt;string&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="nv">&lt;number&gt;</span><span class="p">)</span> <span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="p">(</span><span class="nb">string-append</span> <span class="nv">x</span> <span class="s">"~a"</span><span class="p">)</span> <span class="nv">y</span><span class="p">))</span>

<span class="p">(</span><span class="nf">++</span> <span class="s">"abc"</span> <span class="s">"def"</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="s">"abcdef"</span>
<span class="p">(</span><span class="nf">++</span> <span class="mi">2</span> <span class="mf">3.5</span><span class="p">)</span>         <span class="nv">=&gt;</span> <span class="mf">5.5</span>
<span class="p">(</span><span class="nf">++</span> <span class="mi">2</span> <span class="mi">2-3</span><span class="nv">i</span><span class="p">)</span>        <span class="nv">=&gt;</span> <span class="mi">4-3</span><span class="nv">i</span>
<span class="p">(</span><span class="nf">++</span> <span class="s">"number: "</span> <span class="mi">10</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="s">"number: 10"</span>
<span class="p">(</span><span class="nf">++</span> <span class="mi">3</span> <span class="s">"wrong"</span><span class="p">)</span>     <span class="nv">=&gt;</span> <span class="nv">error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, three methods are added to the generic function <code>++</code>,
and when the generic function is called, the appropriate method is chosen.
When no method is applicable, an error is signaled.</p>
</div>
<div class="paragraph">
<p>The classes matched in the example are <code>&lt;string&gt;</code> and <code>&lt;number&gt;</code>, but any
class can be used. All Scheme types are built-in classes in STklos:</p>
</div>
<div class="paragraph">
<p>&lt;boolean&gt;  &lt;null&gt;
&lt;char&gt;     &lt;object&gt;
&lt;class&gt;    &lt;pair&gt;
&lt;complex&gt;  &lt;procedure&gt;
&lt;eof&gt;      &lt;rational&gt;
&lt;integer&gt;  &lt;real&gt;
&lt;list&gt;     &lt;symbol&gt;
&lt;vector&gt;  &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>User-defined classes can also be used (and this is the main original use case
for generic functions). A very simple example follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;figure&gt;</span> <span class="p">()</span>
  <span class="p">((</span><span class="nf">pos-x</span> <span class="nv">:getter</span> <span class="nv">pos-x</span> <span class="nv">:init-keyword</span> <span class="nv">:pos-x</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">pos-y</span> <span class="nv">:getter</span> <span class="nv">pos-y</span> <span class="nv">:init-keyword</span> <span class="nv">:pos-y</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;circle&gt;</span> <span class="p">(</span><span class="nf">&lt;figure&gt;</span><span class="p">)</span>
  <span class="p">((</span><span class="nf">radius</span> <span class="nv">:getter</span> <span class="nv">radius</span> <span class="nv">:init-keyword</span> <span class="nv">:radius</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;square&gt;</span> <span class="p">(</span><span class="nf">&lt;figure&gt;</span><span class="p">)</span>
  <span class="p">((</span><span class="nf">side</span> <span class="nv">:getter</span> <span class="nv">side</span> <span class="nv">:init-keyword</span> <span class="nv">:side</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">describe-figure</span> <span class="p">(</span> <span class="p">(</span><span class="nf">c</span> <span class="nv">&lt;circle&gt;</span><span class="p">)</span> <span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">"A circle at (~a, ~a), with radius ~a.~%"</span>
          <span class="p">(</span><span class="nf">pos-x</span> <span class="nv">c</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">pos-y</span> <span class="nv">c</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">radius</span> <span class="nv">c</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">define-method</span> <span class="nv">describe-figure</span> <span class="p">(</span> <span class="p">(</span><span class="nf">s</span> <span class="nv">&lt;square&gt;</span><span class="p">)</span> <span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">"A square centered at (~a, ~a), with side ~a.~%"</span>
          <span class="p">(</span><span class="nf">pos-x</span> <span class="nv">s</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">pos-y</span> <span class="nv">s</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">side</span> <span class="nv">s</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">sq</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;square&gt;</span> <span class="nv">:pos-x</span> <span class="mi">1</span> <span class="nv">:pos-y</span> <span class="mi">2</span> <span class="nv">:side</span> <span class="mi">10</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">ci</span> <span class="p">(</span><span class="nf">make</span> <span class="nv">&lt;circle&gt;</span> <span class="nv">:pos-x</span> <span class="mi">2</span> <span class="nv">:pos-y</span> <span class="mi">2</span> <span class="nv">:radius</span> <span class="mi">5</span><span class="p">))</span>

<span class="p">(</span><span class="nf">describe-figure</span> <span class="nv">sq</span><span class="p">)</span>
  <span class="nv">=&gt;</span> <span class="s">"A square centered at (1, 2), with side 10.n"</span>

<span class="p">(</span><span class="nf">describe-figure</span> <span class="nv">ci</span><span class="p">)</span>
  <span class="nv">=&gt;</span> <span class="s">"A circle at (2, 2), with radius 5.n"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Generic methods can be created with different number of arguments, and that
will also be one criterion to match the method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">process</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">process</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span>

<span class="p">(</span><span class="nf">process</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">6</span>
<span class="p">(</span><span class="nf">process</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="mi">9</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(next-method)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Inside a method, one can use the <code>(next-method)</code>  to call the next
applicable method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-method</span> <span class="nv">class-list</span> <span class="p">((</span><span class="nf">obj</span> <span class="nv">&lt;integer&gt;</span><span class="p">))</span>  <span class="p">(</span><span class="nb">cons</span> <span class="ss">'integer</span>  <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">class-list</span> <span class="p">((</span><span class="nf">obj</span> <span class="nv">&lt;rational&gt;</span><span class="p">))</span> <span class="p">(</span><span class="nb">cons</span> <span class="ss">'rational</span> <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">class-list</span> <span class="p">((</span><span class="nf">obj</span> <span class="nv">&lt;real&gt;</span><span class="p">))</span>     <span class="p">(</span><span class="nb">cons</span> <span class="ss">'real</span>     <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">class-list</span> <span class="p">((</span><span class="nf">obj</span> <span class="nv">&lt;complex&gt;</span><span class="p">))</span>  <span class="p">(</span><span class="nb">cons</span> <span class="ss">'complex</span>  <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">class-list</span> <span class="p">((</span><span class="nf">obj</span> <span class="nv">&lt;number&gt;</span><span class="p">))</span>   <span class="p">(</span><span class="nb">cons</span> <span class="ss">'number</span>   <span class="p">(</span><span class="nf">next-method</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">define-method</span> <span class="nv">class-list</span> <span class="p">((</span><span class="nf">obj</span> <span class="nv">&lt;top&gt;</span><span class="p">))</span>      <span class="p">(</span><span class="nb">list</span> <span class="ss">'top</span><span class="p">))</span>

<span class="p">(</span><span class="nf">class-list</span> <span class="mf">2.3</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">real</span> <span class="nv">complex</span> <span class="nv">number</span> <span class="nv">top</span><span class="p">)</span>
<span class="p">(</span><span class="nf">class-list</span> <span class="mi">2</span><span class="p">)</span>    <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">integer</span> <span class="nv">rational</span> <span class="nv">real</span> <span class="nv">complex</span> <span class="nv">number</span> <span class="nv">top</span><span class="p">)</span>
<span class="p">(</span><span class="nf">class-list</span> <span class="mi">1-2</span><span class="nv">i</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">complex</span> <span class="nv">number</span> <span class="nv">top</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_misc_2">8.3.3. Misc.</h4>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(class-direct-superclasses c)</code></strong><br>
<strong><code>(class-direct-subclasses c)</code></strong><br>
<strong><code>(class-precedence-list c)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>class-direct-superclasses</code> and <code>class-direct-subclasses</code> return a list with
all direct superclasses or subclasses of class <code>c</code>.</p>
</div>
<div class="paragraph">
<p><code>class-precedence-list</code> returns the precedence list for class <code>c</code>. If
<code>c</code> is a superclass of several classes, this list shows what precedence
each superlclass has when resolving names of attributes and methods in
<code>c</code>.</p>
</div>
<div class="paragraph">
<p>The items returned in the list are classes. Use <code>class-name</code> to obtain
their names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;A&gt;</span> <span class="p">()</span> <span class="p">(</span><span class="nf">slot-one</span> <span class="nv">slot-two</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;B&gt;</span> <span class="p">()</span> <span class="p">())</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;C&gt;</span> <span class="p">(</span><span class="nf">&lt;A&gt;</span> <span class="nv">&lt;B&gt;</span><span class="p">)</span> <span class="p">(</span><span class="nf">slot-one</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;D&gt;</span> <span class="p">(</span><span class="nf">&lt;A&gt;</span><span class="p">)</span> <span class="p">())</span>

<span class="p">(</span><span class="nb">map</span> <span class="nv">class-name</span> <span class="p">(</span><span class="nf">class-direct-superclasses</span> <span class="nv">&lt;C&gt;</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">&lt;A&gt;</span> <span class="nv">&lt;B&gt;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">map</span> <span class="nv">class-name</span> <span class="p">(</span><span class="nf">class-direct-superclasses</span> <span class="nv">&lt;D&gt;</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">&lt;A&gt;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">map</span> <span class="nv">class-name</span> <span class="p">(</span><span class="nf">class-direct-subclasses</span> <span class="nv">&lt;A&gt;</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">&lt;D&gt;</span> <span class="nv">&lt;C&gt;</span><span class="p">)</span>
<span class="p">(</span><span class="nb">map</span> <span class="nv">class-name</span> <span class="p">(</span><span class="nf">class-precedence-list</span> <span class="nv">&lt;C&gt;</span><span class="p">))</span>     <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">&lt;C&gt;</span> <span class="nv">&lt;A&gt;</span> <span class="nv">&lt;B&gt;</span> <span class="nv">&lt;object&gt;</span> <span class="nv">&lt;top&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Slot-one</code> in class <code>&lt;C&gt;</code> refers to the slot defined in <code>&lt;C&gt;</code> (because
it is present in both <code>&lt;A&gt;</code> and <code>&lt;C&gt;</code>, but <code>&lt;C&gt;</code> has precedence over
<code>&lt;A&gt;</code>). <code>Slot-two</code> in <code>&lt;C&gt;</code> can only be the one defined in <code>&lt;A&gt;</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(class-slots c)</code></strong><br>
<strong><code>(class-direct-slots c)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Class-slots</code> returns a list of the slots in class <code>c</code>,  including
those inherited from other classes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">class-slots</span> <span class="nv">&lt;A&gt;</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">a</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">(</span><span class="nf">class-slots</span> <span class="nv">&lt;C&gt;</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">b</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">a</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">3</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Class-direct-slots</code> returns a list with the names of the slots that
were defined directly in the class (excluding the inherited slots).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">class-direct-slots</span> <span class="nv">&lt;B&gt;</span><span class="p">)</span> <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">a</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">3</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(class-slot-definition c s)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Class-slot-definition</code> returns the definition of slot <code>s</code>
in class <code>c</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-class</span> <span class="nv">&lt;A&gt;</span> <span class="p">()</span>
  <span class="p">((</span><span class="nf">slot-one</span> <span class="nv">:init-form</span> <span class="ss">'none</span> <span class="nv">:getter</span> <span class="nv">get-one</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">slot-two</span> <span class="nv">:init-form</span> <span class="ss">'nada</span> <span class="nv">:init-keyword</span> <span class="nv">:two</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">class-slot-definition</span> <span class="nv">&lt;A&gt;</span> <span class="ss">'slot-two</span><span class="p">)</span>
  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">slot-two</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="ss">'nada</span> <span class="o">#</span><span class="nv">:init-keyword</span> <span class="o">#</span><span class="nv">:two</span><span class="p">)</span>

<span class="p">(</span><span class="nf">class-slots</span> <span class="nv">&lt;A&gt;</span><span class="p">)</span>
  <span class="nv">=&gt;</span> <span class="p">((</span><span class="nf">slot-one</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="ss">'none</span> <span class="o">#</span><span class="nv">:getter</span> <span class="nv">get-one</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">slot-two</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="ss">'nada</span> <span class="o">#</span><span class="nv">:init-keyword</span> <span class="o">#</span><span class="nv">:two</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>






</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(slot-definition-name s)</code></strong><br>
<strong><code>(slot-definition-options s)</code></strong><br>
<strong><code>(slot-definition-allocation s)</code></strong><br>
<strong><code>(slot-definition-getter s)</code></strong><br>
<strong><code>(slot-definition-setter s)</code></strong><br>
<strong><code>(slot-definition-accessor s)</code></strong><br>
<strong><code>(slot-definition-init-form s)</code></strong><br>
<strong><code>(slot-definition-init-keyword s)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>These procedures operate on slot definitions (the lists included in class
definitions). They return the slot name, the list of options, the slot
allocation, and the getter, setter, accessor, init-form and init-keyword
of a slot, as returned by <code>class-slots</code> or by <code>class-slot-definition</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">slot-definition-name</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">0</span>  <span class="o">#</span><span class="nv">:accessor</span> <span class="nv">x</span><span class="p">))</span>       <span class="nv">=&gt;</span> <span class="nv">x</span>
<span class="p">(</span><span class="nf">slot-definition-accessor</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">0</span>  <span class="o">#</span><span class="nv">:accessor</span> <span class="nv">x</span><span class="p">))</span>   <span class="nv">=&gt;</span> <span class="nv">x</span>
<span class="p">(</span><span class="nf">slot-definition-allocation</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">0</span>  <span class="o">#</span><span class="nv">:accessor</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="nv">instance</span>
<span class="p">(</span><span class="nf">slot-definition-options</span> <span class="o">'</span><span class="p">(</span><span class="nf">x</span> <span class="o">#</span><span class="nv">:init-form</span> <span class="mi">0</span> <span class="o">#</span><span class="nv">:accessor</span> <span class="nv">x</span><span class="p">))</span>
 <span class="nv">=&gt;</span> <span class="p">(</span><span class="o">#</span><span class="nv">:init-form</span> <span class="mi">0</span> <span class="o">#</span><span class="nv">:accessor</span> <span class="nv">x</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_exceptions_and_conditions.html">Exceptions and Conditions</a> | ↑ Up: <a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.00)</a> | Next: <a href="_threads_mutexes_and_condition_variables.html">Threads, Mutexes and Condition Variables</a> →</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Documentation about hygienic macros has been stolen in the SLIB manual
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. In fact <code>define-module</code> on a given name defines a new module only the first time it is invoked on this name. By this way, interactively reloading a module does not define a new entity, and the other modules which use it are not altered.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. This transcript uses the default toplevel loop             which displays the name of the current module in the evaluator             prompt.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Under Unix, you can simply connect to a listening socket with the <code>telnet</code> of <code>netcat</code> command. For the given example, this can be achieved with <code>netcat localhost 12345</code>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Port 13, if open, can be used for testing: making a connection to it permits to know the distant system&#8217;s idea of the time of day.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The "pattern matching compiler" has been written by Jean-Marie Geffroy and is part of the Manuel Serrano&#8217;s Bigloo compiler since several years <a href="_bibliography.html#Bigloo">[Bigloo]</a>
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. This section is an adaptation of Jeff Dalton&#8217;s (<a href="mailto:J.Dalton@ed.ac.uk">J.Dalton@ed.ac.uk</a>) "<strong><em>Brief introduction to CLOS</em></strong>" which can be found at <a href="http://www.aiai.ed.ac.uk/~jeff/clos-guide.html" class="bare">http://www.aiai.ed.ac.uk/~jeff/clos-guide.html</a>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-08-29 16:10:43 +0200
</div>
</div>
</body>
</html>