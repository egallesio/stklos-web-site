<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Erick Gallesio">
<title>STklos Reference Manual : (version 2.00)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cm {
  color: #75715e;
  font-style: italic;
}
pre.rouge .c1 {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cp {
  color: #75715e;
  font-weight: bold;
}
pre.rouge .cs {
  color: #75715e;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .err {
  color: #960050;
  background-color: #1e0010;
}
pre.rouge .gi {
  color: #ffffff;
  background-color: #324932;
}
pre.rouge .gd {
  color: #ffffff;
  background-color: #493131;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .k, pre.rouge .kv {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kc {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kd {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kp {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kr {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kt {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kn {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .ow {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .o {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .mf {
  color: #ae81ff;
}
pre.rouge .mh {
  color: #ae81ff;
}
pre.rouge .il {
  color: #ae81ff;
}
pre.rouge .mi {
  color: #ae81ff;
}
pre.rouge .mo {
  color: #ae81ff;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #ae81ff;
}
pre.rouge .se {
  color: #ae81ff;
}
pre.rouge .sa {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .sb {
  color: #e6db74;
}
pre.rouge .sc {
  color: #e6db74;
}
pre.rouge .sd {
  color: #e6db74;
}
pre.rouge .s2 {
  color: #e6db74;
}
pre.rouge .sh {
  color: #e6db74;
}
pre.rouge .si {
  color: #e6db74;
}
pre.rouge .sx {
  color: #e6db74;
}
pre.rouge .sr {
  color: #e6db74;
}
pre.rouge .s1 {
  color: #e6db74;
}
pre.rouge .ss {
  color: #e6db74;
}
pre.rouge .s, pre.rouge .dl {
  color: #e6db74;
}
pre.rouge .na {
  color: #a6e22e;
}
pre.rouge .nc {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nd {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .ne {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .no {
  color: #66d9ef;
}
pre.rouge .bp {
  color: #f8f8f2;
}
pre.rouge .nb {
  color: #f8f8f2;
}
pre.rouge .ni {
  color: #f8f8f2;
}
pre.rouge .nn {
  color: #f8f8f2;
}
pre.rouge .vc {
  color: #f8f8f2;
}
pre.rouge .vg {
  color: #f8f8f2;
}
pre.rouge .vi {
  color: #f8f8f2;
}
pre.rouge .nv, pre.rouge .vm {
  color: #f8f8f2;
}
pre.rouge .w {
  color: #f8f8f2;
}
pre.rouge .nl {
  color: #f8f8f2;
  font-weight: bold;
}
pre.rouge .nt {
  color: #f92672;
}
pre.rouge {
  color: #f8f8f2;
  background-color: #49483e;
}
</style>
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
    font-size: 90%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_expressions" class="book toc2 toc-left">
<div id="header">
<h1>STklos Reference Manual : (version 2.00)</h1>
<div class="details">
<span id="author" class="author">Erick Gallesio</span><br>
<span id="email" class="email"><a href="mailto:eg@stklos.net">eg@stklos.net</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.00)</a></span></p><ul class="sectlevel1">
<li><a href="_preface.html">Preface</a>
</li>
<li><a href="_introduction.html">1. Introduction</a>
</li>
<li><a href="_expressions.html"><span class="toc-current">2. Expressions</span></a>
<ul class="sectlevel2">
<li><a href="_expressions.html#_literal_expressions">2.1. Literal expressions</a>
</li>
<li><a href="_expressions.html#_procedures">2.2. Procedures</a>
</li>
<li><a href="_expressions.html#_assignments">2.3. Assignments</a>
</li>
<li><a href="_expressions.html#_conditionals">2.4. Conditionals</a>
</li>
<li><a href="_expressions.html#_binding_constructs">2.5. Binding Constructs</a>
</li>
<li><a href="_expressions.html#_sequencing">2.6. Sequencing</a>
</li>
<li><a href="_expressions.html#_iterations">2.7. Iterations</a>
</li>
<li><a href="_expressions.html#_delayed_evaluation">2.8. Delayed Evaluation</a>
</li>
<li><a href="_expressions.html#_quasiquotation">2.9. Quasiquotation</a>
</li>
<li><a href="_expressions.html#_macros">2.10. Macros</a>
</li>
</ul>
</li>
<li><a href="_program_structure.html">3. Program structure</a>
</li>
<li><a href="_standard_procedures.html">4. Standard Procedures</a>
</li>
<li><a href="_regular_expressions.html">5. Regular Expressions</a>
</li>
<li><a href="_pattern_matching.html">6. Pattern Matching</a>
</li>
<li><a href="_exceptions_and_conditions.html">7. Exceptions and Conditions</a>
</li>
<li><a href="_stklos_object_system.html">8. STklos Object System</a>
</li>
<li><a href="_threads_mutexes_and_condition_variables.html">9. Threads, Mutexes and Condition Variables</a>
</li>
<li><a href="_stklos_customization.html">10. STklos Customization</a>
</li>
<li><a href="_foreign_function_interface.html">11. Foreign Function Interface</a>
</li>
<li><a href="_using_the_slib_package.html">12. Using the SLIB package</a>
</li>
<li><a href="_srfis.html">13. SRFIs</a>
</li>
<li><a href="_bibliography.html">Bibliography</a>
</li>
<li><a href="_idiosync.html">Appendix C: STklos Idiosyncrasies</a>
</li>
<li><a href="FDL.html">Appendix D: GNU Free Documentation License</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_expressions">2. Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the main forms available in <strong><em>STklos</em></strong>. R<sup>5</sup>RS
constructions are given
very succinctly here for reference. See <a href="_bibliography.html#R5RS">[R5RS]</a> for a complete
description.</p>
</div>
<div class="sect2">
<h3 id="_literal_expressions">2.1. Literal expressions</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(quote &lt;datum&gt;)</code></strong><br>
<strong><code>'&lt;datum&gt;</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The quoting mechanism is identical to R<sup>5</sup>RS, except that keywords
constants  evaluate "to themselves" as numerical constants, string
constants, character constants, and boolean constants</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">'</span><span class="s">"abc"</span>     <span class="nv">=&gt;</span>  <span class="s">"abc"</span>
<span class="s">"abc"</span>      <span class="nv">=&gt;</span>  <span class="s">"abc"</span>
<span class="ss">'145932</span>    <span class="nv">=&gt;</span>  <span class="mi">145932</span>
<span class="mi">145932</span>     <span class="nv">=&gt;</span>  <span class="mi">145932</span>
<span class="o">'</span><span class="no">#t</span>        <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="no">#t</span>         <span class="nv">=&gt;</span>  <span class="no">#t</span>
<span class="nv">:foo</span>       <span class="nv">=&gt;</span>  <span class="nv">:foo</span>
<span class="ss">':foo</span>      <span class="nv">=&gt;</span>  <span class="nv">:foo</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
R<sup>5</sup>RS requires to quote constant lists and
constant vectors. This is not necessary with STklos.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_procedures">2.2. Procedures</h3>
<div class="paragraph">
<p>









</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(lambda &lt;formals&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>A lambda expression evaluates to a procedure. STklos lambda expression
have been extended to allow a optional and keyword parameters.
<code>&lt;formals&gt;</code> should have one of the following forms:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>(&lt;variable<sub>1</sub>&gt; &#8230;&#8203;)</code></dt>
<dd>
<p>The procedure takes a fixed number of arguments;
when the procedure is called, the arguments will be stored in the
bindings of the corresponding variables.  This form is identical to
R<sup>5</sup>RS.</p>
</dd>
<dt class="hdlist1"><code>&lt;variable&gt;</code></dt>
<dd>
<p>The procedure takes any number of arguments; when the
procedure is called, the sequence of actual arguments is converted into
a newly allocated list, and the list is stored in the binding of the
<code>&lt;variable&gt;</code>. This form is identical to R<sup>5</sup>RS.</p>
</dd>
<dt class="hdlist1"><code>(&lt;variable<sub>1</sub>&gt; &#8230;&#8203; &lt;variable<sub>n</sub>&gt; . &lt;variable<sub>n+1</sub>&gt;)</code></dt>
<dd>
<p>If a space-delimited
period precedes the last variable, then the procedure takes n or more
 arguments, where n is the number of formal arguments before the period
(there must be at least one). The value stored in the binding of the
last variable will be a newly allocated list of the actual arguments left
over after all the other actual arguments have been matched up against
the other formal arguments. This form is identical to R<sup>5</sup>RS.</p>
</dd>
<dt class="hdlist1"><code>(&lt;variable<sub>1</sub> &#8230;&#8203; &lt;variable<sub>n</sub>&gt; [:optional &#8230;&#8203;] [:rest &#8230;&#8203;] [:key &#8230;&#8203;])</code></dt>
<dd>
<p>This form is specific to STklos and allows to have procedure with
optional and keyword parameters. The form <code>:optional</code> allows to specify
optional parameters. All the parameters specified after <code>:optional</code> to the end
of <code>&lt;formals&gt;</code> (or until a <code>:rest</code> or <code>:key</code>) are optional parameters. An
optional parameter can declared as:</p>
<div class="ulist">
<ul>
<li>
<p><code>variable</code>: if a value is passed when the procedure is called, it will be
stored in the binding of the corresponding variable, otherwise the value <code>#f</code>
will be stored in it.</p>
</li>
<li>
<p><code>(variable value)</code>: if a value is passed when the procedure is called, it
will be stored in the binding of the corresponding variable, otherwise <code>value</code>
will be stored in it.</p>
</li>
<li>
<p><code>(variable value test?)</code>: if a value is passed when the procedure is called, it
will be stored in the binding of the corresponding variable, otherwise <code>value</code>
will be stored in it. Furthermore, <code>test?</code> will be given the value <code>#t</code> if
a value is passed for the given variable, otherwise <code>test?</code> is set to <code>#f</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Hereafter are some examples using <code>:optional</code> parameters</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">:optional</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">:optional</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="no">#f</span><span class="p">)</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">:optional</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">d</span> <span class="mi">100</span><span class="p">))</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">100</span><span class="p">)</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">:optional</span> <span class="nv">c</span> <span class="p">(</span><span class="nf">d</span> <span class="no">#f</span> <span class="nv">d?</span><span class="p">))</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">d?</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The form <code>:rest</code> parameter is similar to the dot notation seen before.
It is used before an identifier to collects the parameters in a single
binding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:rest</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span> <span class="mi">1</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="p">())</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:rest</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="p">(</span><span class="nf">2</span><span class="p">))</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:rest</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The form <code>:key</code> allows to use keyword parameter passing. All the parameters
specified after <code>:key</code> to the end of <code>&lt;formals&gt;</code> are keyword parameters. A
keyword  parameter can be declared using the three forms given for optional
parameters. Here are some examples illustrating how to declare and how to use
keyword parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:key</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="mi">1</span> <span class="nv">:c</span> <span class="mi">2</span> <span class="nv">:b</span> <span class="mi">3</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:key</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span> <span class="mi">1</span> <span class="nv">:c</span> <span class="mi">2</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="no">#f</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">((</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:key</span> <span class="p">(</span><span class="nf">b</span> <span class="mi">100</span> <span class="nv">b?</span><span class="p">)</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">b?</span><span class="p">))</span> <span class="mi">1</span> <span class="nv">:c</span> <span class="mi">2</span><span class="p">)</span>
                            <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">100</span> <span class="mi">2</span> <span class="no">#f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At last, here is an example showing <code>:optional</code> <code>:rest</code> and <code>:key</code> parameters</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">a</span> <span class="nv">:optional</span> <span class="nv">b</span> <span class="nv">:rest</span> <span class="nv">c</span> <span class="nv">:key</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)</span>
             <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">f</span> <span class="mi">1</span><span class="p">)</span>                       <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="no">#f</span> <span class="p">()</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span>
<span class="p">(</span><span class="nf">f</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>                     <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="p">()</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span>
<span class="p">(</span><span class="nf">f</span> <span class="mi">1</span> <span class="mi">2</span> <span class="nv">:d</span> <span class="mi">3</span> <span class="nv">:e</span> <span class="mi">4</span><span class="p">)</span>           <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="p">(</span><span class="nf">:d</span> <span class="mi">3</span> <span class="nv">:e</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="nf">f</span> <span class="mi">1</span> <span class="nv">:d</span> <span class="mi">3</span> <span class="nv">:e</span> <span class="mi">4</span><span class="p">)</span>             <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="no">#f</span> <span class="p">(</span><span class="nf">:d</span> <span class="mi">3</span> <span class="nv">:e</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(closure? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>&#35;t</code> if <code>obj</code> is a procedure created with the <code>lambda</code> syntax and
<code>&#35;f</code> otherwise.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(case-lambda &lt;clause&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Each <code>&lt;clause&gt;</code> should have the form <code>(&lt;formals&gt; &lt;body&gt;)</code>, where
<code>&lt;formals&gt;</code> is a formal arguments list as for <code>lambda</code>.
Each <code>&lt;body&gt;</code> is a <code>&lt;tail-body&gt;</code>, as defined in R<sup>5</sup>RS.</p>
</div>
<div class="paragraph">
<p>A <code>case-lambda</code> expression evaluates to a procedure that
accepts a variable number of arguments and is lexically scoped in
the same manner as procedures resulting from <code>lambda</code>
expressions. When the procedure is called with some arguments
<code>v1 &#8230;&#8203; vk</code>, then the first <code>&lt;clause&gt;</code> for which the arguments agree
with <code>&lt;formals&gt;</code> is selected, where agreement is specified as for the
<code>&lt;formals&gt;</code> of a <code>lambda</code> expression. The variables of <code>&lt;formals&gt;</code>
are bound to fresh locations, the values <code>v1 &#8230;&#8203; vk</code> are stored in those
locations, the <code>&lt;body&gt;</code> is evaluated in the extended environment,
and the results of <code>&lt;body&gt;</code> are returned as the results of the
procedure call.</p>
</div>
<div class="paragraph">
<p>It is an error for the arguments not to agree with the <code>&lt;formals&gt;</code>
of any <code>&lt;clause&gt;</code>.</p>
</div>
<div class="paragraph">
<p>This form is defined in <strong><a href="http://srfi.schemers.org/srfi-16/srfi-16.html">SRFI-16</a></strong> (<em>Syntax for procedures of variable arity</em>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"> <span class="p">(</span><span class="k">define</span> <span class="nv">plus</span>
   <span class="p">(</span><span class="nf">case-lambda</span>
    <span class="p">(()</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>
    <span class="p">((</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="nv">z</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">args</span> <span class="p">(</span><span class="nb">apply</span> <span class="nv">+</span> <span class="nv">args</span><span class="p">))))</span>

 <span class="p">(</span><span class="nf">plus</span><span class="p">)</span>                     <span class="nv">=&gt;</span> <span class="mi">0</span>
 <span class="p">(</span><span class="nf">plus</span> <span class="mi">1</span><span class="p">)</span>                   <span class="nv">=&gt;</span> <span class="mi">1</span>
 <span class="p">(</span><span class="nf">plus</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>               <span class="nv">=&gt;</span> <span class="mi">6</span>

 <span class="p">((</span><span class="nf">case-lambda</span>
   <span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="nv">a</span><span class="p">)</span>
   <span class="p">((</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)))</span>
  <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>                    <span class="nv">=&gt;</span> <span class="nv">error</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assignments">2.3. Assignments</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(set! &lt;variable&gt; &lt;expression&gt;)</code></strong><br>
<strong><code>(set! (&lt;proc&gt; &lt;arg&gt; &#8230;&#8203;) &lt;expression&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The first form of <code>set!</code> is the R<sup>5</sup>RS one:</p>
</div>
<div class="paragraph">
<p><code>&lt;Expression&gt;</code> is evaluated, and the resulting value is stored in
the location to which <code>&lt;variable&gt;</code> is bound. <code>&lt;Variable&gt;</code> must be bound
either in some region enclosing the <code>set!</code> expression or at top level.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="k">set!</span> <span class="nv">x</span> <span class="mi">4</span><span class="p">)</span>                <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="mi">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The second form of <code>set!</code> is defined in <strong><a href="http://srfi.schemers.org/srfi-17/srfi-17.html">SRFI-17</a></strong> (<em>Generalized set!</em>):</p>
</div>
<div class="paragraph">
<p>This special form <code>set!</code>
is extended so the first operand can be a procedure application, and not
just a variable. The procedure is typically one that extracts a component
from some data structure. Informally, when the procedure is called in the
first operand of <code>set!</code>, it causes the corresponding component to be
replaced by the second operand. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nb">vector-ref</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>would be equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">x</span> <span class="nv">i</span> <span class="nv">v</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each procedure that may be used as the first operand to <code>set!</code> must have
a corresponding <strong><em>setter</em></strong> procedure. The procedure <code>setter</code> (see below)
takes a procedure and returns the corresponding setter procedure.
So,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">proc</span> <span class="nv">arg</span> <span class="o">...</span><span class="p">)</span> <span class="nv">value</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to the call</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="nf">setter</span> <span class="nv">proc</span><span class="p">)</span> <span class="nv">arg</span> <span class="o">...</span> <span class="nv">value</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result of the <code>set!</code> expression is unspecified.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(setter proc)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the setter associated to a <code>proc</code>. Setters are defined in the
<strong><a href="http://srfi.schemers.org/srfi-17/srfi-17.html">SRFI-17</a></strong> (<em>Generalized set!</em>) document. A setter proc, can be used in a generalized
assignment, as described in <code>set!</code>.</p>
</div>
<div class="paragraph">
<p>To associate <code>s</code> to the procedure <code>p</code>, use the following form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">setter</span> <span class="nv">p</span><span class="p">)</span> <span class="nv">s</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For instance, we can write</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">setter</span> <span class="nv">car</span><span class="p">)</span> <span class="nv">set-car!</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following standard procedures have pre-defined setters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span>              <span class="nv">==</span> <span class="p">(</span><span class="nb">set-car!</span> <span class="nv">x</span> <span class="nv">v</span><span class="p">)</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span>              <span class="nv">==</span> <span class="p">(</span><span class="nb">set-cdr!</span> <span class="nv">x</span> <span class="nv">v</span><span class="p">)</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nb">string-ref</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span>     <span class="nv">==</span> <span class="p">(</span><span class="nb">string-set!</span> <span class="nv">x</span> <span class="nv">i</span> <span class="nv">v</span><span class="p">)</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nb">vector-ref</span> <span class="nv">x</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span>     <span class="nv">==</span> <span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">x</span> <span class="nv">i</span> <span class="nv">v</span><span class="p">)</span><span class="nv">!</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">slot-ref</span> <span class="nv">x</span> <span class="ss">'name</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span>   <span class="nv">==</span> <span class="p">(</span><span class="nf">slot-set!</span> <span class="nv">x</span> <span class="ss">'name</span> <span class="nv">v</span><span class="p">)</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">struct-ref</span> <span class="nv">x</span> <span class="ss">'name</span><span class="p">)</span> <span class="nv">v</span><span class="p">)</span> <span class="nv">==</span> <span class="p">(</span><span class="nf">struct-set!</span> <span class="nv">x</span> <span class="ss">'name</span> <span class="nv">v</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Furhermore, Parameter Objects (see <em><a href="_standard_procedures.html#_parameter_objects">Section 4.21</a></em>) are
their own setter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">real-precision</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="mi">15</span>
<span class="p">(</span><span class="k">set!</span> <span class="p">(</span><span class="nf">real-precision</span><span class="p">)</span> <span class="mi">12</span><span class="p">)</span>
<span class="p">(</span><span class="nf">real-precision</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="mi">12</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conditionals">2.4. Conditionals</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(if &lt;test&gt; &lt;consequent&gt; &lt;alternate&gt;)</code></strong><br>
<strong><code>(if &lt;test&gt; &lt;consequent&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>An <code>if</code> expression is evaluated as follows: first, <code>&lt;test&gt;</code> is
evaluated.  If it yields a true value, then <code>&lt;consequent&gt;</code> is
evaluated and its value(s) is(are) returned.  Otherwise <code>&lt;alternate&gt;</code>
is evaluated and its value(s) is(are) returned.  If <code>&lt;test&gt;</code> yields a
false value and no <code>&lt;alternate&gt;</code> is specified, then the result of the
expression is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span> <span class="ss">'yes</span> <span class="ss">'no</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="nv">yes</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="ss">'yes</span> <span class="ss">'no</span><span class="p">)</span>           <span class="nv">=&gt;</span>  <span class="nv">no</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">-</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">+</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="mi">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(cond &lt;clause1&gt; &lt;clause2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In a <code>cond</code>, each <code>&lt;clause&gt;</code> should be of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">&lt;test&gt;</span> <span class="nv">&lt;expression1&gt;</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>&lt;test&gt;</code> is any expression.  Alternatively, a <code>&lt;clause&gt;</code> may be
of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">&lt;test&gt;</span> <span class="nv">=&gt;</span> <span class="nv">&lt;expression&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The last <code>&lt;clause&gt;</code> may be an "else clause," which has the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">else</span> <span class="nv">&lt;expression1&gt;</span> <span class="nv">&lt;expression2&gt;</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A cond expression is evaluated by evaluating the <code>&lt;test&gt;</code> expressions
of successive <code>&lt;clause&gt;</code>s in order until one of them evaluates to a
true value When a <code>&lt;test&gt;</code> evaluates to a true value, then the
remaining <code>&lt;expression&gt;</code>s in its <code>&lt;clause&gt;</code> are evaluated in order,
and the result(s) of the last <code>&lt;expression&gt;</code> in the <code>&lt;clause&gt;</code> is(are)
returned as the result(s) of the entire cond expression.  If the
selected <code>&lt;clause&gt;</code> contains only the <code>&lt;test&gt;</code> and no <code>&lt;expression&gt;`s,
then the value of the `&lt;test&gt;</code> is returned as the result.  If the
selected <code>&lt;clause&gt;</code> uses the <code>&#8658;</code> alternate form, then the
<code>&lt;expression&gt;</code> is evaluated.  Its value must be a procedure that
accepts one argument; this procedure is then called on the value of
the <code>&lt;test&gt;</code> and the value(s) returned by this procedure is(are)
returned by the cond expression.</p>
</div>
<div class="paragraph">
<p>If all <code>&lt;test&gt;</code>s evaluate to false
values, and there is no else clause, then the result of the
conditional expression is <strong><em>void</em></strong>; if there is an else clause,
then its <code>&lt;expression&gt;</code>s are evaluated, and the value(s) of the last
one is(are) returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">&gt;</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span> <span class="ss">'greater</span><span class="p">)</span>
        <span class="p">((</span><span class="nb">&lt;</span> <span class="mi">3</span> <span class="mi">2</span><span class="p">)</span> <span class="ss">'less</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="nv">greater</span>

  <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">&gt;</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">)</span> <span class="ss">'greater</span><span class="p">)</span>
        <span class="p">((</span><span class="nb">&lt;</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">)</span> <span class="ss">'less</span><span class="p">)</span>
        <span class="p">(</span><span class="k">else</span> <span class="ss">'equal</span><span class="p">))</span>                      <span class="nv">=&gt;</span>  <span class="nv">equal</span>

  <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">assv</span> <span class="ss">'b</span> <span class="o">'</span><span class="p">((</span><span class="nf">a</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="mi">2</span><span class="p">)))</span> <span class="nv">=&gt;</span> <span class="nv">cadr</span><span class="p">)</span>
        <span class="p">(</span><span class="k">else</span> <span class="no">#f</span><span class="p">))</span>                          <span class="nv">=&gt;</span>  <span class="mi">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(case &lt;key&gt; &lt;clause1&gt; &lt;clause2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In a <code>case</code>, each <code>&lt;clause&gt;</code> should have the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="nf">&lt;datum1&gt;</span> <span class="o">...</span><span class="p">)</span> <span class="nv">&lt;expression1&gt;</span> <span class="nv">&lt;expression2&gt;</span> <span class="o">...</span><span class="p">)</span><span class="o">,</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where each <code>&lt;datum&gt;</code> is an external representation of some object.  All the
<code>&lt;datum&gt;`s must be distinct.  The last `&lt;clause&gt;</code> may be an "else clause," which
has the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">    <span class="p">(</span><span class="k">else</span> <span class="nv">&lt;expression1&gt;</span> <span class="nv">&lt;expression2&gt;</span> <span class="o">...</span><span class="p">)</span><span class="o">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A case expression is evaluated as follows. <code>&lt;Key&gt;</code> is evaluated and
its result is compared against each <code>&lt;datum&gt;</code>.  If the result of
evaluating <code>&lt;key&gt;</code> is equivalent (in the sense of eqv?) to a
<code>&lt;datum&gt;</code>, then the expressions in the corresponding <code>&lt;clause&gt;</code> are
evaluated from left to right and the result(s) of the last expression
in the <code>&lt;clause&gt;</code> is(are) returned as the result(s) of the case
expression.  If the result of evaluating <code>&lt;key&gt;</code> is different from
every <code>&lt;datum&gt;</code>, then if there is an else clause its expressions are
evaluated and the result(s) of the last is(are) the result(s) of the
case expression; otherwise the result of the case expression is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p>If the selected <code>&lt;clause&gt;</code> or else clause uses the <code>&#8658;</code> alternate
form, then the <code>expression</code> is evaluated. It is an error if
its value is not a procedure accepting one argument. This
procedure is then called on the value of the hkeyi and the
values returned by this procedure are returned by the case
expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">case</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span><span class="p">)</span> <span class="ss">'prime</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">1</span> <span class="mi">4</span> <span class="mi">6</span> <span class="mi">8</span> <span class="mi">9</span><span class="p">)</span> <span class="ss">'composite</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="nv">composite</span>
  <span class="p">(</span><span class="k">case</span> <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nf">c</span> <span class="nv">d</span><span class="p">))</span>
    <span class="p">((</span><span class="nf">a</span><span class="p">)</span> <span class="ss">'a</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">b</span><span class="p">)</span> <span class="ss">'b</span><span class="p">))</span>                     <span class="nv">=&gt;</span>  <span class="nv">void</span>
  <span class="p">(</span><span class="k">case</span> <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nf">c</span> <span class="nv">d</span><span class="p">))</span>
    <span class="p">((</span><span class="nf">a</span> <span class="nv">e</span> <span class="nv">i</span> <span class="nv">o</span> <span class="nv">u</span><span class="p">)</span> <span class="ss">'vowel</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">w</span> <span class="nv">y</span><span class="p">)</span> <span class="ss">'semivowel</span><span class="p">)</span>
    <span class="p">(</span><span class="k">else</span> <span class="ss">'consonant</span><span class="p">))</span>            <span class="nv">=&gt;</span>  <span class="nv">consonant</span>
  <span class="p">(</span><span class="k">case</span> <span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nf">c</span> <span class="nv">d</span><span class="p">))</span>
    <span class="p">((</span><span class="nf">a</span> <span class="nv">e</span> <span class="nv">i</span> <span class="nv">o</span> <span class="nv">u</span><span class="p">)</span> <span class="ss">'vowel</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">w</span> <span class="nv">y</span><span class="p">)</span> <span class="ss">'semivowel</span><span class="p">)</span>
    <span class="p">(</span><span class="k">else</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">x</span><span class="p">))))</span>  <span class="nv">=&gt;</span>  <span class="nv">c</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(and &lt;test<sub>1</sub>&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;test<sub>i</sub>&gt;</code> expressions are evaluated from left to right, and the
value of the first expression that evaluates to a false value is
returned.  Any remaining expressions are not evaluated.  If all the
expressions evaluate to true values, the value of the last expression
is returned.  If there are no expressions then <code>#t</code> is returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">and</span> <span class="p">(</span><span class="nb">=</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">))</span>           <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="k">and</span> <span class="p">(</span><span class="nb">=</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">))</span>           <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="k">and</span> <span class="mi">1</span> <span class="mi">2</span> <span class="ss">'c</span> <span class="o">'</span><span class="p">(</span><span class="nf">f</span> <span class="nv">g</span><span class="p">))</span>             <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">f</span> <span class="nv">g</span><span class="p">)</span>
  <span class="p">(</span><span class="k">and</span><span class="p">)</span>                           <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(or &lt;test<sub>1</sub>&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;test<sub>i</sub>&gt;</code> expressions are evaluated from left to right, and the
value of the first expression that evaluates to a true value is
returned.  Any remaining expressions are not evaluated.  If all
expressions evaluate to false values, the value of the last expression
is returned.  If there are no expressions then <code>#f</code> is returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nb">=</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">))</span>            <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nb">=</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">))</span>            <span class="nv">=&gt;</span>  <span class="no">#t</span>
  <span class="p">(</span><span class="k">or</span> <span class="no">#f</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span>                   <span class="nv">=&gt;</span>  <span class="no">#f</span>
  <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nb">memq</span> <span class="ss">'b</span> <span class="o">'</span><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">/</span> <span class="mi">3</span> <span class="mi">0</span><span class="p">))</span>                    <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">b</span> <span class="nv">c</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(when &lt;test&gt; &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>If the <code>&lt;test&gt;</code> expression yields a true value, the <code>&lt;expression&gt;</code>s are
evaluated from left to right and the value of the last <code>&lt;expression&gt;</code> is
returned. Otherwise, <code>when</code> returns <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(unless &lt;test&gt; &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>If the <code>&lt;test&gt;</code> expression yields a false value, the <code>&lt;expression&gt;</code>s are
evaluated from left to right and the value of the last <code>&lt;expression&gt;</code> is
returned. Otherwise, <code>unless</code> returns <strong><em>void</em></strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_binding_constructs">2.5. Binding Constructs</h3>
<div class="paragraph">
<p>
The three binding constructs <code>let</code>, <code>let*</code>, and
<code>letrec</code> are available in STklos.
These constructs differ in the regions they establish for
their variable bindings.  In a <code>let</code> expression, the initial values are
computed before any of the variables become bound; in a <code>let*</code>
expression, the bindings and evaluations are performed sequentially; while in a
<code>letrec</code> expression, all the bindings are in effect while their initial
values are being computed, thus allowing mutually recursive definitions.</p>
</div>
<div class="paragraph">
<p><strong><em>STklos</em></strong> also provides a <code>fluid-let</code> form which is described below.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(let &lt;bindings&gt; &lt;body&gt;)</code></strong><br>
<strong><code>(let &lt;variable&gt; &lt;bindings&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In a <code>let</code>, <code>&lt;bindings&gt;</code> should have the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="nf">&lt;variable1&gt;</span> <span class="nv">&lt;init1&gt;</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where each <code>&lt;init<sub>i</sub>&gt;</code> is an expression, and <code>&lt;body&gt;</code> should be a sequence of one or
more expressions.  It is an error for a <code>&lt;variable&gt;</code> to appear more than once in
the list of variables being bound.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;init&gt;</code>s are evaluated in the current environment (in some
unspecified order), the <code>&lt;variable&gt;</code>s are bound to fresh locations holding the
results, the <code>&lt;body&gt;</code> is evaluated in the extended environment, and the value(s)
of the last expression of <code>&lt;body&gt;</code> is(are) returned.  Each binding of a
<code>&lt;variable&gt;</code> has <code>&lt;body&gt;</code> as its region.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="mi">3</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">*</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>                      <span class="nv">=&gt;</span>  <span class="mi">6</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="mi">3</span><span class="p">))</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="mi">7</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">z</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">*</span> <span class="nv">z</span> <span class="nv">x</span><span class="p">)))</span>                   <span class="nv">=&gt;</span>  <span class="mi">35</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The second form of <code>let</code>, which is generally called a <strong><em>named let</em></strong>,
is a variant on the syntax of let which provides a more general
looping construct than <code>do</code> and may also be used to
express recursions. It has the same syntax and semantics as ordinary
let except that <code>&lt;variable&gt;</code> is bound within <code>&lt;body&gt;</code> to a procedure whose
formal arguments are the bound variables and whose body is <code>&lt;body&gt;</code>.
Thus the execution of <code>&lt;body&gt;</code> may be repeated by invoking the procedure
named by <code>&lt;variable&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="nv">loop</span> <span class="p">((</span><span class="nf">numbers</span> <span class="o">'</span><span class="p">(</span><span class="nf">3</span> <span class="mi">-2</span> <span class="mi">1</span> <span class="mi">6</span> <span class="mi">-5</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">nonneg</span>  <span class="o">'</span><span class="p">())</span>
           <span class="p">(</span><span class="nf">neg</span>     <span class="o">'</span><span class="p">()))</span>
  <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">null?</span> <span class="nv">numbers</span><span class="p">)</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">nonneg</span> <span class="nv">neg</span><span class="p">))</span>
        <span class="p">((</span><span class="nb">&gt;=</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">numbers</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">loop</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">numbers</span><span class="p">)</span>
                 <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">numbers</span><span class="p">)</span> <span class="nv">nonneg</span><span class="p">)</span>
                 <span class="nv">neg</span><span class="p">))</span>
        <span class="p">((</span><span class="nb">&lt;</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">numbers</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
           <span class="p">(</span><span class="nf">loop</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">numbers</span><span class="p">)</span>
                  <span class="nv">nonneg</span>
                  <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">numbers</span><span class="p">)</span> <span class="nv">neg</span><span class="p">)))))</span>
   <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">6</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nf">-5</span> <span class="mi">-2</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(let</strong> &lt;bindings&gt; &lt;body&gt;)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>In a <code>let*</code>, <code>&lt;bindings&gt;</code> should have the same form as in a <code>let</code> (however, a
&lt;variable&gt; can appear more than once in the list of variables being bound).</p>
</div>
<div class="paragraph">
<p><code>Let*</code> is similar to <code>let</code>, but the bindings are performed sequentially
from left to right, and the region of a binding indicated by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">&lt;variable&gt;</span> <span class="nv">&lt;init&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is that part of the <code>let*</code> expression to the right of the binding.  Thus
the second binding is done in an environment in which the first binding is
visible, and so on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="mi">3</span><span class="p">))</span>
  <span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">x</span> <span class="mi">7</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">z</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">*</span> <span class="nv">z</span> <span class="nv">x</span><span class="p">)))</span>             <span class="nv">=&gt;</span>  <span class="mi">70</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(letrec &lt;bindings&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>&lt;bindings&gt; should have the form as in <code>let</code>.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;variable&gt;</code>s are bound to fresh locations holding undefined
values, the <code>&lt;init&gt;</code>s are evaluated in the resulting environment (in
some unspecified order), each <code>&lt;variable&gt;</code> is assigned to the result
of the corresponding <code>&lt;init&gt;</code>, the <code>&lt;body&gt;</code> is evaluated in the
resulting environment, and the value(s) of the last expression in
<code>&lt;body&gt;</code> is(are) returned.  Each binding of a <code>&lt;variable&gt;</code> has the
entire <code>letrec</code> expression as its region, making it possible to define
mutually recursive procedures.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">letrec</span> <span class="p">((</span><span class="nb">even?</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span>
                  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">zero?</span> <span class="nv">n</span><span class="p">)</span>
                      <span class="no">#t</span>
                      <span class="p">(</span><span class="nb">odd?</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)))))</span>
         <span class="p">(</span><span class="nb">odd?</span>  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span>
                  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">zero?</span> <span class="nv">n</span><span class="p">)</span>
                      <span class="no">#f</span>
                      <span class="p">(</span><span class="nb">even?</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">))))))</span>
  <span class="p">(</span><span class="nb">even?</span> <span class="mi">88</span><span class="p">))</span>
                  <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(letrec</strong> &lt;bindings&gt; &lt;body&gt;)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>&lt;bindings&gt; should have the form as in <code>let</code> and body is a sequence
of zero or more definitions followed by one or more expressions.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;variable&gt;</code>s are bound to fresh locations, each <code>variable</code> is
assigned in left-to-right order to the result of evaluating the
corresponding <code>init</code>, the <code>body</code> is evaluated in the resulting
environment, and the values of the last expression in <code>body</code> are
returned. Despite the left-to-right evaluation and assignment order,
each binding of a <code>variable</code> has the entire <code>letrec*</code> expression as its
region, making it possible to define mutually recursive procedures.
If it is not possible to evaluate each <code>init</code> without assigning or
referring to the value of the corresponding <code>variable</code> or the
<code>variable</code> of any of the bindings that follow it in <code>bindings</code>, it is
an error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">letrec*</span> <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">x</span><span class="p">)</span>
               <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">q</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">)))))</span>
          <span class="p">(</span><span class="nf">q</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">y</span><span class="p">)</span>
              <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">zero?</span> <span class="nv">y</span><span class="p">)</span>
                  <span class="mi">0</span>
                  <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nf">p</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">y</span> <span class="mi">1</span><span class="p">))))))</span>
          <span class="p">(</span><span class="nf">x</span> <span class="p">(</span><span class="nf">p</span> <span class="mi">5</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">y</span> <span class="nv">x</span><span class="p">))</span>
  <span class="nv">y</span><span class="p">)</span>  <span class="nv">=&gt;</span> <span class="mi">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(let-values ((&lt;formals&gt; &lt;expression&gt;) &#8230;&#8203;) &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Each <code>&lt;formals&gt;</code> should be a formal arguments list as for a <code>lambda</code> expression.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;expression&gt;</code>s are evaluated in the current environment,
the variables of the <code>&lt;formals&gt;</code> are bound to fresh locations, the return
values of the <code>&lt;expression&gt;</code>s are stored in the variables, the <code>&lt;body&gt;</code> is
evaluated in the extended environment, and the values of the last expression
of <code>&lt;body&gt;</code> are returned.</p>
</div>
<div class="paragraph">
<p>The matching of each <code>&lt;formals&gt;</code> to values is as for the matching of
<code>&lt;formals&gt;</code> to arguments in a <code>lambda</code> expression, and it is an error
for an <code>&lt;expression&gt;</code> to return a number of values that does not match
its corresponding <code>&lt;formals&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">let-values</span> <span class="p">(((</span><span class="nf">root</span> <span class="nv">rem</span><span class="p">)</span> <span class="p">(</span><span class="nf">exact-integer-sqrt</span> <span class="mi">32</span><span class="p">)))</span>
   <span class="p">(</span><span class="nb">*</span> <span class="nv">root</span> <span class="nv">rem</span><span class="p">))</span>            <span class="nv">=&gt;</span>  <span class="mi">35</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">a</span> <span class="ss">'a</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="ss">'b</span><span class="p">)</span> <span class="p">(</span><span class="nf">x</span> <span class="ss">'x</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="ss">'y</span><span class="p">))</span>
   <span class="p">(</span><span class="nf">let-values</span> <span class="p">(((</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">values</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>
                <span class="p">((</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">values</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)))</span>
     <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span>      <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(let-values ((&lt;formals&gt; &lt;expression&gt;) &#8230;&#8203;) &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Each <code>&lt;formals&gt;</code> should be a formal arguments list as for a <code>lambda</code> expression.</p>
</div>
<div class="paragraph">
<p><code>let*-values</code> is similar to <code>let-values</code>, but the bindings are performed
sequentially from left to right, and the region of a binding indicated by
<code>(&lt;formals&gt; &lt;expression&gt;)</code> is that part of the <code>let*-values</code> expression to
the right of the binding. Thus the second binding is done in an environment
in which the first binding is visible, and so on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">a</span> <span class="ss">'a</span><span class="p">)</span> <span class="p">(</span><span class="nf">b</span> <span class="ss">'b</span><span class="p">)</span> <span class="p">(</span><span class="nf">x</span> <span class="ss">'x</span><span class="p">)</span> <span class="p">(</span><span class="nf">y</span> <span class="ss">'y</span><span class="p">))</span>
   <span class="p">(</span><span class="nf">let*-values</span> <span class="p">(((</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">values</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>
                <span class="p">((</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">values</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)))</span>
     <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)))</span>      <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-values formals expression)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The form <code>define-values</code> creates multiple definitions from a single expression
returning multiple values. Here, <code>expression</code> is evaluated, and the <code>formals</code>
are bound to the return values in the same way that the <code>formals</code> in a
lambda expression are matched to the arguments in a procedure call.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">()</span>
  <span class="p">(</span><span class="nf">define-values</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nf">exact-integer-sqrt</span> <span class="mi">17</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>                   <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">4</span> <span class="mi">1</span><span class="p">)</span>

<span class="p">(</span><span class="k">let</span> <span class="p">()</span>
   <span class="p">(</span><span class="nf">define-values</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">values</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">))</span>                     <span class="nv">=&gt;</span> <span class="mi">3</span>

<span class="p">(</span><span class="k">let</span> <span class="p">()</span>
   <span class="p">(</span><span class="nf">define-values</span> <span class="p">(</span><span class="nf">x</span> <span class="o">.</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">values</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
   <span class="p">(</span><span class="nb">list</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>                  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">1</span> <span class="p">(</span><span class="nf">2</span> <span class="mi">3</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(fluid-let &lt;bindings&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;bindings&gt;</code> are evaluated in the current environment, in some
unspecified order, the current values of the variables present in
<code>&lt;bindings&gt;</code> are saved, and the new evaluated values are assigned to the
<code>&lt;bindings&gt;</code> variables. Once this is done, the expressions of <code>&lt;body&gt;</code>
are evaluated sequentially in the current environment; the value of the
last expression is the result of <code>fluid-let</code>. Upon exit, the stored
variables values are restored. An error is signalled if any of the
<code>&lt;bindings&gt;</code> variable is unbound.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nf">a</span> <span class="ss">'out</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">f</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="nv">a</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">f</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">fluid-let</span> <span class="p">((</span><span class="nf">a</span> <span class="ss">'in</span><span class="p">))</span> <span class="p">(</span><span class="nf">f</span><span class="p">))</span>
        <span class="p">(</span><span class="nf">f</span><span class="p">)))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">out</span> <span class="nv">in</span> <span class="nv">out</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the body of a <code>fluid-let</code> is exited by invoking a continuation,
the new variable values are saved, and the variables are set to their old
values. Then, if the body is reentered by invoking a continuation, the old
values are saved and new values are restored. The following example illustrates
this behavior</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">cont</span> <span class="no">#f</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">l</span>    <span class="o">'</span><span class="p">())</span>
      <span class="p">(</span><span class="nf">a</span>    <span class="ss">'out</span><span class="p">))</span>
  <span class="p">(</span><span class="k">set!</span> <span class="nv">l</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">a</span> <span class="nv">l</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">fluid-let</span> <span class="p">((</span><span class="nf">a</span> <span class="ss">'in</span><span class="p">))</span>
    <span class="p">(</span><span class="k">set!</span> <span class="nv">cont</span> <span class="p">(</span><span class="nb">call-with-current-continuation</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">k</span><span class="p">)</span> <span class="nv">k</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">set!</span> <span class="nv">l</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">a</span> <span class="nv">l</span><span class="p">)))</span>
  <span class="p">(</span><span class="k">set!</span> <span class="nv">l</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">a</span> <span class="nv">l</span><span class="p">))</span>

  <span class="p">(</span><span class="k">if</span> <span class="nv">cont</span> <span class="p">(</span><span class="nf">cont</span> <span class="no">#f</span><span class="p">)</span> <span class="nv">l</span><span class="p">))</span> <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">out</span> <span class="nv">in</span> <span class="nv">out</span> <span class="nv">in</span> <span class="nv">out</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sequencing">2.6. Sequencing</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(begin &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;expression&gt;</code>s are evaluated sequentially from left to right, and the
value(s) of the last <code>&lt;expression&gt;</code> is(are) returned.  This expression type is
used to sequence side effects such as input and output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="mi">0</span><span class="p">)</span>

  <span class="p">(</span><span class="k">begin</span> <span class="p">(</span><span class="k">set!</span> <span class="nv">x</span> <span class="mi">5</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span>                  <span class="nv">=&gt;</span>  <span class="mi">6</span>

  <span class="p">(</span><span class="k">begin</span> <span class="p">(</span><span class="nb">display</span> <span class="s">"4 plus 1 equals "</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">display</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">4</span> <span class="mi">1</span><span class="p">)))</span>        <span class="nv">|-</span> <span class="mi">4</span> <span class="nv">plus</span> <span class="mi">1</span> <span class="nv">equals</span> <span class="mi">5</span>
                                   <span class="nv">=&gt;</span>  <span class="nv">void</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(tagbody &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br>
<strong><code>(&#8594; tag)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;expression&gt;</code>s are evaluated sequentially from left to right,
and the value(s) of the last &lt;expression&gt; is(are) returned as in a
<code>begin</code> form. Within a <code>tagbody</code> form expressions which are keywords
are considered as tags and the special form <code>(&#8594; tag)</code> is used to
transfer execution to the given tag. This is a <strong>very low level</strong>
form which is inspired on <code>tabgody</code> Common Lisp&#8217;s form. It can be useful
for defining new syntaxes, and should probably not be used as is.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">tagbody</span>               <span class="c1">;; an infinite loop</span>
   <span class="o">#</span><span class="nv">:1</span> <span class="p">(</span><span class="nb">display</span> <span class="s">"."</span><span class="p">)</span>
       <span class="p">(</span><span class="nf">-&gt;</span> <span class="o">#</span><span class="nv">:1</span><span class="p">))</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">v</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">tagbody</span>
   <span class="o">#</span><span class="nv">:top</span> <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">v</span> <span class="mi">5</span><span class="p">)</span>
           <span class="p">(</span><span class="nb">display</span> <span class="nv">v</span><span class="p">)</span>
           <span class="p">(</span><span class="k">set!</span> <span class="nv">v</span> <span class="p">(</span><span class="nf">fx+</span> <span class="nv">v</span> <span class="mi">1</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">-&gt;</span> <span class="o">#</span><span class="nv">:top</span><span class="p">))))</span>                      <span class="nv">|-</span> <span class="mi">01234</span>

<span class="p">(</span><span class="nf">tagbody</span> <span class="p">(</span><span class="nb">display</span> <span class="mi">1</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">tagbody</span> <span class="p">(</span><span class="nb">display</span> <span class="mi">2</span><span class="p">)</span>
                  <span class="p">(</span><span class="nf">-&gt;</span> <span class="o">#</span><span class="nv">:inner</span><span class="p">)</span>
                  <span class="p">(</span><span class="nb">display</span> <span class="s">"not printed"</span><span class="p">)</span>
           <span class="o">#</span><span class="nv">:inner</span>
                 <span class="p">(</span><span class="nb">display</span> <span class="mi">3</span><span class="p">)</span>
                 <span class="p">(</span><span class="nf">-&gt;</span> <span class="o">#</span><span class="nv">:outer</span><span class="p">)</span>
                 <span class="p">(</span><span class="nb">display</span> <span class="s">"not printed too"</span><span class="p">))</span>
   <span class="o">#</span><span class="nv">:outer</span>
         <span class="p">(</span><span class="nb">display</span> <span class="s">"4"</span><span class="p">))</span>                        <span class="nv">|-</span> <span class="mi">1234</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_iterations">2.7. Iterations</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(do [[&lt;var1&gt; &lt;init1&gt; &lt;step1&gt;] &#8230;&#8203;] [&lt;test&gt; &lt;expr&gt; &#8230;&#8203;] &lt;command&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Do</code> is an iteration construct.  It specifies a set of variables to be
bound, how they are to be initialized at the start, and how they are
to be updated on each iteration.  When a termination condition is met,
the loop exits after evaluating the <code>&lt;expr&gt;</code>s.</p>
</div>
<div class="paragraph">
<p><code>Do</code> expressions are evaluated as follows: The <code>&lt;init&gt;</code> expressions
are evaluated (in some unspecified order), the <code>&lt;var&gt;</code>s are bound
to fresh locations, the results of the <code>&lt;init&gt;</code> expressions are stored
in the bindings of the <code>&lt;var&gt;</code>s, and then the iteration phase
begins.</p>
</div>
<div class="paragraph">
<p>Each iteration begins by evaluating <code>&lt;test&gt;</code>; if the result is false
then the <code>&lt;command&gt;</code> expressions are evaluated in order for effect,
the <code>&lt;step&gt;</code> expressions are evaluated in some unspecified order, the
<code>&lt;var&gt;</code>s are bound to fresh locations, the results of the <code>&lt;step&gt;</code>s
are stored in the bindings of the <code>&lt;var&gt;</code>s, and the next iteration
begins.</p>
</div>
<div class="paragraph">
<p>If <code>&lt;test&gt;</code> evaluates to a true value, then the <code>&lt;expr&gt;</code>s are
evaluated from left to right and the value(s) of the last <code>&lt;expr&gt;</code>
is(are) returned.  If no <code>&lt;expr&gt;</code>s are present, then the value of
the do expression is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p>The region of the binding of a <code>&lt;var&gt;</code> consists of the entire do
expression except for the <code>&lt;init&gt;</code>s.  It is an error for a <code>&lt;var&gt;</code> to
appear more than once in the list of do variables.</p>
</div>
<div class="paragraph">
<p>A <code>&lt;step&gt;</code> may be omitted, in which case the effect is the same as if</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">&lt;var&gt;</span> <span class="nv">&lt;init&gt;</span> <span class="nv">&lt;var&gt;</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>had been written.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme">  <span class="p">(</span><span class="k">do</span> <span class="p">((</span><span class="nf">vec</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="mi">5</span><span class="p">))</span>
       <span class="p">(</span><span class="nf">i</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">i</span> <span class="mi">1</span><span class="p">)))</span>
      <span class="p">((</span><span class="nb">=</span> <span class="nv">i</span> <span class="mi">5</span><span class="p">)</span> <span class="nv">vec</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">vector-set!</span> <span class="nv">vec</span> <span class="nv">i</span> <span class="nv">i</span><span class="p">))</span>            <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>

  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">7</span> <span class="mi">9</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">do</span> <span class="p">((</span><span class="nf">x</span> <span class="nv">x</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">x</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">sum</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">sum</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">x</span><span class="p">))))</span>
        <span class="p">((</span><span class="nb">null?</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">sum</span><span class="p">)))</span>             <span class="nv">=&gt;</span>  <span class="mi">25</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(dotimes [var count] &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br>
<strong><code>(dotimes [var count result] &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Evaluates the <code>count</code> expression, which must return an
integer and then evaluates the <code>&lt;expression&gt;</code>s once for each
integer from zero (inclusive) to <code>count</code> (exclusive), in order,
with the symbol <code>var</code> bound to the integer; if the value of
<code>count</code> is zero or negative, then the <code>&lt;expression&gt;</code>s are not
evaluated. When the loop completes, <code>result</code> is evaluated and its
value is returned as the value of the <code>dotimes</code> construction. If
<code>result</code> is omitted, <code>dotimes</code> result is <strong><em>void</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">l</span> <span class="o">'</span><span class="p">()))</span>
  <span class="p">(</span><span class="nf">dotimes</span> <span class="p">(</span><span class="nf">i</span> <span class="mi">4</span> <span class="nv">l</span><span class="p">)</span>
     <span class="p">(</span><span class="k">set!</span> <span class="nv">l</span> <span class="p">(</span><span class="nb">cons</span> <span class="nv">i</span> <span class="nv">l</span><span class="p">))))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">0</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(repeat count &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Evaluates the <code>count</code> expression, which must return an
integer and then evaluates the <code>&lt;expression&gt;</code>s once for each
integer from zero (inclusive) to <code>count</code> (exclusive). The result of
<code>repeat</code> is undefined.</p>
</div>
<div class="paragraph">
<p>This form could be easily simulated with <code>dotimes</code>. Its interest is
that it is faster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">repeat</span> <span class="mi">3</span> <span class="p">(</span><span class="nb">display</span> <span class="s">"."</span><span class="p">))</span>     <span class="nv">=&gt;</span> <span class="nv">prints</span> <span class="s">"..."</span>
<span class="p">(</span><span class="nf">repeat</span> <span class="mi">0</span> <span class="p">(</span><span class="nb">display</span> <span class="s">"."</span><span class="p">))</span>     <span class="nv">=&gt;</span> <span class="nv">prints</span> <span class="nv">nothing</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(while &lt;test&gt; &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>While</code> evaluates the <code>&lt;expression&gt;</code>s until <code>&lt;test&gt;</code> returns a false
value. The value returned by this form is <strong><em>void</em></strong>.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(until &lt;test&gt; &lt;expression1&gt; &lt;expression2&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>Until</code> evaluates the <code>&lt;expression&gt;</code>s until <code>&lt;while&gt;</code> returns a false
value. The value returned by this form is <strong><em>void</em></strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_delayed_evaluation">2.8. Delayed Evaluation</h3>
<div class="paragraph">
<p>

</p>
</div>
<div id="delay" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(delay &lt;expression&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>delay</code> construct is used together with the procedure <code>force</code>
to implement <strong><em>lazy evaluation</em></strong> or <strong><em>call by need</em></strong>. <code>(delay
&lt;expression&gt;)</code> returns an object called a <strong><em>promise</em></strong>) which at some
point in the future may be asked (by the <code>force</code> procedure) to
evaluate <code>&lt;expression&gt;</code>, and deliver the resulting value.
The effect of <code>&lt;expression&gt;</code> returning multiple values is unpredictable.</p>
</div>
<div class="paragraph">
<p>See the description of <code>force</code> for a more complete
description of <code>delay</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(delay-force &lt;expression&gt;)</code></strong><br>
<strong><code>(lazy &lt;expression&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The expression <code>(delay-force expression)</code> is conceptually similar
to <code>(delay (force expression))</code>, with the difference that forcing the result
of <code>delay-force</code> will in effect result in a tail call to <code>(force expression)</code>,
while forcing the result of <code>(delay (force expression))</code> might not. Thus
iterative lazy algorithms that might result in a long series of chains of
<code>delay</code> and <code>force</code> can be rewritten using <code>delay-force</code> to prevent consuming
unbounded space during evaluation.</p>
</div>
<div class="paragraph">
<p>The special form <code>delay-force</code> appears with name <code>lazy</code> in <strong><a href="http://srfi.schemers.org/srfi-45/srfi-45.html">SRFI-45</a></strong> (<em>Primitives for Expressing Iterative Lazy Algorithms</em>).</p>
</div>
<div id="force" class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(force promise)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Forces the value of <code>promise</code> (see <em><a href="_expressions.html#delay">primitive delay</a></em>).
If no value has been computed for the promise, then a value is
computed and returned. The value of the promise is cached
(or "memoized") so that if it is forced a second time, the
previously computed value is returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">force</span> <span class="p">(</span><span class="k">delay</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)))</span>        <span class="nv">=&gt;</span>  <span class="mi">3</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">p</span> <span class="p">(</span><span class="k">delay</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">))))</span>
  <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">force</span> <span class="nv">p</span><span class="p">)</span> <span class="p">(</span><span class="nb">force</span> <span class="nv">p</span><span class="p">)))</span>  <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">3</span> <span class="mi">3</span><span class="p">)</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">a-stream</span>
  <span class="p">(</span><span class="k">letrec</span> <span class="p">((</span><span class="nf">next</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">n</span><span class="p">)</span>
                   <span class="p">(</span><span class="nb">cons</span> <span class="nv">n</span> <span class="p">(</span><span class="k">delay</span> <span class="p">(</span><span class="nf">next</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)))))))</span>
    <span class="p">(</span><span class="nf">next</span> <span class="mi">0</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">head</span> <span class="nv">car</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">tail</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nf">stream</span><span class="p">)</span> <span class="p">(</span><span class="nb">force</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">stream</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">head</span> <span class="p">(</span><span class="nf">tail</span> <span class="p">(</span><span class="nf">tail</span> <span class="nv">a-stream</span><span class="p">)))</span>  <span class="nv">=&gt;</span>  <span class="mi">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Force</code> and <code>delay</code> are mainly intended for programs written in
functional style. The following examples should not be considered
to illustrate good programming style, but they illustrate the
property that only one value is computed for a promise, no matter
how many times it is forced.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">count</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">p</span> <span class="p">(</span><span class="k">delay</span> <span class="p">(</span><span class="k">begin</span> <span class="p">(</span><span class="k">set!</span> <span class="nv">count</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">count</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="nv">count</span> <span class="nv">x</span><span class="p">)</span>
                            <span class="nv">count</span>
                            <span class="p">(</span><span class="nb">force</span> <span class="nv">p</span><span class="p">)))))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">x</span> <span class="mi">5</span><span class="p">)</span>
<span class="nv">p</span>                     <span class="nv">=&gt;</span>  <span class="nv">a</span> <span class="nv">promise</span>
<span class="p">(</span><span class="nb">force</span> <span class="nv">p</span><span class="p">)</span>             <span class="nv">=&gt;</span>  <span class="mi">6</span>
<span class="nv">p</span>                     <span class="nv">=&gt;</span>  <span class="nv">a</span> <span class="nv">promise,</span> <span class="nv">still</span>
<span class="p">(</span><span class="k">begin</span> <span class="p">(</span><span class="k">set!</span> <span class="nv">x</span> <span class="mi">10</span><span class="p">)</span>
       <span class="p">(</span><span class="nb">force</span> <span class="nv">p</span><span class="p">))</span>     <span class="nv">=&gt;</span>  <span class="mi">6</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See R<sup>5</sup>RS for details on a posssible way to implement
<code>force</code> and <code>delay</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(promise? obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a promise, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>7</sup>RS procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(make-promise obj)</code></strong><br>
<strong><code>(eager obj)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>make-promise</code> procedure returns a promise which,
when forced, will return <code>obj</code> . It is similar to <code>delay</code>, but
does not delay its argument: it is a procedure rather than
syntax. If <code>obj</code> is already a promise, it is returned.</p>
</div>
<div class="paragraph">
<p>The primitve <code>make-promise</code> appears with name <code>eager</code> in
SRFI-45.</p>
</div>
</div>
<div class="sect2">
<h3 id="_quasiquotation">2.9. Quasiquotation</h3>
<div class="paragraph">
<p>





</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(quasiquote &lt;template&gt;)</code></strong><br>
<strong><code>`&lt;template&gt;</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>"Backquote" or "quasiquote" expressions are useful for constructing a
list or vector structure when most but not all of the desired structure
is known in advance.  If no commas appear within the <code>&lt;template&gt;</code>,
the result of evaluating <code>`&lt;template&gt;</code> is equivalent to the result of
evaluating <code>'&lt;template&gt;</code>.  If a comma appears within the
<code>&lt;template&gt;</code>, however, the expression following the comma is evaluated
("unquoted") and its result is inserted into the structure instead of
the comma and the expression.  If a comma appears followed immediately
by an at-sign (@), then the following expression must evaluate to a
list; the opening and closing parentheses of the list are then
"stripped away" and the elements of the list are inserted in place of the comma
at-sign expression sequence.  A comma at-sign should only appear within
a list or vector <code>&lt;template&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">`</span><span class="p">(</span><span class="nb">list</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">4</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nb">list</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">name</span> <span class="ss">'a</span><span class="p">))</span> <span class="o">`</span><span class="p">(</span><span class="nb">list</span> <span class="o">,</span><span class="nv">name</span> <span class="ss">',name</span><span class="p">))</span>
                    <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nb">list</span> <span class="nv">a</span> <span class="p">(</span><span class="k">quote</span> <span class="nv">a</span><span class="p">))</span>
<span class="o">`</span><span class="p">(</span><span class="nf">a</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">,@</span><span class="p">(</span><span class="nb">map</span> <span class="nv">abs</span> <span class="o">'</span><span class="p">(</span><span class="nf">4</span> <span class="mi">-5</span> <span class="mi">6</span><span class="p">))</span> <span class="nv">b</span><span class="p">)</span>
                    <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="nv">b</span><span class="p">)</span>
<span class="o">`</span><span class="p">((</span><span class="nf">foo</span> <span class="o">,</span><span class="p">(</span><span class="nb">-</span> <span class="mi">10</span> <span class="mi">3</span><span class="p">))</span> <span class="o">,@</span><span class="p">(</span><span class="nb">cdr</span> <span class="o">'</span><span class="p">(</span><span class="nf">c</span><span class="p">))</span> <span class="o">.</span> <span class="o">,</span><span class="p">(</span><span class="nb">car</span> <span class="o">'</span><span class="p">(</span><span class="nb">cons</span><span class="p">)))</span>
                    <span class="nv">=&gt;</span>  <span class="p">((</span><span class="nf">foo</span> <span class="mi">7</span><span class="p">)</span> <span class="o">.</span> <span class="nv">cons</span><span class="p">)</span>
<span class="o">`#</span><span class="p">(</span><span class="nf">10</span> <span class="mi">5</span> <span class="o">,</span><span class="p">(</span><span class="nb">sqrt</span> <span class="mi">4</span><span class="p">)</span> <span class="o">,@</span><span class="p">(</span><span class="nb">map</span> <span class="nv">sqrt</span> <span class="o">'</span><span class="p">(</span><span class="nf">16</span> <span class="mi">9</span><span class="p">))</span> <span class="mi">8</span><span class="p">)</span>
                    <span class="nv">=&gt;</span>  <span class="o">#</span><span class="p">(</span><span class="nf">10</span> <span class="mi">5</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">3</span> <span class="mi">8</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Quasiquote forms may be nested.  Substitutions are made only for unquoted
components appearing at the same nesting level as the outermost backquote.
The nesting level increases by one inside each successive quasiquotation,
and decreases by one inside each unquotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="o">`</span><span class="p">(</span><span class="nf">a</span> <span class="o">`</span><span class="p">(</span><span class="nf">b</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">,</span><span class="p">(</span><span class="nf">foo</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">3</span><span class="p">)</span> <span class="nv">d</span><span class="p">)</span> <span class="nv">e</span><span class="p">)</span> <span class="nv">f</span><span class="p">)</span>
          <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="o">`</span><span class="p">(</span><span class="nf">b</span> <span class="o">,</span><span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">,</span><span class="p">(</span><span class="nf">foo</span> <span class="mi">4</span> <span class="nv">d</span><span class="p">)</span> <span class="nv">e</span><span class="p">)</span> <span class="nv">f</span><span class="p">)</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">name1</span> <span class="ss">'x</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">name2</span> <span class="ss">'y</span><span class="p">))</span>
  <span class="o">`</span><span class="p">(</span><span class="nf">a</span> <span class="o">`</span><span class="p">(</span><span class="nf">b</span> <span class="o">,,</span><span class="nv">name1</span> <span class="o">,</span><span class="ss">',name2</span> <span class="nv">d</span><span class="p">)</span> <span class="nv">e</span><span class="p">))</span>
          <span class="nv">=&gt;</span>  <span class="p">(</span><span class="nf">a</span> <span class="o">`</span><span class="p">(</span><span class="nf">b</span> <span class="o">,</span><span class="nv">x</span> <span class="o">,</span><span class="ss">'y</span> <span class="nv">d</span><span class="p">)</span> <span class="nv">e</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The two notations <code>`&lt;template&gt;</code> and <code>(quasiquote &lt;template&gt;)</code> are identical
in all respects.  <code>,&lt;expression&gt;</code> is identical to <code>(unquote &lt;expression&gt;)</code>, and
<code>,@&lt;expression&gt;</code> is identical to <code>(unquote-splicing &lt;expression&gt;)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_macros">2.10. Macros</h3>
<div class="paragraph">
<p>


STklos supports hygienic macros such as the ones defined in R<sup>5</sup>RS as
well as low level macros.</p>
</div>
<div class="paragraph">
<p>
Low level macros are defined with <code>define-macro</code> whereas R<sup>5</sup>RS macros are
defined with <code>define-syntax</code>.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>.  Hygienic macros use the implementation
called <strong><em>Macro by Example</em></strong> (Eugene Kohlbecker, R<sup>4</sup>RS) done by Dorai
Sitaram. This implementation generates low level STklos macros. This
implementation of hygienic macros is not expensive.</p>
</div>
<div class="paragraph">
<p>The major drawback of this implementation is that the macros are not
<strong><em>referentially transparent</em></strong> (see section <strong>Macros</strong> in R<sup>4</sup>RS for
details). Lexically scoped macros (i.e., <code>let-syntax</code> and
<code>letrec-syntax</code> are not supported). In any case, the problem of
referential transparency gains poignancy only when <code>let-syntax</code> and
<code>letrec-syntax</code> are used. So you will not be courting large-scale
disaster unless you&#8217;re using system-function names as local variables
with unintuitive bindings that the macro can&#8217;t use. However, if you
must have the full R<sup>5</sup>RS macro functionality, you can do</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">require</span> <span class="s">"full-syntax"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>to have access to the more featureful (but also more expensive)
versions of <strong>syntax-rules</strong>. Requiring <code>"full-syntax"</code> loads the
version 2.1 of an implementation of hygienic macros by Robert Hieb
and R. Kent Dybvig.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-macro (&lt;name&gt; &lt;formals&gt;) &lt;body&gt;)</code></strong><br>
<strong><code>(define-macro &lt;name&gt; (lambda &lt;formals&gt; &lt;body&gt;))</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>define-macro</code> can be used to define low-level macro
(i.e. ,(emph "non hygienic") macros). This form is similar to the
<code>defmacro</code> form of Common Lisp.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">incr</span> <span class="nv">x</span><span class="p">)</span> <span class="o">`</span><span class="p">(</span><span class="k">set!</span> <span class="o">,</span><span class="nv">x</span> <span class="p">(</span><span class="nb">+</span> <span class="o">,</span><span class="nv">x</span> <span class="mi">1</span><span class="p">)))</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">a</span> <span class="mi">1</span><span class="p">))</span> <span class="p">(</span><span class="nf">incr</span> <span class="nv">a</span><span class="p">)</span> <span class="nv">a</span><span class="p">)</span>   <span class="nv">=&gt;</span> <span class="mi">2</span>

<span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">when</span> <span class="nv">test</span> <span class="o">.</span> <span class="nv">body</span><span class="p">)</span>
  <span class="o">`</span><span class="p">(</span><span class="k">if</span> <span class="o">,</span><span class="nv">test</span> <span class="o">,@</span><span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">body</span><span class="p">))</span> <span class="nv">body</span> <span class="o">`</span><span class="p">((</span><span class="k">begin</span> <span class="o">,@</span><span class="nv">body</span><span class="p">)))))</span>
<span class="p">(</span><span class="nf">macro-expand</span> <span class="o">'</span><span class="p">(</span><span class="nf">when</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="k">if</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
<span class="p">(</span><span class="nf">macro-expand</span> <span class="o">'</span><span class="p">(</span><span class="nf">when</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
                           <span class="nv">=&gt;</span> <span class="p">(</span><span class="k">if</span> <span class="nv">a</span> <span class="p">(</span><span class="k">begin</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>

<span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">my-and</span> <span class="o">.</span> <span class="nv">exprs</span><span class="p">)</span>
  <span class="p">(</span><span class="k">cond</span>
   <span class="p">((</span><span class="nb">null?</span> <span class="nv">exprs</span><span class="p">)</span>        <span class="no">#t</span><span class="p">)</span>
   <span class="p">((</span><span class="nb">=</span> <span class="p">(</span><span class="nb">length</span> <span class="nv">exprs</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">exprs</span><span class="p">))</span>
   <span class="p">(</span><span class="k">else</span>                 <span class="o">`</span><span class="p">(</span><span class="k">if</span> <span class="o">,</span><span class="p">(</span><span class="nb">car</span> <span class="nv">exprs</span><span class="p">)</span>
                           <span class="p">(</span><span class="nf">my-and</span> <span class="o">,@</span><span class="p">(</span><span class="nb">cdr</span> <span class="nv">exprs</span><span class="p">))</span>
                           <span class="no">#f</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">macro-expand</span> <span class="o">'</span><span class="p">(</span><span class="nf">my-and</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span>
                          <span class="nv">=&gt;</span> <span class="p">(</span><span class="k">if</span> <span class="nv">a</span> <span class="p">(</span><span class="nf">my-and</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="no">#f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(define-syntax &lt;identifier&gt; &lt;transformer-spec&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>&lt;Define-syntax&gt;</code>  extends the top-level syntactic environment by binding
the <code>&lt;identifier&gt;</code> to the specified transformer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>&lt;transformer-spec&gt;</code> should be an instance of <code>syntax-rules</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define-syntax</span> <span class="nv">let*</span>
  <span class="p">(</span><span class="k">syntax-rules</span> <span class="p">()</span>
    <span class="p">((</span><span class="k">let*</span> <span class="p">()</span> <span class="nv">body1</span> <span class="nv">body2</span> <span class="o">...</span><span class="p">)</span>
     <span class="p">(</span><span class="k">let</span> <span class="p">()</span> <span class="nv">body1</span> <span class="nv">body2</span> <span class="o">...</span><span class="p">))</span>
    <span class="p">((</span><span class="k">let*</span> <span class="p">((</span><span class="nf">name1</span> <span class="nv">val1</span><span class="p">)</span> <span class="p">(</span><span class="nf">name2</span> <span class="nv">val2</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span>
       <span class="nv">body1</span> <span class="nv">body2</span> <span class="o">...</span><span class="p">)</span>
     <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">name1</span> <span class="nv">val1</span><span class="p">))</span>
       <span class="p">(</span><span class="k">let*</span> <span class="p">((</span> <span class="nv">name2</span> <span class="nv">val2</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span>
         <span class="nv">body1</span> <span class="nv">body2</span> <span class="o">...</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(syntax-rules &lt;literals&gt; &lt;syntax-rule&gt; &#8230;&#8203;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>&lt;literals&gt;</code> is a list of identifiers, and each <code>&lt;syntax-rule&gt;</code> should be of
the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">pattern</span> <span class="nv">template</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An instance of <code>&lt;syntax-rules&gt;</code> produces a new macro transformer by
specifying a sequence of hygienic rewrite rules. A use of a macro
whose name is associated with a transformer specified by
&lt;syntax-rules&gt; is matched against the patterns contained in the
&lt;syntax-rules&gt;, beginning with the leftmost syntax-rule. When a match is
found, the macro use is transcribed hygienically according to the
template.</p>
</div>
<div class="paragraph">
<p>Each pattern begins with the name for the macro. This name is not
involved in the matching and is not considered a pattern variable or
literal identifier.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For a complete description of the Scheme pattern language,
refer to R<sup>5</sup>RS.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(let-syntax &lt;bindings&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>&lt;Bindings&gt;</code> should have the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">((</span><span class="nf">&lt;keyword&gt;</span> <span class="nv">&lt;transformer</span> <span class="nv">spec&gt;</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each <code>&lt;keyword&gt;</code> is an identifier, each <code>&lt;transformer spec&gt;</code> is an instance of
<code>syntax-rules</code>, and <code>&lt;body&gt;</code> should be a sequence of one or more expressions.  It
is an error for a <code>&lt;keyword&gt;</code> to appear more than once in the list of keywords
being bound.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;body&gt;</code> is expanded in the syntactic environment obtained by
extending the syntactic environment of the <code>let-syntax</code> expression with macros
whose keywords are the <code>&lt;keyword&gt;</code>s, bound to the specified transformers.  Each
binding of a <code>&lt;keyword&gt;</code> has <code>&lt;body&gt;</code> as its region.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>let-syntax</code> is available only after having required the file
<code>"full-syntax"</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let-syntax</span> <span class="p">((</span><span class="nf">when</span> <span class="p">(</span><span class="k">syntax-rules</span> <span class="p">()</span>
                  <span class="p">((</span><span class="nf">when</span> <span class="nv">test</span> <span class="nv">stmt1</span> <span class="nv">stmt2</span> <span class="o">...</span><span class="p">)</span>
                   <span class="p">(</span><span class="k">if</span> <span class="nv">test</span>
                       <span class="p">(</span><span class="k">begin</span> <span class="nv">stmt1</span>
                              <span class="nv">stmt2</span> <span class="o">...</span><span class="p">))))))</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="k">if</span> <span class="no">#t</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">when</span> <span class="nv">if</span> <span class="p">(</span><span class="k">set!</span> <span class="nv">if</span> <span class="ss">'now</span><span class="p">))</span>
    <span class="nv">if</span><span class="p">))</span>                           <span class="nv">=&gt;</span>  <span class="nv">now</span>

<span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="ss">'outer</span><span class="p">))</span>
  <span class="p">(</span><span class="k">let-syntax</span> <span class="p">((</span><span class="nf">m</span> <span class="p">(</span><span class="k">syntax-rules</span> <span class="p">()</span> <span class="p">((</span><span class="nf">m</span><span class="p">)</span> <span class="nv">x</span><span class="p">))))</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="ss">'inner</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">m</span><span class="p">))))</span>                       <span class="nv">=&gt;</span>  <span class="nv">outer</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small">R<sup>5</sup>RS syntax</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(letrec-syntax &lt;bindings&gt; &lt;body&gt;)</code></strong><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Syntax of <code>letrec-syntax</code> is the same as for <code>let-syntax</code>.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;body&gt;</code> is expanded in the syntactic environment obtained by
extending the syntactic environment of the <code>letrec-syntax</code> expression
with macros whose keywords are the <code>&lt;keyword&gt;</code>s, bound to the specified
transformers.  Each binding of a <code>&lt;keyword&gt;</code> has the <code>&lt;bindings&gt;</code> as well
as the <code>&lt;body&gt;</code> within its region, so the transformers can transcribe
expressions into uses of the macros introduced by the <code>letrec-syntax</code>
expression.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>letrec-syntax</code> is available only after having required the file
<code>"full-syntax"</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">letrec-syntax</span>
  <span class="p">((</span><span class="nf">my-or</span> <span class="p">(</span><span class="k">syntax-rules</span> <span class="p">()</span>
            <span class="p">((</span><span class="nf">my-or</span><span class="p">)</span> <span class="no">#f</span><span class="p">)</span>
            <span class="p">((</span><span class="nf">my-or</span> <span class="nv">e</span><span class="p">)</span> <span class="nv">e</span><span class="p">)</span>
            <span class="p">((</span><span class="nf">my-or</span> <span class="nv">e1</span> <span class="nv">e2</span> <span class="o">...</span><span class="p">)</span>
             <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">temp</span> <span class="nv">e1</span><span class="p">))</span>
               <span class="p">(</span><span class="k">if</span> <span class="nv">temp</span>
                   <span class="nv">temp</span>
                   <span class="p">(</span><span class="nf">my-or</span> <span class="nv">e2</span> <span class="o">...</span><span class="p">)))))))</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">x</span> <span class="no">#f</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">y</span> <span class="mi">7</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">temp</span> <span class="mi">8</span><span class="p">)</span>
        <span class="p">(</span><span class="k">let</span> <span class="nv">odd?</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if</span> <span class="nv">even?</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">my-or</span> <span class="nv">x</span>
           <span class="p">(</span><span class="k">let</span> <span class="nv">temp</span><span class="p">)</span>
           <span class="p">(</span><span class="k">if</span> <span class="nv">y</span><span class="p">)</span>
           <span class="nv">y</span><span class="p">)))</span>        <span class="nv">=&gt;</span>  <span class="mi">7</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph text-right">
<p><span class="rmargin small"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><strong><code>(macro-expand form)</code></strong><br>
<strong><code>(macro-expand</strong> form)</code>*<br></p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>macro-expand</code> returns the macro expansion of <code>form</code> if it is a macro call,
otherwise <code>form</code> is returned unchanged.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">add1</span> <span class="nv">x</span><span class="p">)</span> <span class="o">`</span><span class="p">(</span><span class="nb">+</span> <span class="o">,</span><span class="nv">x</span> <span class="mi">1</span><span class="p">))</span>
<span class="p">(</span><span class="nf">macro-expand</span> <span class="o">'</span><span class="p">(</span><span class="nf">add1</span> <span class="nv">foo</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">foo</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">macro-expand</span> <span class="o">'</span><span class="p">(</span><span class="nb">car</span> <span class="nv">bar</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">bar</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>macro-expand</code> returns the <strong>full</strong> macro expansion of <code>form</code>, that is it repeats
the macro-expansion, while the expanded form contains macro calls.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">add2</span> <span class="nv">x</span><span class="p">)</span> <span class="o">`</span><span class="p">(</span><span class="nf">add1</span> <span class="p">(</span><span class="nf">add1</span> <span class="o">,</span><span class="nv">x</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">macro-expand</span> <span class="o">'</span><span class="p">(</span><span class="nf">add2</span> <span class="nv">foo</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nf">add1</span> <span class="p">(</span><span class="nf">add1</span> <span class="nv">foo</span><span class="p">))</span>
<span class="p">(</span><span class="nf">macro-expand*</span> <span class="o">'</span><span class="p">(</span><span class="nf">add2</span> <span class="nv">foo</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">foo</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>macro-expand</code> and <code>macro-expand*</code> expand only the global macros.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_introduction.html">Introduction</a> | ↑ Up: <a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.00)</a> | Next: <a href="_program_structure.html">Program structure</a> →</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Documentation about hygienic macros has been stolen in the SLIB manual
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-09-12 16:56:23 +0200
</div>
</div>
</body>
</html>