<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Erick Gallesio">
<title>STklos Reference Manual : (version 2.10)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cm {
  color: #75715e;
  font-style: italic;
}
pre.rouge .c1 {
  color: #75715e;
  font-style: italic;
}
pre.rouge .cp {
  color: #75715e;
  font-weight: bold;
}
pre.rouge .cs {
  color: #75715e;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .err {
  color: #960050;
  background-color: #1e0010;
}
pre.rouge .gi {
  color: #ffffff;
  background-color: #324932;
}
pre.rouge .gd {
  color: #ffffff;
  background-color: #493131;
}
pre.rouge .ge {
  font-style: italic;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .k, pre.rouge .kv {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kc {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kd {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kp {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kr {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kt {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .kn {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .ow {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .o {
  color: #f92672;
  font-weight: bold;
}
pre.rouge .mf {
  color: #ae81ff;
}
pre.rouge .mh {
  color: #ae81ff;
}
pre.rouge .il {
  color: #ae81ff;
}
pre.rouge .mi {
  color: #ae81ff;
}
pre.rouge .mo {
  color: #ae81ff;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #ae81ff;
}
pre.rouge .se {
  color: #ae81ff;
}
pre.rouge .sa {
  color: #66d9ef;
  font-weight: bold;
}
pre.rouge .sb {
  color: #e6db74;
}
pre.rouge .sc {
  color: #e6db74;
}
pre.rouge .sd {
  color: #e6db74;
}
pre.rouge .s2 {
  color: #e6db74;
}
pre.rouge .sh {
  color: #e6db74;
}
pre.rouge .si {
  color: #e6db74;
}
pre.rouge .sx {
  color: #e6db74;
}
pre.rouge .sr {
  color: #e6db74;
}
pre.rouge .s1 {
  color: #e6db74;
}
pre.rouge .ss {
  color: #e6db74;
}
pre.rouge .s, pre.rouge .dl {
  color: #e6db74;
}
pre.rouge .na {
  color: #a6e22e;
}
pre.rouge .nc {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nd {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .ne {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #a6e22e;
  font-weight: bold;
}
pre.rouge .no {
  color: #66d9ef;
}
pre.rouge .bp {
  color: #f8f8f2;
}
pre.rouge .nb {
  color: #f8f8f2;
}
pre.rouge .ni {
  color: #f8f8f2;
}
pre.rouge .nn {
  color: #f8f8f2;
}
pre.rouge .vc {
  color: #f8f8f2;
}
pre.rouge .vg {
  color: #f8f8f2;
}
pre.rouge .vi {
  color: #f8f8f2;
}
pre.rouge .nv, pre.rouge .vm {
  color: #f8f8f2;
}
pre.rouge .w {
  color: #f8f8f2;
}
pre.rouge .nl {
  color: #f8f8f2;
  font-weight: bold;
}
pre.rouge .nt {
  color: #f92672;
}
pre.rouge {
  color: #f8f8f2;
  background-color: #49483e;
}
</style>
<style>
  /* Customize default CSS */
  .sidebarblock { margin-top: -1em; }
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="doc_threads_mutexes_and_condition_variables" class="book toc2 toc-left">
<div id="header">
<h1>STklos Reference Manual : (version 2.10)</h1>
<div class="details">
<span id="author" class="author">Erick Gallesio</span><br>
<span id="email" class="email"><a href="mailto:eg@stklos.net">eg@stklos.net</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.10)</a></span></p><ul class="sectlevel1">
<li><a href="doc_preface.html">Preface</a>
</li>
<li><a href="doc_introduction.html">1. Introduction</a>
</li>
<li><a href="doc_expressions.html">2. Expressions</a>
</li>
<li><a href="doc_program_structure.html">3. Program structure</a>
</li>
<li><a href="doc_standard_procedures.html">4. Standard Procedures</a>
</li>
<li><a href="doc_regular_expressions.html">5. Regular Expressions</a>
</li>
<li><a href="doc_pattern_matching.html">6. Pattern Matching</a>
</li>
<li><a href="doc_exceptions_and_conditions.html">7. Exceptions and Conditions</a>
</li>
<li><a href="doc_stklos_object_system.html">8. STklos Object System</a>
</li>
<li><a href="doc_threads_mutexes_and_condition_variables.html"><span class="toc-current">9. Threads, Mutexes and Condition Variables</span></a>
<ul class="sectlevel2">
<li><a href="doc_threads_mutexes_and_condition_variables.html#doc_threads">9.1. Threads</a>
</li>
<li><a href="doc_threads_mutexes_and_condition_variables.html#doc_mutexes">9.2. Mutexes</a>
</li>
<li><a href="doc_threads_mutexes_and_condition_variables.html#doc_condition_variables">9.3. Condition Variables</a>
</li>
<li><a href="doc_threads_mutexes_and_condition_variables.html#doc_conditions_2">9.4. Conditions</a>
</li>
</ul>
</li>
<li><a href="doc_stklos_customization.html">10. STklos Customization</a>
</li>
<li><a href="doc_foreign_function_interface.html">11. Foreign Function Interface</a>
</li>
<li><a href="doc_using_the_slib_package.html">12. Using the SLIB package</a>
</li>
<li><a href="doc_srfis.html">13. SRFIs</a>
</li>
<li><a href="doc_bibliography.html">Bibliography</a>
</li>
<li><a href="doc_idiosync.html">Appendix C: STklos Idiosyncrasies</a>
</li>
<li><a href="FDL.html">Appendix D: GNU Free Documentation License</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="doc_threads_mutexes_and_condition_variables">9. Threads, Mutexes and Condition Variables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>



The thread system provides the following data types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Thread (a virtual processor which shares object space with all other threads)</p>
</li>
<li>
<p>Mutex (a mutual exclusion device, also known as a lock and binary semaphore)</p>
</li>
<li>
<p>Condition variable (a set of blocked threads)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong><em>STklos</em></strong> thread system is conform to <strong><a href="http://srfi.schemers.org/srfi-18/srfi-18.html">SRFI-18</a></strong> (<em>Multithreading support</em>), and implement
all the SRFI mechanisms. See this SRFI documentation for a more complete
description</p>
</div>
<div class="sect2">
<h3 id="doc_threads">9.1. Threads</h3>
<div id="make-thread" class="paragraph">
<p><a id='P_make-thread'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(make-thread thunk) </strong></code><br>
<code><strong>(make-thread thunk name) </strong></code><br>
<code><strong>(make-thread thunk name stack-size) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new thread. This thread is not automatically made runnable
(the procedure <code>thread-start!</code> must be used for this). A thread has the
following fields:  name, specific, end-result, end-exception, and a list
of locked/owned mutexes it owns. The thread&#8217;s execution consists of a call
to thunk with the "initial continuation". This continuation causes the
(then) current thread to store the result in its end-result field, abandon
all mutexes it owns, and finally terminate. The dynamic-wind
stack of the initial continuation is empty. The optional name is an
arbitrary Scheme object which identifies the thread (useful for debugging);
it defaults to an unspecified value. The specific field is set to an
unspecified value.  The thread inherits the dynamic environment from the
current thread. Moreover, in this dynamic environment the exception handler
is bound to the "initial exception handler" which is a unary procedure
which causes the (then) current thread to store in its end-exception
field an "uncaught exception" object whose "reason" is the argument
of the handler, abandon all mutexes it owns, and finally terminate.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The optional parameter <code>stack-size</code> permits to specify
the size (in words) reserved for the thread. This option does not exist
in <strong><a href="http://srfi.schemers.org/srfi-18/srfi-18.html">SRFI-18</a></strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id='P_current-thread'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(current-thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the current thread.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nb">eq?</span> <span class="p">(</span><span class="nf">current-thread</span><span class="p">)</span> <span class="p">(</span><span class="nf">current-thread</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="no">#t</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_thread-start!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-start! thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Makes <code>thread</code> runnable. The <code>thread</code> must be a new thread.
<code>Thread-start!</code> returns the thread.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">thread-start!</span> <span class="p">(</span><span class="nf">make-thread</span>
                           <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nb">write</span> <span class="ss">'a</span><span class="p">))))))</span>
   <span class="p">(</span><span class="nb">write</span> <span class="ss">'b</span><span class="p">)</span>
   <span class="p">(</span><span class="nf">thread-join!</span> <span class="nv">t</span><span class="p">))</span>       <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
                               <span class="nv">after</span> <span class="nv">writing</span> <span class="nv">ab</span> <span class="nv">or</span> <span class="nv">ba</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_thread-yield!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-yield!) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The current thread exits the running state as if its quantum had
expired. <code>Thread-yield!</code> returns an unspecified value.</p>
</div>
<div class="paragraph">
<p><a id='P_thread-terminate!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-terminate! thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Causes an abnormal termination of the <code>thread</code>. If the <code>thread</code> is not
already terminated, all mutexes owned by the <code>thread</code> become
unlocked/abandoned and a "terminated thread exception" object is stored
in the thread&#8217;s end-exception field. If <code>thread</code> is the current thread,
<code>thread-terminate!</code> does not return. Otherwise, <code>thread-terminate!</code>
returns an unspecified value; the termination of the thread will occur
before <code>thread-terminate!</code> returns.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>This operation must be used carefully because it terminates a thread
abruptly and it is impossible for that thread to perform any kind of
cleanup. This may be a problem if the thread is in the middle of a
critical section where some structure has been put in an inconsistent
state. However, another thread attempting to enter this critical section
will raise an "abandoned mutex exception" because the mutex is
unlocked/abandoned.</p>
</li>
<li>
<p>On <em>Android</em>, <code>thread-terminate!</code> can be used only to terminate the
current thread.  Trying to kill another thread produces an error.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a id='P_thread-sleep!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-sleep! timeout) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The current thread waits until the <code>timeout</code> is reached. This blocks the
thread only if timeout represents a point in the future. It is an error
for timeout to be <code>#f</code>. <code>Thread-sleep!</code> returns an unspecified value.</p>
</div>
<div id="thread-join" class="paragraph">
<p><a id='P_thread-join!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-join! thread) </strong></code><br>
<code><strong>(thread-join! thread timeout) </strong></code><br>
<code><strong>(thread-join! thread timeout timeout-val) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The current thread waits until the <code>thread</code> terminates (normally or not)
or until the timeout is reached if <code>timeout</code> is supplied.
If the timeout is reached, <code>thread-join!</code> returns <code>timeout-val</code> if it is
supplied, otherwise a "join timeout exception" is raised.
If the <code>thread</code> terminated normally, the content of the end-result
field is returned, otherwise the content of the end-exception field
is raised.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">t</span> <span class="p">(</span><span class="nf">thread-start!</span> <span class="p">(</span><span class="nf">make-thread</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
                                       <span class="p">(</span><span class="nb">expt</span> <span class="mi">2</span> <span class="mi">100</span><span class="p">))))))</span>
  <span class="p">(</span><span class="nf">thread-sleep!</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">thread-join!</span> <span class="nv">t</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">1267650600228229401496703205376</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_thread?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a thread, otherwise returns <code>#f</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">thread?</span> <span class="p">(</span><span class="nf">current-thread</span><span class="p">))</span>  <span class="nv">=&gt;</span> <span class="no">#t</span>
<span class="p">(</span><span class="nf">thread?</span> <span class="ss">'foo</span><span class="p">)</span>              <span class="nv">=&gt;</span> <span class="no">#f</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_thread-name'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-name thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of the <code>thread</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">thread-name</span> <span class="p">(</span><span class="nf">make-thread</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="no">#f</span><span class="p">)</span> <span class="ss">'foo</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="nv">foo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_thread-stack-size'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-stack-size thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the allocated stack size for <code>thread</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">thread-stack-size</span> <span class="p">(</span><span class="nf">make-thread</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="no">#f</span><span class="p">)</span> <span class="ss">'foo</span> <span class="mi">2000</span><span class="p">))</span> <span class="nv">=&gt;</span> <span class="mi">2000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this procedure is not present in <strong><a href="http://srfi.schemers.org/srfi-18/srfi-18.html">SRFI-18</a></strong>.</p>
</div>
<div class="paragraph">
<p><a id='P_thread-specific'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-specific thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the content of the `thread&#8217;s specific field.</p>
</div>
<div class="paragraph">
<p><a id='P_thread-specific-set!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(thread-specific-set! thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>obj</code> into the <code>thread&#8217;s specific field. `Thread-specific-set!</code>
returns an unspecified value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">thread-specific-set!</span> <span class="p">(</span><span class="nf">current-thread</span><span class="p">)</span> <span class="s">"hello"</span><span class="p">)</span>
           <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nf">thread-specific</span> <span class="p">(</span><span class="nf">current-thread</span><span class="p">))</span>
           <span class="nv">=&gt;</span>  <span class="s">"hello"</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="doc_mutexes">9.2. Mutexes</h3>
<div class="paragraph">
<p><a id='P_make-mutex'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(make-mutex) </strong></code><br>
<code><strong>(make-mutex name) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new mutex in the unlocked/not-abandoned state. The optional <code>name</code>
is an arbitrary Scheme object which identifies the mutex
(useful for debugging); it defaults to an unspecified value.
The mutex&#8217;s specific field is set to an unspecified value.</p>
</div>
<div class="paragraph">
<p><a id='P_mutex?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if obj is a mutex, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_mutex-name'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex-name mutex) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of the <code>mutex</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">mutex-name</span> <span class="p">(</span><span class="nf">make-mutex</span> <span class="ss">'foo</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="nv">foo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_mutex-specific'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex-specific mutex) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the content of the `mutex&#8217;s specific field.</p>
</div>
<div class="paragraph">
<p><a id='P_mutex-specific-set!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex-specific! mutex obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>obj</code> into the `mutex&#8217;s specific field and eturns an unspecified value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="nv">m</span> <span class="p">(</span><span class="nf">make-mutex</span><span class="p">))</span>
<span class="p">(</span><span class="nf">mutex-specific-set!</span> <span class="nv">m</span> <span class="s">"hello"</span><span class="p">)</span>  <span class="nv">=&gt;</span>  <span class="nv">unspecified</span>
<span class="p">(</span><span class="nf">mutex-specific</span> <span class="nv">m</span><span class="p">)</span>               <span class="nv">=&gt;</span>  <span class="s">"hello"</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">mutex-lock-recursively!</span> <span class="nv">mutex</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">eq?</span> <span class="p">(</span><span class="nf">mutex-state</span> <span class="nv">mutex</span><span class="p">)</span> <span class="p">(</span><span class="nf">current-thread</span><span class="p">))</span>
      <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">n</span> <span class="p">(</span><span class="nf">mutex-specific</span> <span class="nv">mutex</span><span class="p">)))</span>
        <span class="p">(</span><span class="nf">mutex-specific-set!</span> <span class="nv">mutex</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)))</span>
      <span class="p">(</span><span class="k">begin</span>
        <span class="p">(</span><span class="nf">mutex-lock!</span> <span class="nv">mutex</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">mutex-specific-set!</span> <span class="nv">mutex</span> <span class="mi">0</span><span class="p">))))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">mutex-unlock-recursively!</span> <span class="nv">mutex</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">n</span> <span class="p">(</span><span class="nf">mutex-specific</span> <span class="nv">mutex</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">n</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">mutex-unlock!</span> <span class="nv">mutex</span><span class="p">)</span>
        <span class="p">(</span><span class="nf">mutex-specific-set!</span> <span class="nv">mutex</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">n</span> <span class="mi">1</span><span class="p">)))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_mutex-state'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex-state mutex) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns information about the state of the <code>mutex</code>. The possible results
are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a thread <strong>T</strong>: the mutex is in the locked/owned state and
thread <strong>T</strong> is the owner of the mutex</p>
</li>
<li>
<p>the symbol <strong>not-owned</strong>: the mutex is in the locked/not-owned
state</p>
</li>
<li>
<p>the symbol <strong>abandoned</strong>: the mutex is in the unlocked/abandoned
state</p>
</li>
<li>
<p>the symbol <strong>not-abandoned</strong>: the mutex is in the
unlocked/not-abandoned state</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="nf">mutex-state</span> <span class="p">(</span><span class="nf">make-mutex</span><span class="p">))</span>  <span class="nv">=&gt;</span>  <span class="nv">not-abandoned</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">thread-alive?</span> <span class="nv">thread</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">mutex</span> <span class="p">(</span><span class="nf">make-mutex</span><span class="p">)))</span>
    <span class="p">(</span><span class="nf">mutex-lock!</span> <span class="nv">mutex</span> <span class="no">#f</span> <span class="nv">thread</span><span class="p">)</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">state</span> <span class="p">(</span><span class="nf">mutex-state</span> <span class="nv">mutex</span><span class="p">)))</span>
      <span class="p">(</span><span class="nf">mutex-unlock!</span> <span class="nv">mutex</span><span class="p">)</span> <span class="c1">; avoid space leak</span>
      <span class="p">(</span><span class="nb">eq?</span> <span class="nv">state</span> <span class="nv">thread</span><span class="p">))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_mutex-lock!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex-lock! mutex) </strong></code><br>
<code><strong>(mutex-lock! mutex timeout) </strong></code><br>
<code><strong>(mutex-lock! mutex timeout thread) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>If the <code>mutex</code> is currently locked, the current thread waits until the
<code>mutex</code> is unlocked, or until the timeout is reached if <code>timeout</code> is supplied.
If the <code>timeout</code> is reached, <code>mutex-lock!</code> returns <code>#f</code>.
Otherwise, the state of the mutex is changed as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if thread is <code>#f</code> the mutex becomes <em>locked/not-owned</em>,</p>
</li>
<li>
<p>otherwise, let T be thread (or the current thread if thread
is not supplied),</p>
<div class="ulist">
<ul>
<li>
<p>if T is terminated the mutex becomes <em>unlocked/abandoned</em>,</p>
</li>
<li>
<p>otherwise mutex becomes <em>locked/owned</em> with T as the owner.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>After changing the state of the mutex, an "abandoned mutex exception" is
raised if the mutex was unlocked/abandoned before the state change,
otherwise <code>mutex-lock!</code> returns <code>#t</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">sleep!</span> <span class="nv">timeout</span><span class="p">)</span>
  <span class="c1">;; an alternate implementation of thread-sleep!</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">m</span> <span class="p">(</span><span class="nf">make-mutex</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">mutex-lock!</span> <span class="nv">m</span> <span class="no">#f</span> <span class="no">#f</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">mutex-lock!</span> <span class="nv">m</span> <span class="nv">timeout</span> <span class="no">#f</span><span class="p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id='P_mutex-unlock!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(mutex-unlock! mutex) </strong></code><br>
<code><strong>(mutex-unlock! mutex condition-variable) </strong></code><br>
<code><strong>(mutex-unlock! mutex condition-variable timeout) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Unlocks the <code>mutex</code> by making it unlocked/not-abandoned. It is not an error
to unlock an unlocked mutex and a mutex that is owned by any thread.
If <code>condition-variable</code> is supplied, the current thread is blocked and
added to the <code>condition-variable</code> before unlocking <code>mutex</code>; the thread
can unblock at any time but no later than when an appropriate call to
<code>condition-variable-signal!</code> or <code>condition-variable-broadcast!</code> is
performed (see below), and no later than the timeout (if timeout is
supplied). If there are threads waiting to lock this mutex, the scheduler
selects a thread, the <code>mutex</code> becomes locked/owned or locked/not-owned,
and the thread is unblocked. <code>mutex-unlock!</code> returns <code>#f</code> when the
<code>timeout</code> is reached, otherwise it returns <code>#t</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_with-mutex'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(with-mutex mtx &lt;thunk&gt;) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Executes <code>thunk</code>, protected by mutex <code>mtx</code>. The mutex will
be locked before and released after execution of <code>body</code>, and
also on entrance or departure of its dynamic context
(lock and unlock are used within <code>dynamic-wind</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="doc_condition_variables">9.3. Condition Variables</h3>
<div class="paragraph">
<p><a id='P_make-condition-variable'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(make-conditon-variable) </strong></code><br>
<code><strong>(make-conditon-variable name) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns a new empty condition variable. The optional <code>name</code> is an arbitrary
Scheme object which identifies the condition variable (useful for debugging);
it defaults to an unspecified value. The condition variable&#8217;s specific
field is set to an unspecified value.</p>
</div>
<div class="paragraph">
<p><a id='P_condition-variable?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(conditon-variable? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a condition variable, otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_condition-variable-name'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(conditon-variable-name conditon-variable) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the name of the <code>condition-variable</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_condition-variable-specific'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(conditon-variable-specific conditon-variable) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the content of the `condition-variable&#8217;s specific field.</p>
</div>
<div class="paragraph">
<p><a id='P_condition-variable-specific-set!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(conditon-variable-specific-set! conditon-variable obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Stores <code>obj</code> into the `condition-variable&#8217;s specific field.</p>
</div>
<div class="paragraph">
<p><a id='P_condition-variable-signal!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(condition-variable-signal! condition-variable) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>If there are threads blocked on the <code>condition-variable</code>, the scheduler
selects a thread and unblocks it. <code>Condition-variable-signal!</code>  returns
an unspecified value.</p>
</div>
<div class="paragraph">
<p><a id='P_condition-variable-broadcast!'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(condition-variable-broadcast! condition-variable) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Unblocks all the threads blocked on the <code>condition-variable</code>.
<code>Condition-variable-broadcast!</code> returns an unspecified value.</p>
</div>
</div>
<div class="sect2">
<h3 id="doc_conditions_2">9.4. Conditions</h3>
<div class="paragraph">
<p><a id='P_join-timeout-exception?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(join-timeout-exception? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a <em>join timeout exception</em> object,
otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>A <em>join timeout exception</em> is raised when thread-join! is called, the timeout
is reached and no timeout-val is supplied.</p>
</div>
<div class="paragraph">
<p><a id='P_abandoned-mutex-exception?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(abandoned-mutex-exception? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an <em>abandoned mutex exception</em> object,
otherwise returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>An <em>abandoned mutex exception</em> is raised when the current thread locks
a mutex that was owned by a thread which terminated ,(see <code>mutex-lock!</code>).</p>
</div>
<div class="paragraph">
<p><a id='P_terminated-thread-exception?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(terminated-thread-exception? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is a <em>terminated thread exception</em> object, otherwise
returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>A <em>terminated thread exception</em> is raised when thread-join! is
called and the target thread has terminated as a result of a call to
<code>thread-terminate!</code>.</p>
</div>
<div class="paragraph">
<p><a id='P_uncaught-exception?'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(uncaught-exception? obj) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns <code>#t</code> if <code>obj</code> is an <em>uncaught exception</em> object, otherwise
returns <code>#f</code>.</p>
</div>
<div class="paragraph">
<p>An <em>uncaught exception</em> is raised when <code>thread-join!</code> is called and the
target thread has terminated because it raised an exception that called
the initial exception handler of that thread.</p>
</div>
<div class="paragraph">
<p><a id='P_uncaught-exception-reason'></a>
</p>
</div>
<div class="paragraph rmargin text-right">
<p><span class="rmargin small silver"><em>STklos</em> procedure</span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph small">
<p><code><strong>(uncaught-exception-reason exc) </strong></code><br></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Returns the object which was passed to the initial exception handler
of that thread (<code>exc</code> must be an <em>uncaught exception</em> object).</p>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="doc_stklos_object_system.html">STklos Object System</a> | ↑ Up: <a href="stklos-ref-multi.html">STklos Reference Manual : (version 2.10)</a> | Next: <a href="doc_stklos_customization.html">STklos Customization</a> →</p>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Documentation about hygienic macros has been stolen in the SLIB manual
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. In fact <code>define-module</code> on a given name defines a new module only the first time it is invoked on this name. By this way, interactively reloading a module does not define a new entity, and the other modules which use it are not altered.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. This transcript uses the default toplevel loop             which displays the name of the current module in the evaluator             prompt.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Under Unix, you can simply connect to a listening socket with the <code>telnet</code> of <code>netcat</code> command. For the given example, this can be achieved with <code>netcat localhost 12345</code>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Port 13, if open, can be used for testing: making a connection to it permits to know the distant system&#8217;s idea of the time of day.
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. The "pattern matching compiler" has been written by Jean-Marie Geffroy and is part of the Manuel Serrano&#8217;s Bigloo compiler since several years <a href="doc_bibliography.html#Bigloo">[Bigloo]</a>
</div>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. This section is an adaptation of Jeff Dalton&#8217;s (<a href="mailto:J.Dalton@ed.ac.uk">J.Dalton@ed.ac.uk</a>) "<strong><em>Brief introduction to CLOS</em></strong>" which can be found at <a href="http://www.aiai.ed.ac.uk/~jeff/clos-guide.html" class="bare">http://www.aiai.ed.ac.uk/~jeff/clos-guide.html</a>
</div>
</div>
</body>
</html>